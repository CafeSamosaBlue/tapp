(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{168:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(1);function r(e){var t=e.oneOfType([e.number,e.string]);return{apiResponse:e.shape({status:e.oneOf(["success","error"]).isRequired,message:e.string,payload:e.any}),apiResponseSuccess:e.shape({status:e.oneOf(["success"]).isRequired,message:e.string,payload:e.any}),apiResponseError:e.shape({status:e.oneOf(["error"]).isRequired,message:e.string.isRequired,payload:e.any}),idOnly:e.shape({id:t}),session:e.shape({id:t,start_date:e.string,end_date:e.string,name:e.string.isRequired}),contractTemplateMinimal:e.shape({template_file:e.string}),contractTemplate:e.shape({template_file:e.string,template_name:e.string}),position:e.shape({position_code:e.string.isRequired,position_title:e.string,hours_per_assignment:e.number,start_date:e.string,end_date:e.string,contract_template_id:t,duties:e.string,qualifications:e.string,ad_hours_per_assignment:e.number,ad_num_assignments:e.number,ad_open_date:e.string,ad_close_date:e.string,desired_num_assignments:e.number,current_enrollment:e.number,current_waitlisted:e.number,instructor_ids:e.arrayOf(t),instructor_preference:e.arrayOf(e.shape({preference_level:e.number,applicant_id:t,instructor_id:t}))}),instructor:e.shape({first_name:e.string.isRequired,last_name:e.string.isRequired,email:e.string,utorid:e.string.isRequired}),assignment:e.shape({start_date:e.string,end_date:e.string,note:e.string,contract_override_pdf:e.string,applicant_id:t.isRequired,position_id:t.isRequired,active_offer_status:e.oneOf(["accepted","rejected","withdrawn","provisional","pending","no_offer",null])}),applicant:e.shape({utorid:e.string.isRequired,student_number:e.string,first_name:e.string.isRequired,last_name:e.string.isRequired,email:e.string,phone:e.string}),wageChunk:e.shape({start_date:e.string,end_date:e.string,hours:e.number,rate:e.number}),reportingTag:e.shape({name:e.string}),offer:e.shape({first_name:e.string,last_name:e.string,email:e.string,position_code:e.string,position_title:e.string,position_start_date:e.string,position_end_date:e.string,first_time_ta:e.bool,instructor_contact_desc:e.string,pay_period_desc:e.string,installments:e.number,ta_coordinator_name:e.string,ta_coordinator_email:e.string,emailed_date:e.string,status:e.string,accepted_date:e.string,rejected_date:e.string,withdrawn_date:e.string}),application:e.shape({session_id:t,comments:e.string,program:e.string,department:e.string,previous_uoft_experience:e.string,yip:e.number,annotation:e.string,applicant_id:t,position_preference:e.arrayOf(e.shape({preference_level:e.number,position_id:t}))}),user:e.shape({utorid:e.string,roles:e.arrayOf(e.string)})}}r(n.n(a).a)},170:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var a=n(7),r=n(12);function i(e){try{return JSON.parse(e)}catch(t){return e}}function o(e){var t,n=new URLSearchParams(e),o={},s=Object(r.a)(n.entries());try{for(s.s();!(t=s.n()).done;){var c=Object(a.a)(t.value,2),u=c[0],l=c[1];o[u]=i(l)}}catch(d){s.e(d)}finally{s.f()}return o}},255:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),i=n(9),o=n(12),s=n(15),c=n(17),u=n(130),l=n.n(u),d={"/math/default.html":'<!DOCTYPE html>\n<html>\n    <head>\n        <meta charset="utf-8" />\n        <title>Offer Letter</title>\n        <style>\n            * {\n                box-sizing: border-box;\n            }\n            html {\n                margin: 0;\n                padding: 0;\n            }\n            body {\n                width: 8.5in;\n                margin: 0;\n                padding-left: 0.75in;\n                padding-right: 0.75in;\n                hyphens: auto;\n                text-align: justify;\n                box-sizing: border-box;\n                font-family: Helvetica, sans-serif;\n                font-size: 12pt;\n            }\n            .i {\n                font-style: italic;\n            }\n            .emphcolor {\n                color: red;\n            }\n            table.appointment-summary {\n                margin-left: 1in;\n                font-size: 0.9em;\n            }\n            .appointment-summary th {\n                padding-right: 0.5em;\n                text-align: right;\n                font-weight: normal;\n            }\n            .letter-head p {\n                margin-bottom: 0.5in;\n            }\n            .letter-foot {\n                margin-top: 1in;\n            }\n            .signature {\n                font-family: alex_brushregular, cursive;\n                font-size: 30pt;\n                margin-left: 0.5in;\n                margin-bottom: 0.1in;\n            }\n            .applicant .signature {\n                border-bottom: 1px solid black;\n                min-width: 2.5in;\n                display: inline-block;\n                margin-left: 0;\n            }\n            .checkbox {\n                font-size: 18pt;\n            }\n\n            @media only screen and (max-width: 9in) {\n                /* when printed, these styles won\'t show\n\t\t\t\tbecause the "screen" is 8.5in */\n                body {\n                    width: unset;\n                    padding-bottom: 0.5in;\n                    padding-left: 2em;\n                    padding-right: 2em;\n                }\n            }\n        </style>\n        <link rel="stylesheet" href="font.css" />\n        <link rel="stylesheet" href="header.css" />\n        \x3c!-- for rendering with wkhtmltopdf styles need to be inlined; when rendered directly in a browser,\n\tthis will just be invalid CSS --\x3e\n        <style>\n            {{ style_font }}\n        </style>\n        <style>\n            {{ style_header }}\n        </style>\n    </head>\n    <body>\n        <div class="letter-head">\n            <div class="uoftlogo"></div>\n            <p>{{ date }}</p>\n            <p>\n                {{ first_name }} {{ last_name }}<br />\n                c/o Some Department<br />\n                University of Toronto\n            </p>\n            <p>Dear {{ first_name }},</p>\n        </div>\n        <div class="letter-body">\n            <p>\n                I am pleased to offer you an appointment as a Teaching Assistant\n                in Some Department. The starting date of your appointment will\n                be {{ start_date | date: "%b %d, %Y" }} and this appointment\n                will end on {{ end_date | date: "%b %d, %Y" }} with no further\n                notice to you.\n            </p>\n            <h3 class="i">Appointment Summary</h3>\n            <table class="appointment-summary">\n                <tr>\n                    <th>Appointment:</th>\n                    <td class="emphcolor">\n                        {{ position_code }} {{ position_title }}\n                    </td>\n                </tr>\n                <tr>\n                    <th>Hours:</th>\n                    <td class="emphcolor">{{ hours }}</td>\n                </tr>\n                <tr>\n                    <th>Start Date:</th>\n                    <td>{{ start_date | date: "%b %d, %Y" }}</td>\n                </tr>\n                <tr>\n                    <th>End Date:</th>\n                    <td>{{ end_date | date: "%b %d, %Y" }}</td>\n                </tr>\n                <tr>\n                    <th>Rate:</th>\n                    <td>{{ pay_period_desc }}</td>\n                </tr>\n            </table>\n\n            <p>\n                Your appointment will be for {{ hours }} hours for {{\n                position_code }}. Your Course Coordinator(s) {{\n                instructor_contact_desc }} will be in contact with you. You will\n                be paid {{ pay_period_desc }} for this position. You will be\n                paid in {{ installments }} instalments, once per month for the\n                period of your appointment. Your salary will be paid by direct\n                deposit.\n            </p>\n            Your payroll documentation will be available online through the\n            University\u2019s Employee Self-Service (ESS) at\n            <a href="http://ess.hrandequity.utoronto.ca/"\n                >ess.hrandequity.utoronto.ca/</a\n            >. This includes electronic delivery of your pay statement, tax\n            documentation, and other payroll documentation as made available\n            from time to time. You are able to print copies of these documents\n            directly from ESS.\n            <p>\n                By signing this Employment Agreement, you authorize the\n                University to provide your T4 slips electronically and not in a\n                paper format. If you wish to discuss an alternative format,\n                please contact Central Payroll Services at\n                payroll.hr@utoronto.ca.\n            </p>\n            <p>\n                This appointment is being granted on the basis that you are a\n                student or Post-Doctoral Fellow (PDF) at the University of\n                Toronto on the starting date of the appointment. If you are not\n                a student or PDF on the starting date of this appointment, this\n                offer is revoked and the University will have no obligations\n                under this letter.\n            </p>\n            <p>\n                As a Teaching Assistant, you will be a member of the Canadian\n                Union of Public Employees (CUPE) Local 3902, Unit 1 bargaining\n                unit. Your employment will be governed by the terms and\n                conditions of the collective agreement between the University of\n                Toronto and CUPE Local 3902, which may be found on the web at\n                <br />\n                <a\n                    href="http://agreements.hrandequity.utoronto.ca/#CUPE3902_Unit1"\n                    >agreements.hrandequity.utoronto.ca/#CUPE3902_Unit1</a\n                >\n                <br />\n                Once you accept the offer of employment, a copy of the agreement\n                will be given to you if you do not already have one. A statement\n                about the Union, along with other information about the Union,\n                can be found on the Union\'s website (<a\n                    href="http://www.cupe3902.org/unit-1/"\n                    >http://www.cupe3902.org/unit-1/</a\n                >). All of this information is that of the Union, represents the\n                views of the Union, and has not been approved or endorsed by the\n                University.\n            </p>\n            <h3>Required Training</h3>\n            <p>\n                You are required to take the following training:\n            </p>\n            <ul>\n                <li>\n                    U of T AODA Online Training, provided by the Accessibility\n                    for Ontarians with Disabilities Act (AODA) Office, available\n                    at\n                    <a href="http://aoda.hrandequity.utoronto.ca/"\n                        >aoda.hrandequity.utoronto.ca/</a\n                    >\n                </li>\n            </ul>\n            <p>\n                If you are new to the University, or have not previously\n                completed the training, you will be notified by email when the\n                training module becomes available for your completion, normally\n                one month after the start date of this appointment. Completion\n                of this training will be automatically captured in the system\n                and you will be paid for this training in accordance with the\n                rates set out in your collective agreement. Please note that you\n                only need to complete the above training program once with the\n                University.\n            </p>\n            <h3>Policies & Procedures</h3>\n            <p>\n                You will also be subject to and bound by University policies of\n                general application and their related guidelines. The policies\n                are listed on the Governing Council website at\n                <a\n                    href="http://www.governingcouncil.utoronto.ca/Governing_Council/Policies.htm"\n                    >www.governingcouncil.utoronto.ca/Governing_Council/Policies.htm</a\n                >\n                For convenience, a partial list of policies, those applicable to\n                all employees, and related guidelines can be found on the Human\n                Resources and Equity website at policies.hrandequity.utoronto.ca\n                Printed versions will be provided, upon request, through Human\n                Resources or your supervisor.\n            </p>\n            <p>\n                You should pay particular attention to those policies which\n                confirm the University\u2019s commitment to, and your obligation to\n                support, a workplace that is free from discrimination and\n                harassment as set out in the Human Rights Code, is safe as set\n                out in the Occupational Health and Safety Act, and that respects\n                the University\'s commitment to equity and to workplace civility.\n            </p>\n            <p>\n                All of the applicable policies may be amended and/or new\n                policies may be introduced from time to time. When this happens,\n                if notice is required you will be given notice as the University\n                deems necessary and the amendments will become binding terms of\n                your employment contract with the University.\n            </p>\n            <h3>Accessibility</h3>\n            <p>\n                The University has a number of programs and services available\n                to employees who have need of accommodation due to disability\n                through its Health & Well-being Programs and Services (<a\n                    href="http://www.hrandequity.utoronto.ca/about-hr-equity/health.htm"\n                    >www.hrandequity.utoronto.ca/about-hr-equity/health.htm</a\n                >). A description of the accommodation process is available in\n                the Accommodation for Employees with Disabilities: U of T\n                Guidelines, which may be found at:\n                <br />\n                <a\n                    href="http://well-being.hrandequity.utoronto.ca/services/#accommodation"\n                    >well-being.hrandequity.utoronto.ca/services/#accommodation</a\n                >\n                <br />\n                In the event that you have a disability that would impact upon\n                how you would respond to an emergency in the workplace (e.g.,\n                situations requiring evacuation), you should contact Health &\n                Well-being Programs & Services at 416.978.2149 as soon as\n                possible so that you can be provided with information regarding\n                an individualized emergency response plan.\n            </p>\n            <p>\n                The law requires the Employment Standards Act Poster to be\n                provided to all employees; it is available on the HR & Equity\n                website at\n                <a\n                    href="http://www.hrandequity.utoronto.ca/news/employment-standards-ontario"\n                    >www.hrandequity.utoronto.ca/news/employment-standards-ontario</a\n                >\n                This poster describes the minimum rights and obligations\n                contained in the Employment Standards Act. Please note that in\n                many respects this offer of employment exceeds the minimum\n                requirements set out in the Act.\n            </p>\n            <p>\n                Your duties may include all or any combination of the following:\n                grading, scheduled tutorials, office hours, Math Aid Centre\n                hours, and test and exam invigilation. You will be expected to\n                complete all grading for all student work that is completed\n                during the term of the appointment, up to and including final\n                exams.\n            </p>\n            <p>\n                Within 15 working days after the date of this letter, you will\n                be given the opportunity to review the Description of Duties and\n                Allocation of Hours (DDAH) form, which will set out more\n                specifically the duties of your position, and the hours assigned\n                to each.\n            </p>\n            <p>\n                Please sign below to indicate your acceptance of this offer, and\n                return a copy of this letter to me as soon as possible but no\n                later than 2 days after you have been provided with the DDAH\n                form. If we have not heard from you by this deadline, this offer\n                may be withdrawn. If you are unable to accept this offer, please\n                advise me immediately.\n            </p>\n            <p>\n                If you have any questions, please contact me via email at\n                <a href="mailto:tacoord@toronto.edu">tacoord@toronto.edu</a>\n            </p>\n        </div>\n        <div class="letter-foot tacoordinator">\n            <p>Yours sincerely,</p>\n            <div class="signature">Tom Tomson</div>\n            <div class="details">\n                Tom Tomson<br />TA Coordinator<br />Some Department\n            </div>\n        </div>\n        <div>\n            <p>\n                <span class="checkbox"\n                    >{% if signature == blank %}\u2610{% else %}\u2611{% endif %}</span\n                >\n                I confirm that I will be registered as a University of Toronto\n                student or PDF on the date that this appointment begins. I\n                understand that if I should cease to be registered as a\n                University of Toronto student or PDF during the period of this\n                appointment, for any reason other than convocation, I must\n                immediately notify my supervisor, and my appointment may be\n                terminated.\n            </p>\n        </div>\n        <div class="letter-foot applicant">\n            <p>Please sign below to accept this offer.</p>\n            <div class="signature">{{ signature }}</div>\n            <div class="details">\n                Applicant Signature\n            </div>\n        </div>\n    </body>\n</html>',"/math/oto.html":'<!DOCTYPE html>\n<html>\n    <head>\n        <meta charset="utf-8" />\n        <title>Offer Letter</title>\n        <style>\n            * {\n                box-sizing: border-box;\n            }\n            html {\n                margin: 0;\n                padding: 0;\n            }\n            body {\n                width: 8.5in;\n                margin: 0;\n                padding-left: 0.75in;\n                padding-right: 0.75in;\n                hyphens: auto;\n                text-align: justify;\n                box-sizing: border-box;\n                font-family: Helvetica, sans-serif;\n                font-size: 12pt;\n            }\n            .i {\n                font-style: italic;\n            }\n            .emphcolor {\n                color: red;\n            }\n            table.appointment-summary {\n                margin-left: 1in;\n                font-size: 0.9em;\n            }\n            .appointment-summary th {\n                padding-right: 0.5em;\n                text-align: right;\n                font-weight: normal;\n            }\n            .letter-head p {\n                margin-bottom: 0.5in;\n            }\n            .letter-foot {\n                margin-top: 1in;\n            }\n            .signature {\n                font-family: alex_brushregular, cursive;\n                font-size: 30pt;\n                margin-left: 0.5in;\n                margin-bottom: 0.1in;\n            }\n            .applicant .signature {\n                border-bottom: 1px solid black;\n                min-width: 2.5in;\n                display: inline-block;\n                margin-left: 0;\n            }\n            .checkbox {\n                font-size: 18pt;\n            }\n\n            @media only screen and (max-width: 9in) {\n                /* when printed, these styles won\'t show\n\t\t\t\tbecause the "screen" is 8.5in */\n                body {\n                    width: unset;\n                    padding-bottom: 0.5in;\n                    padding-left: 2em;\n                    padding-right: 2em;\n                }\n            }\n        </style>\n        <link rel="stylesheet" href="font.css" />\n        <link rel="stylesheet" href="header.css" />\n        \x3c!-- for rendering with wkhtmltopdf styles need to be inlined; when rendered directly in a browser,\n\tthis will just be invalid CSS --\x3e\n        <style>\n            {{ style_font }}\n        </style>\n        <style>\n            {{ style_header }}\n        </style>\n    </head>\n    <body>\n        <div class="letter-head">\n            <div class="uoftlogo"></div>\n            <p>{{ date }}</p>\n            <p>\n                {{ first_name }} {{ last_name }}<br />\n                c/o Some Department<br />\n                University of Toronto\n            </p>\n            <p>Dear {{ first_name }},</p>\n        </div>\n        <div class="letter-body">\n            <p>\n                I am pleased to offer you an appointment as a Teaching Assistant\n                in Some Department. The starting date of your appointment will\n                be {{ start_date | date: "%b %d, %Y" }} and this appointment\n                will end on {{ end_date | date: "%b %d, %Y" }} with no further\n                notice to you.\n            </p>\n            <h3 class="i">Appointment Summary</h3>\n            <table class="appointment-summary">\n                <tr>\n                    <th>Appointment:</th>\n                    <td class="emphcolor">\n                        {{ position_code }} {{ position_title }}\n                    </td>\n                </tr>\n                <tr>\n                    <th>Hours:</th>\n                    <td class="emphcolor">{{ hours }}</td>\n                </tr>\n                <tr>\n                    <th>Start Date:</th>\n                    <td>{{ start_date | date: "%b %d, %Y" }}</td>\n                </tr>\n                <tr>\n                    <th>End Date:</th>\n                    <td>{{ end_date | date: "%b %d, %Y" }}</td>\n                </tr>\n                <tr>\n                    <th>Rate:</th>\n                    <td>{{ pay_period_desc }}</td>\n                </tr>\n            </table>\n\n            <p>\n                Your appointment will be for {{ hours }} hours for {{\n                position_code }}. This is a ONE TIME ONLY appointment. Your Course Coordinator(s) {{\n                instructor_contact_desc }} will be in contact with you. You will\n                be paid {{ pay_period_desc }} for this position. You will be\n                paid in one instalment. Your salary will be paid by direct\n                deposit.\n            </p>\n            Your payroll documentation will be available online through the\n            University\u2019s Employee Self-Service (ESS) at\n            <a href="http://ess.hrandequity.utoronto.ca/"\n                >ess.hrandequity.utoronto.ca/</a\n            >. This includes electronic delivery of your pay statement, tax\n            documentation, and other payroll documentation as made available\n            from time to time. You are able to print copies of these documents\n            directly from ESS.\n            <p>\n                By signing this Employment Agreement, you authorize the\n                University to provide your T4 slips electronically and not in a\n                paper format. If you wish to discuss an alternative format,\n                please contact Central Payroll Services at\n                payroll.hr@utoronto.ca.\n            </p>\n            <p>\n                This appointment is being granted on the basis that you are a\n                student or Post-Doctoral Fellow (PDF) at the University of\n                Toronto on the starting date of the appointment. If you are not\n                a student or PDF on the starting date of this appointment, this\n                offer is revoked and the University will have no obligations\n                under this letter.\n            </p>\n            <p>\n                As a Teaching Assistant, you will be a member of the Canadian\n                Union of Public Employees (CUPE) Local 3902, Unit 1 bargaining\n                unit. Your employment will be governed by the terms and\n                conditions of the collective agreement between the University of\n                Toronto and CUPE Local 3902, which may be found on the web at\n                <br />\n                <a\n                    href="http://agreements.hrandequity.utoronto.ca/#CUPE3902_Unit1"\n                    >agreements.hrandequity.utoronto.ca/#CUPE3902_Unit1</a\n                >\n                <br />\n                Once you accept the offer of employment, a copy of the agreement\n                will be given to you if you do not already have one. A statement\n                about the Union, along with other information about the Union,\n                can be found on the Union\'s website (<a\n                    href="http://www.cupe3902.org/unit-1/"\n                    >http://www.cupe3902.org/unit-1/</a\n                >). All of this information is that of the Union, represents the\n                views of the Union, and has not been approved or endorsed by the\n                University.\n            </p>\n            <h3>Required Training</h3>\n            <p>\n                You are required to take the following training:\n            </p>\n            <ul>\n                <li>\n                    U of T AODA Online Training, provided by the Accessibility\n                    for Ontarians with Disabilities Act (AODA) Office, available\n                    at\n                    <a href="http://aoda.hrandequity.utoronto.ca/"\n                        >aoda.hrandequity.utoronto.ca/</a\n                    >\n                </li>\n            </ul>\n            <p>\n                If you are new to the University, or have not previously\n                completed the training, you will be notified by email when the\n                training module becomes available for your completion, normally\n                one month after the start date of this appointment. Completion\n                of this training will be automatically captured in the system\n                and you will be paid for this training in accordance with the\n                rates set out in your collective agreement. Please note that you\n                only need to complete the above training program once with the\n                University.\n            </p>\n            <h3>Policies & Procedures</h3>\n            <p>\n                You will also be subject to and bound by University policies of\n                general application and their related guidelines. The policies\n                are listed on the Governing Council website at\n                <a\n                    href="http://www.governingcouncil.utoronto.ca/Governing_Council/Policies.htm"\n                    >www.governingcouncil.utoronto.ca/Governing_Council/Policies.htm</a\n                >\n                For convenience, a partial list of policies, those applicable to\n                all employees, and related guidelines can be found on the Human\n                Resources and Equity website at policies.hrandequity.utoronto.ca\n                Printed versions will be provided, upon request, through Human\n                Resources or your supervisor.\n            </p>\n            <p>\n                You should pay particular attention to those policies which\n                confirm the University\u2019s commitment to, and your obligation to\n                support, a workplace that is free from discrimination and\n                harassment as set out in the Human Rights Code, is safe as set\n                out in the Occupational Health and Safety Act, and that respects\n                the University\'s commitment to equity and to workplace civility.\n            </p>\n            <p>\n                All of the applicable policies may be amended and/or new\n                policies may be introduced from time to time. When this happens,\n                if notice is required you will be given notice as the University\n                deems necessary and the amendments will become binding terms of\n                your employment contract with the University.\n            </p>\n            <h3>Accessibility</h3>\n            <p>\n                The University has a number of programs and services available\n                to employees who have need of accommodation due to disability\n                through its Health & Well-being Programs and Services (<a\n                    href="http://www.hrandequity.utoronto.ca/about-hr-equity/health.htm"\n                    >www.hrandequity.utoronto.ca/about-hr-equity/health.htm</a\n                >). A description of the accommodation process is available in\n                the Accommodation for Employees with Disabilities: U of T\n                Guidelines, which may be found at:\n                <br />\n                <a\n                    href="http://well-being.hrandequity.utoronto.ca/services/#accommodation"\n                    >well-being.hrandequity.utoronto.ca/services/#accommodation</a\n                >\n                <br />\n                In the event that you have a disability that would impact upon\n                how you would respond to an emergency in the workplace (e.g.,\n                situations requiring evacuation), you should contact Health &\n                Well-being Programs & Services at 416.978.2149 as soon as\n                possible so that you can be provided with information regarding\n                an individualized emergency response plan.\n            </p>\n            <p>\n                The law requires the Employment Standards Act Poster to be\n                provided to all employees; it is available on the HR & Equity\n                website at\n                <a\n                    href="http://www.hrandequity.utoronto.ca/news/employment-standards-ontario"\n                    >www.hrandequity.utoronto.ca/news/employment-standards-ontario</a\n                >\n                This poster describes the minimum rights and obligations\n                contained in the Employment Standards Act. Please note that in\n                many respects this offer of employment exceeds the minimum\n                requirements set out in the Act.\n            </p>\n            <p>\n                Your duties may include all or any combination of the following:\n                grading, scheduled tutorials, office hours, Math Aid Centre\n                hours, and test and exam invigilation. You will be expected to\n                complete all grading for all student work that is completed\n                during the term of the appointment, up to and including final\n                exams.\n            </p>\n            <p>\n                Within 15 working days after the date of this letter, you will\n                be given the opportunity to review the Description of Duties and\n                Allocation of Hours (DDAH) form, which will set out more\n                specifically the duties of your position, and the hours assigned\n                to each.\n            </p>\n            <p>\n                Please sign below to indicate your acceptance of this offer, and\n                return a copy of this letter to me as soon as possible but no\n                later than 2 days after you have been provided with the DDAH\n                form. If we have not heard from you by this deadline, this offer\n                may be withdrawn. If you are unable to accept this offer, please\n                advise me immediately.\n            </p>\n            <p>\n                If you have any questions, please contact me via email at\n                <a href="mailto:tacoord@toronto.edu">tacoord@toronto.edu</a>\n            </p>\n        </div>\n        <div class="letter-foot tacoordinator">\n            <p>Yours sincerely,</p>\n            <div class="signature">Tom Tomson</div>\n            <div class="details">\n                Tom Tomson<br />TA Coordinator<br />Some Department\n            </div>\n        </div>\n        <div>\n            <p>\n                <span class="checkbox"\n                    >{% if signature == blank %}\u2610{% else %}\u2611{% endif %}</span\n                >\n                I confirm that I will be registered as a University of Toronto\n                student or PDF on the date that this appointment begins. I\n                understand that if I should cease to be registered as a\n                University of Toronto student or PDF during the period of this\n                appointment, for any reason other than convocation, I must\n                immediately notify my supervisor, and my appointment may be\n                terminated.\n            </p>\n        </div>\n        <div class="letter-foot applicant">\n            <p>Please sign below to accept this offer.</p>\n            <div class="signature">{{ signature }}</div>\n            <div class="details">\n                Applicant Signature\n            </div>\n        </div>\n    </body>\n</html>'};d["/math/default2018.html"]=d["/math/default.html"],d["/math/invigilate.html"]=d["/math/default.html"],d["/math/invigilate2014.html"]=d["/math/default.html"];var p={sessions:[{id:1,start_date:"2019-09-08T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z",name:"2019 Fall",rate1:45.55,rate2:47.33},{id:2,start_date:"2020-01-01T00:00:00.000Z",end_date:"2020-04-30T00:00:00.000Z",name:"2021 Spring",rate1:45.55,rate2:null}],available_contract_templates:[{template_file:"/math/default.html"},{template_file:"/math/default2018.html"},{template_file:"/math/invigilate.html"},{template_file:"/math/invigilate2014.html"},{template_file:"/math/oto.html"}],contract_templates:[{id:1,template_name:"standard",template_file:"/math/default.html"},{id:2,template_name:"oto",template_file:"/math/oto.html"},{id:3,template_name:"standard",template_file:"/math/default2018.html"},{id:4,template_name:"invigilate",template_file:"/math/invigilate.html"}],contract_templates_by_session:{1:[1,2],2:[3,4]},contract_templates_by_filename:d,instructors:[{id:1e3,last_name:"Smith",first_name:"Henry",email:"hery.smith@utoronto.ca",utorid:"smithh"},{id:1001,last_name:"Garcia",first_name:"Emily",email:"emily.garcia@utoronto.ca",utorid:"garciae"},{id:1002,last_name:"Miller",first_name:"Megan",email:"megan.miller@utoronto.ca",utorid:"millerm"},{id:1003,last_name:"Beera",first_name:"Lizzy",email:"lizzy.beera@utoronto.ca",utorid:"beeral"}],positions_by_session:{1:[10,11,14,15,16],2:[12,13]},positions:[{id:10,position_code:"MAT135H1F",position_title:"Calculus I",hours_per_assignment:70,start_date:"2019-09-08T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z",contract_template_id:1,duties:"Tutorials",qualifications:"Teaching skill",ad_hours_per_assignment:70,ad_num_assignments:15,ad_open_date:"2019-08-01T00:00:00.000Z",ad_close_date:"2019-08-15T00:00:00.000Z",desired_num_assignments:15,current_enrollment:1200,current_waitlisted:200,instructor_ids:[1e3,1001],instructor_preferences:[{preference_level:2,applicant_id:2e3,instructor_id:1e3},{preference_level:1,applicant_id:2002,instructor_id:1e3},{preference_level:-1,applicant_id:2005,instructor_id:1001},{preference_level:1,applicant_id:2002,instructor_id:1001},{preference_level:1,applicant_id:2006,instructor_id:1001}]},{id:11,position_code:"MAT136H1F",position_title:"Calculus II",hours_per_assignment:70,start_date:"2019-09-08T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z",contract_template_id:2,instructor_ids:[]},{id:12,position_code:"CSC135H1F",position_title:"Computer Fun",hours_per_assignment:70,start_date:"2019-09-08T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z",duties:"Tutorials",contract_template_id:3,instructor_ids:[1e3],instructor_preferences:[{preference_level:-1,applicant_id:2005,instructor_id:1e3},{preference_level:2,applicant_id:2001,instructor_id:1e3},{preference_level:1,applicant_id:2006,instructor_id:1e3}]},{id:13,position_code:"MAT235H1F",position_title:"Calculus III",hours_per_assignment:70,start_date:"2019-09-08T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z",contract_template_id:3,instructor_ids:[1002],instructor_preferences:[{preference_level:2,applicant_id:2e3,instructor_id:1002},{preference_level:1,applicant_id:2002,instructor_id:1002}]},{instructor_ids:[1002],position_code:"CSC100H1S",position_title:"Computers for Humans",hours_per_assignment:100,duties:"Some combination of marking, invigilating, tutorials, office hours, and the help centre.",contract_template_id:1,start_date:"2021-01-01T00:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z",id:14},{instructor_ids:[1e3],position_code:"MAT137Y1Y",position_title:"Calculus!",hours_per_assignment:250,duties:"Some combination of marking, invigilating, tutorials, office hours, and the help centre.",contract_template_id:1,start_date:"2019-09-02T00:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z",qualifications:"Skilled Proofs Reader",current_enrollment:1500,current_waitlisted:78,desired_num_assignments:22,id:15},{instructor_ids:[1001],position_code:"MAT135H1F Head TA",position_title:"Calculus I",hours_per_assignment:225,duties:"Top-notch Head TA Stuff",contract_template_id:1,start_date:"2019-09-02T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z",desired_num_assignments:3,id:16}],applicants:[{id:2e3,utorid:"weasleyr",student_number:"89013443",first_name:"Ron",last_name:"Weasley",email:"ron@potter.com",phone:"543-223-9993"},{id:2001,utorid:"potterh",student_number:"999666999",first_name:"Harry",last_name:"Potter",email:"harry@potter.com"},{id:2002,utorid:"smithb",email:"smithb@mail.utoronto.ca",first_name:"Bethany",last_name:"Smith",student_number:"131382748"},{id:2003,utorid:"wilsonh",email:"wilsonh@mail.utoronto.ca",first_name:"Hanna",last_name:"Wilson",student_number:"600366904"},{id:2004,utorid:"molinat",email:"molinat@mail.utoronto.ca",first_name:"Troy",last_name:"Molina",student_number:"328333023"},{id:2005,utorid:"howeyb",email:"howeyb@mail.utoronto.ca",first_name:"Brett",last_name:"Howey",student_number:"329613524"},{id:2006,utorid:"brownd",email:"brownd@mail.utoronto.ca",first_name:"David",last_name:"Brown",student_number:"29151485"}],assignments_by_session:{1:[100,101,102,103,104,105,106,107,108,109],2:[]},assignments:[{id:100,position_id:10,applicant_id:2001,hours:90},{id:101,position_id:10,applicant_id:2005,hours:95},{note:"",position_id:16,applicant_id:2e3,start_date:"2019-09-02T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z",id:102},{note:"",position_id:16,applicant_id:2002,start_date:"2019-09-02T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z",id:103},{note:"",position_id:15,applicant_id:2001,start_date:"2019-09-02T00:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z",id:104},{note:"",position_id:15,applicant_id:2002,start_date:"2019-09-02T00:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z",id:105},{note:"",position_id:15,applicant_id:2005,start_date:"2019-09-02T00:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z",id:106},{note:"",position_id:15,applicant_id:2e3,start_date:"2019-09-02T00:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z",id:107},{note:"",position_id:15,applicant_id:2006,start_date:"2019-09-02T00:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z",id:108},{note:"",position_id:14,applicant_id:2002,start_date:"2021-01-01T00:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z",id:109}],wage_chunks:[{id:3e3,assignment_id:100,hours:20,start_date:"2019-09-08T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z",rate:10.01},{id:3001,assignment_id:100,hours:35,start_date:"2020-01-01T00:00:00.000Z",end_date:"2020-04-20T00:00:00.000Z",rate:12.02},{id:3002,assignment_id:101,hours:95,start_date:"2019-09-01T00:00:00.000Z",end_date:"2020-04-20T00:00:00.000Z",rate:null},{id:3003,assignment_id:102,hours:225,start_date:"2019-09-02T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z"},{id:3004,assignment_id:103,hours:225,start_date:"2019-09-02T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z"},{id:3005,assignment_id:104,hours:125,start_date:"2019-09-02T00:00:00.000Z",end_date:"2019-12-31T05:00:00.000Z"},{id:3006,assignment_id:104,hours:125,start_date:"2020-01-01T05:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z"},{id:3007,assignment_id:105,hours:125,start_date:"2019-09-02T00:00:00.000Z",end_date:"2019-12-31T05:00:00.000Z"},{id:3008,assignment_id:105,hours:125,start_date:"2020-01-01T05:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z"},{id:3009,assignment_id:106,hours:125,start_date:"2019-09-02T00:00:00.000Z",end_date:"2019-12-31T05:00:00.000Z"},{id:3010,assignment_id:106,hours:125,start_date:"2020-01-01T05:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z"},{id:3011,assignment_id:107,hours:100,start_date:"2019-09-02T00:00:00.000Z",end_date:"2019-12-31T05:00:00.000Z"},{id:3012,assignment_id:107,hours:100,start_date:"2020-01-01T05:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z"},{id:3013,assignment_id:108,hours:100,start_date:"2019-09-02T00:00:00.000Z",end_date:"2019-12-31T05:00:00.000Z"},{id:3014,assignment_id:108,hours:100,start_date:"2020-01-01T05:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z"},{id:3015,assignment_id:109,hours:100,start_date:"2021-01-01T00:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z"}],offers:[{id:1e4,assignment_id:100,status:"withdrawn"},{id:10001,assignment_id:100,status:"pending"},{id:10002,assignment_id:101,status:"accepted"},{id:10003,assignment_id:102,status:"withdrawn"}],applications:[{id:15e3,comments:"",program:"Phd",department:"Computer Science",previous_uoft_ta_experience:"Last year I TAed a bunch",yip:2,annotation:"",session_id:1,applicant_id:2e3,position_preferences:[{preference_level:2,position_id:10},{preference_level:3,position_id:15}]},{id:15001,comments:"",program:"UG",department:"Computer Science",previous_uoft_ta_experience:"",yip:2,annotation:"",session_id:1,applicant_id:2001,position_preferences:[{preference_level:0,position_id:12},{preference_level:3,position_id:13}]},{id:15002,comments:"",program:"Phd",department:"Math",previous_uoft_ta_experience:"",yip:2,annotation:"",session_id:1,applicant_id:2002,position_preferences:[{preference_level:3,position_id:10},{preference_level:3,position_id:13},{preference_level:2,position_id:12},{preference_level:0,position_id:11}]},{id:15003,comments:"",program:"Phd",department:"Computer Science",previous_uoft_ta_experience:"",yip:2,annotation:"",session_id:1,applicant_id:2005,position_preferences:[{preference_level:2,position_id:10},{preference_level:3,position_id:13},{preference_level:0,position_id:12},{preference_level:1,position_id:11}]},{id:15004,comments:"",program:"UG",department:"Computer Science",previous_uoft_ta_experience:"",yip:2,annotation:"",session_id:1,applicant_id:2006,position_preferences:[{preference_level:3,position_id:10},{preference_level:0,position_id:13},{preference_level:2,position_id:12}]},{id:15005,comments:"",program:"UG",department:"Math",previous_uoft_ta_experience:"",yip:3,annotation:"",session_id:2,applicant_id:2002,position_preferences:[{preference_level:3,position_id:10},{preference_level:3,position_id:13},{preference_level:2,position_id:12},{preference_level:0,position_id:11}]},{id:15006,comments:"",program:"MSc",department:"Computer Science",previous_uoft_ta_experience:"",yip:2,annotation:"",session_id:2,applicant_id:2003,position_preferences:[{preference_level:3,position_id:10},{preference_level:3,position_id:13},{preference_level:2,position_id:12},{preference_level:0,position_id:11}]},{id:15007,comments:"",program:"UG",department:"Computer Science",previous_uoft_ta_experience:"",yip:4,annotation:"",session_id:2,applicant_id:2004,position_preferences:[{preference_level:1,position_id:10},{preference_level:3,position_id:13}]}],users:[{email:"hery.smith@utoronto.ca",utorid:"smithh",roles:["admin","instructor"]},{email:"emily.garcia@utoronto.ca",utorid:"garciae",roles:["instructor"]},{email:"megan.miller@utoronto.ca",utorid:"millerm",roles:["instructor"]},{email:"lizzy.beera@utoronto.ca",utorid:"beeral",roles:["instructor"]}],active_user:"smithh"},m=n(64),f=n(32),h=n(19),_=n(20),v=n(3),g=n(7),b=n(23);function y(){for(var e=0,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];for(var r=0,i=n;r<i.length;r++){var o=i[r];e+=+o}return e}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id",n=e.map((function(e){return+e[t]})).filter((function(e){return null!=e})),a=Math.max.apply(Math,[0].concat(Object(b.a)(n)));return isNaN(a)?"id-"+Math.round(1e4*Math.random()):a+1}function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id";return t.find((function(t){return t[n]==e[n]}))}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id";return e=e.map((function(e){return""+e})),t.filter((function(t){return e.includes(""+t[n])}))}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.splice(t.indexOf(e),1)}function j(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{id:{required:!0,unique:!0}},a=0,r=Object.entries(n);a<r.length;a++){var i=Object(g.a)(r[a],2),o=i[0],s=i[1];if(s.required&&(null==e[o]||""===e[o]))return"Property ".concat(o," cannot be empty");if(s.unique&&E(e,t,o))return"Duplicate entry exists for property ".concat(o," with value ").concat(e[o])}return!1}var C=function(){function e(t,n){Object(s.a)(this,e),this.data=t,this.ownData=n}return Object(c.a)(e,[{key:"findAll",value:function(){return Object(b.a)(this.ownData)}},{key:"find",value:function(e){return this.rawFind(e)}},{key:"rawFind",value:function(e){return null==e?null:null!=e.id?E(e,this.ownData):null!=e.utorid?E({utorid:e},this.ownData):E({id:e},this.ownData)}},{key:"delete",value:function(e){if(!(e=this.rawFind(e)))throw new Error("Cannot delete object ".concat(JSON.stringify(e)));return S(e,this.ownData),e}},{key:"unusedId",value:function(){if(!this.ownData)throw new Error("Cannot get unused ID when `ownData` hasn't been set");return w(this.ownData)}},{key:"create",value:function(e){var t=w(this.ownData),n=Object(v.a)(Object(v.a)({},e),{},{id:t});return this.ownData.push(n),n}},{key:"validateNew",value:function(e){throw new Error("Subclasses must implement `validateNew()`")}},{key:"validateProp",value:function(e,t,n){return!0}},{key:"updateIfFound",value:function(e){var t=this.rawFind(e);if(!t)return null;for(var n in e)null!=n&&(this.validateProp(n,e[n],e.id),t[n]=e[n]);return t}},{key:"upsert",value:function(e){return this.rawFind(e)?this.updateIfFound(e):(this.validateNew(e),this.create(e))}}]),e}();function A(e){return null==e||0===e.length?"":1===e.length?e[0]:2===e.length?"".concat(e[0]," and ").concat(e[1]):((e=Object(b.a)(e))[e.length-1]="and "+e[e.length-1],e.join(", "))}function T(e){return e?A(e.map((function(e){return"".concat(e.first_name," ").concat(e.last_name," <").concat(e.email,">")}))):[]}function k(e){var t,n={},a=Object(o.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value,i=r.rate,s=r.start_date,c=r.end_date,u=r.hours;s=new Date(s),c=new Date(c),n[i]=n[i]||{hours:0,rate:i};var l=n[i];l.hours+=u,l.start_date=l.start_date||s,l.start_date=Math.min(l.start_date,s),l.end_date=l.end_date||c,l.end_date=Math.max(l.end_date,c)}}catch(d){a.e(d)}finally{a.f()}return A(Object.values(n).map((function(e){var t=e.hours,n=e.rate,a=e.start_date,r=e.end_date;return a=new Date(a),r=new Date(r),"".concat(t," hours at $").concat(n,"/hour from ").concat(a.toLocaleDateString("EN-ca",{month:"long",day:"numeric",year:"numeric"})," to ").concat(r.toLocaleDateString("EN-ca",{month:"long",day:"numeric",year:"numeric"}))})))}function x(e){var t=e.role,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"admin";if(t!==n)throw new Error("Invalid route for user with role '".concat(t,"'"))}for(var N="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),D=new Uint8Array(256),I=0;I<256;++I)D[I]=255;function P(e){var t,n="",a=e.length;for(t=2;t<a;t+=3)n+=N[e[t-2]>>2],n+=N[(3&e[t-2])<<4|e[t-1]>>4],n+=N[(15&e[t-1])<<2|e[t]>>6],n+=N[63&e[t]];return t===a+1&&(n+=N[e[t-2]>>2],n+=N[(3&e[t-2])<<4],n+="=="),t===a&&(n+=N[e[t-2]>>2],n+=N[(3&e[t-2])<<4|e[t-1]>>4],n+=N[(15&e[t-1])<<2],n+="="),n}N.forEach((function(e,t){D[e.charCodeAt(0)]=t})),D["=".charCodeAt(0)]=0;var F=n(5),U=function(e){Object(h.a)(n,e);var t=Object(_.a)(n);function n(e){return Object(s.a)(this,n),t.call(this,e,e.sessions)}return Object(c.a)(n,[{key:"create",value:function(e){var t=Object(m.a)(Object(f.a)(n.prototype),"create",this).call(this,e);return this.data.assignments_by_session[t.id]=[],t}},{key:"findAll",value:function(){for(var e,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return(e=Object(m.a)(Object(f.a)(n.prototype),"findAll",this)).call.apply(e,[this].concat(a))}},{key:"validateNew",value:function(e){var t=j(e,this.ownData,{name:{required:!0,unique:!0}});if(t)throw new Error(t)}},{key:"validateProp",value:function(e,t,n){if("name"===e){if(void 0===t||0===t.length)throw new Error("Property ".concat(e," cannot be empty or undefined."));var a=j({name:t},this.findAll().filter((function(e){return e.id!==n})),{name:{unique:!0}});if(a)throw new Error(a)}return!0}}]),n}(C),R={get:{"/sessions":Object(F.b)({func:function(e){return new U(e).findAll()},summary:"Get all available sessions",returns:F.d.arrayOf(F.a.session)})},post:{"/sessions":Object(F.b)({func:function(e,t,n){return x(t,"admin"),new U(e).upsert(n)},summary:"Upsert a session",returns:F.a.session,posts:F.a.session}),"/sessions/delete":Object(F.b)({func:function(e,t,n){return x(t,"admin"),new U(e).delete(n)},summary:"Delete a session",posts:F.a.idOnly,returns:F.a.session})}},H=function(e){Object(h.a)(n,e);var t=Object(_.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).ownData=a.data.contract_templates,a}return Object(c.a)(n,[{key:"validateNew",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=j(e,this.ownData,{template_name:{required:!0},template_file:{required:!0}});if(n)throw new Error(n);if(t){var a=j(e,this.findAllBySession(t),{template_name:{required:!0,unique:!0}});if(a)throw new Error(a)}}},{key:"getTemplateHtml",value:function(e){if(!((e=new n(this.data).find(e)).template_file in this.data.contract_templates_by_filename))throw new Error("Could not find Html for template ".concat(e.template_file));return this.data.contract_templates_by_filename[e.template_file]}},{key:"findAllBySession",value:function(e){var t=new U(this.data).find(e);return O(this.data.contract_templates_by_session[t.id]||[],this.ownData)}},{key:"upsertBySession",value:function(e,t){var n=new U(this.data).find(t);this.find(e)||this.validateNew(e,n);var a=this.upsert(e);return this.data.contract_templates_by_session[n.id]=this.data.contract_templates_by_session[n.id]||[],this.data.contract_templates_by_session[n.id].push(a.id),a}}]),n}(C),q={get:{"/available_contract_templates":Object(F.b)({func:function(e){return Object(b.a)(e.available_contract_templates)},summary:"Get all available contract templates (these are literal files on the server).",returns:F.d.arrayOf(F.a.contractTemplateMinimal)}),"/sessions/:session_id/contract_templates":Object(F.b)({func:function(e,t){return new H(e).findAllBySession(t.session_id)},summary:"Get contract templates associated with this session.",returns:F.d.arrayOf(F.a.contractTemplate)}),"/contract_templates/:template_id/view":Object(F.b)({func:function(e,t){return new H(e).getTemplateHtml(t.template_id)},summary:"Get a preview of the contact template (i.e., the actual HTML).",returns:F.d.string}),"/contract_templates/:template_id/download":Object(F.b)({func:function(e,t){var n=t.template_id,a=new H(e),r=a.getTemplateHtml(n),i=(new TextEncoder).encode(r);return{file_name:a.find(n).template_file,mime_type:"text/html",content:P(i)}},summary:"Download the raw HTML template associated with the contract-template. No substitutions are made to this file. The `content` filed is encoded in Base64 and may be a binary file (e.g., a zip file).",returns:F.d.shape({file_name:F.d.string,mime_type:F.d.string,content:F.d.string})})},post:{"/sessions/:session_id/contract_templates":Object(F.b)({func:function(e,t,n){return new H(e).upsertBySession(n,t.session_id)},summary:"Associate a position template with a session; this method upserts",posts:F.a.contractTemplate,returns:F.a.contractTemplate})}},L=function(e){Object(h.a)(n,e);var t=Object(_.a)(n);function n(e){return Object(s.a)(this,n),t.call(this,e,e.users)}return Object(c.a)(n,[{key:"validateNew",value:function(e){var t=j(e,this.ownData,{utorid:{required:!0,unique:!0}});if(t)throw new Error(t)}},{key:"rawFind",value:function(e){return null==e?null:null!=e.id?E(e,this.ownData):null!=e.utorid?E(e,this.ownData,"utorid"):E({utorid:e},this.ownData,"utorid")}},{key:"setActiveUser",value:function(e){var t=this.find(e);if(!t)throw new Error("Cannot find user ".concat(JSON.stringify(e)," to set as active"));this.data.active_user=t.utorid}},{key:"getActiveUser",value:function(){return this.find(this.data.active_user)}}]),n}(C),B={get:{"/users":Object(F.b)({func:function(e){return new L(e).findAll()},summary:"Get all available users.",returns:F.d.arrayOf(F.a.user)}),"/active_user":Object(F.b)({func:function(e){return new L(e).getActiveUser()},summary:"Gets the currently active user.",returns:F.d.arrayOf(F.a.user),roles:["instructor","ta"]})},post:{"/users":Object(F.b)({func:function(e,t,n){return new L(e).upsert(n)},summary:"Upserts user info",returns:F.d.arrayOf(F.a.user),posts:F.a.user})}},M=function(e){Object(h.a)(n,e);var t=Object(_.a)(n);function n(e){return Object(s.a)(this,n),t.call(this,e,e.instructors)}return Object(c.a)(n,[{key:"validateNew",value:function(e){var t=j(e,this.ownData,{utorid:{required:!0,unique:!0},first_name:{required:!0},last_name:{required:!0}});if(t)throw new Error(t)}},{key:"delete",value:function(e){var t=this.find(e);if(!t)throw new Error("Cannot find instructor matching ".concat(JSON.stringify(e)));Object(m.a)(Object(f.a)(n.prototype),"delete",this).call(this,t);var a,r=Object(o.a)(this.data.positions);try{for(r.s();!(a=r.n()).done;){var i=a.value;(i.instructor_ids||[]).includes(t.id)&&S(t.id,i.instructor_ids)}}catch(s){r.e(s)}finally{r.f()}return t}},{key:"getFromActiveUser",value:function(){var e=new L(this.data).getActiveUser();return new n(this.data).findAll().find((function(t){return t.utorid===e.utorid}))}}]),n}(C),G={get:{"/instructors":Object(F.b)({func:function(e,t){if("admin"===t.role)return new M(e).findAll();if("instructor"===t.role){var n=new M(e).getFromActiveUser();if(!n)return[];var a,r=new Z(e).getForInstructor(n),i=new Set,s=Object(o.a)(r);try{for(s.s();!(a=s.n()).done;){var c,u=a.value,l=Object(o.a)(u.instructor_ids);try{for(l.s();!(c=l.n()).done;){var d=c.value;i.add(d)}}catch(p){l.e(p)}finally{l.f()}}}catch(p){s.e(p)}finally{s.f()}return new M(e).findAll().filter((function(e){return i.has(e.id)}))}x(t,"")},summary:"Get a list of all instructors",returns:F.d.arrayOf(F.a.instructor)})},post:{"/instructors":Object(F.b)({func:function(e,t,n){return x(t,"admin"),new M(e).upsert(n)},summary:"Upsert an instructor",posts:F.a.instructor,returns:F.a.instructor}),"/instructors/delete":Object(F.b)({func:function(e,t,n){return x(t,"admin"),new M(e).delete(n)},summary:"Delete an instructor (removes from all positions)",posts:F.a.idOnly,returns:F.a.instructor})}},Z=function(e){Object(h.a)(n,e);var t=Object(_.a)(n);function n(e){return Object(s.a)(this,n),t.call(this,e,e.positions)}return Object(c.a)(n,[{key:"validateNew",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t){var n=j(e,this.findAllBySession(t),{position_code:{required:!0,unique:!0}});if(n)throw new Error(n)}}},{key:"find",value:function(e){for(var t=this.rawFind(e),n=null,a=0,r=Object.entries(this.data.positions_by_session);a<r.length;a++){var i=Object(g.a)(r[a],2),o=i[0];if(i[1].includes(t.id)){n=o;break}}return Object(v.a)(Object(v.a)({},t),{},{session_id:n})}},{key:"getSession",value:function(e){return new U(this.data).find({id:e.session_id})}},{key:"getContractTemplate",value:function(e){return new H(this.data).find({id:e.contract_template_id})}},{key:"getInstructors",value:function(e){var t=this;return e.instructor_ids?e.instructor_ids.map((function(e){return new M(t.data).find({id:e})})):[]}},{key:"getForInstructor",value:function(e){if(!(e=new M(this.data).find(e)))throw new Error("Cannot find a matching instructor");return this.findAll().filter((function(t){return(t.instructor_ids||[]).includes(e.id)}))}},{key:"delete",value:function(e){var t=this.rawFind(e);if(!t)throw new Error("Cannot find position matching ".concat(JSON.stringify(e)));Object(m.a)(Object(f.a)(n.prototype),"delete",this).call(this,t);for(var a=0,r=Object.values(this.data.positions_by_session);a<r.length;a++){var i=r[a];i.includes(t.id)&&S(t.id,i)}return t}},{key:"findAllBySession",value:function(e){var t=new U(this.data).find(e);return O(this.data.positions_by_session[t.id]||[],this.ownData)}},{key:"upsertBySession",value:function(e,t){var n=new U(this.data).rawFind(t);this.rawFind(e)||(this.validateNew(e,n),e.start_date=void 0===e.start_date?n.start_date:e.start_date,e.end_date=void 0===e.end_date?n.end_date:e.end_date);var a=this.upsert(e);return this.data.positions_by_session[n.id]=this.data.positions_by_session[n.id]||[],this.data.positions_by_session[n.id].push(a.id),a}},{key:"findAssociatedSession",value:function(e){var t=this,n=this.find(e);if(!n)throw new Error("Could not associated session because there is no position matching ".concat(JSON.stringify(e)));var a=Object.keys(this.data.positions_by_session).find((function(e){return t.data.positions_by_session[e].includes(n.id)}));return null!=a?+a:a}}]),n}(C),W={get:{"/sessions/:session_id/positions":Object(F.b)({func:function(e,t){if("admin"===t.role)return new Z(e).findAllBySession(t.session_id);if("instructor"===t.role){var n=new M(e).getFromActiveUser();return n?new Z(e).findAllBySession(t.session_id).filter((function(e){return e.instructor_ids.includes(n.id)})):[]}x(t,"")},summary:"Get positions associated with this session.",returns:F.d.arrayOf(F.a.position)})},post:{"/sessions/:session_id/positions":Object(F.b)({func:function(e,t,n){return new Z(e).upsertBySession(n,t.session_id)},summary:"Upsert a position associated with a session. If a new position is created, it will be automatically associated with the given session",posts:F.a.position,returns:F.a.position}),"/positions":Object(F.b)({func:function(e,t,n){x(t,"admin");var a=E(n,e.positions);if(a)return Object.assign(a,n);throw new Error("Cannot find position with id=".concat(n.id))},summary:"Update a position",posts:F.a.position,returns:F.a.position}),"/positions/delete":Object(F.b)({func:function(e,t,n){return x(t,"admin"),new Z(e).delete(n)},summary:"Delete a position",posts:F.a.idOnly,returns:F.a.session})}},Y=function(e){Object(h.a)(n,e);var t=Object(_.a)(n);function n(e){return Object(s.a)(this,n),t.call(this,e,e.wage_chunks)}return Object(c.a)(n,[{key:"validateNew",value:function(){}},{key:"findAllByAssignment",value:function(e){var t=this,n=new X(this.data).rawFind(e);if(!n)throw new Error("Could not find assignment matching ".concat(JSON.stringify(e)));return O([n.id],this.ownData,"assignment_id").map((function(e){return t.find(e)}))}},{key:"find",value:function(e){var t=this.rawFind(e),n=Object(v.a)({},t);if(null==n.rate){var a=this.getSession(e);if(null==a.rate2)n.rate=a.rate1;else{var r=new Date(e.start_date),i=new Date(e.end_date),o=new Date(a.start_date),s=new Date(o.getFullYear(),11,31);n.rate=r<=s&&i<=s?a.rate1:a.rate2}}return n}},{key:"getSession",value:function(e){var t=this.rawFind(e),n=new X(this.data).rawFind({id:t.assignment_id}),a=new X(this.data).getPosition(n);return new Z(this.data).getSession(a)}},{key:"upsertByAssignment",value:function(e,t){var n=new X(this.data).rawFind(t);if(!n)throw new Error("Could not find assignment matching ".concat(JSON.stringify(t)));return this.upsert(Object(v.a)(Object(v.a)({},e),{},{assignment_id:n.id}))}},{key:"setAllByAssignment",value:function(e,t){var n=this,a=new X(this.data).rawFind(t);if(!a)throw new Error("Could not find assignment matching ".concat(JSON.stringify(t)));var r=this.findAllByAssignment(t);e.forEach((function(e){return n.upsertByAssignment(e,a)}));var i,s=Object(o.a)(r);try{for(s.s();!(i=s.n()).done;){var c=i.value;E(c,e)||this.delete(c)}}catch(u){s.e(u)}finally{s.f()}return this.findAllByAssignment(a)}}]),n}(C),J={get:{},post:{"/wage_chunks":Object(F.b)({func:function(e,t,n){return new Y(e).upsert(n)},posts:F.a.wageChunk,summary:"Upsert a wage_chunk",returns:F.a.wageChunk}),"/wage_chunks/delete":Object(F.b)({func:function(e,t,n){return new Y(e).delete(n)},posts:F.a.wageChunk,summary:"Delete a wage_chunk. Must have a valid id specified.",returns:F.a.wageChunk})}},K=function(e){Object(h.a)(n,e);var t=Object(_.a)(n);function n(e){return Object(s.a)(this,n),t.call(this,e,e.applications)}return Object(c.a)(n,[{key:"validateNew",value:function(e){var t=j(e,this.ownData,{session_id:{required:!0},applicant_id:{required:!0}});if(t)throw new Error(t)}},{key:"findAllBySession",value:function(e){var t=new U(this.data).find(e);if(!t)throw new Error("Cannot find applicant by session because session ".concat(JSON.stringify(e)," cannot be found"));return O([t.id],this.ownData,"session_id")}}]),n}(C),z={get:{"/sessions/:session_id/applications":Object(F.b)({func:function(e,t){return new K(e).findAllBySession(t.session_id)},summary:"Get all applications associated with the given session",returns:F.d.arrayOf(F.a.application)})},post:{"/applications":Object(F.b)({func:function(e,t,n){return new K(e).upsert(n)},summary:"Upsert an application",posts:F.a.application,returns:F.a.application})}},V=n(170),Q=function(e){Object(h.a)(n,e);var t=Object(_.a)(n);function n(e){return Object(s.a)(this,n),t.call(this,e,e.applicants)}return Object(c.a)(n,[{key:"validateNew",value:function(e){var t=j(e,this.ownData,{utorid:{required:!0,unique:!0},first_name:{required:!0},last_name:{required:!0}});if(t)throw new Error(t)}},{key:"findAllBySession",value:function(e){var t=new U(this.data).find(e);if(!t)throw new Error("Cannot find applicant by session because session ".concat(JSON.stringify(e)," cannot be found"));var n=new K(this.data).findAllBySession(t),a=new X(this.data).findAllBySession(t);return O(Array.from(new Set(n.map((function(e){return e.applicant_id})).concat(a.map((function(e){return e.applicant_id}))))),this.ownData)}}]),n}(C),$={get:{"/sessions/:session_id/applicants":Object(F.b)({func:function(e,t){if("admin"===t.role)return new Q(e).findAllBySession(t.session_id);if("instructor"===t.role){var n=new M(e).getFromActiveUser();if(!n)return[];var a=new X(e).findAllBySessionAndInstructor(t.session_id,n).map((function(e){return e.applicant_id}));return new Q(e).findAll().filter((function(e){return a.includes(e.id)}))}x(t,"")},summary:"Get all applicants associated with the given session",returns:F.d.arrayOf(F.a.applicant)}),"/applicants":Object(F.b)({func:function(e){return new Q(e).findAll()},summary:"Get all applicants",returns:F.d.arrayOf(F.a.applicant)}),"/applicants/:applicant_id":Object(F.b)({func:function(e,t){return new Q(e).find(t.applicant_id)},summary:"Get an applicant",returns:F.d.arrayOf(F.a.applicant)})},post:{"/applicants":Object(F.b)({func:function(e,t,n){return x(t,"admin"),new Q(e).upsert(n)},summary:"Upsert an applicant",posts:F.a.applicant,returns:F.a.applicant}),"/sessions/:session_id/applicants":Object(F.b)({func:function(e,t,n){x(t,"admin");var a=new Q(e).findAll().find((function(e){return e.id===n.id||e.utorid===n.utorid}))||{},r=new Q(e).upsert(Object(v.a)(Object(v.a)({},a),function(e){var t={};for(var n in e)null!=e[n]&&(t[n]=e[n]);return t}(n)));return new K(e).findAllBySession(t.session_id).find((function(e){return e.applicant_id===r.id}))||new K(e).upsert({session_id:Object(V.b)(t.session_id),applicant_id:r.id,comment:"<Autogenerated>"}),r},summary:"Upsert an applicant. If they have no application associated with the current session, an application is created.",posts:F.a.applicant,returns:F.a.applicant})}},X=function(e){Object(h.a)(n,e);var t=Object(_.a)(n);function n(e){return Object(s.a)(this,n),t.call(this,e,e.assignments)}return Object(c.a)(n,[{key:"validateNew",value:function(e){var t=j(e,[],{position_id:{required:!0},applicant_id:{required:!0}});if(t)throw new Error(t)}},{key:"findAllBySession",value:function(e){var t=this,a=new U(this.data).rawFind(e);return O(this.data.assignments_by_session[a.id]||[],this.ownData).map((function(e){return new n(t.data).find(e)}))}},{key:"getPosition",value:function(e){return new Z(this.data).find({id:e.position_id})}},{key:"getApplicant",value:function(e){return new Q(this.data).find({id:e.applicant_id})}},{key:"getWageChunkInfo",value:function(e){var t=new Y(this.data).findAllByAssignment(e);return{hours:y.apply(void 0,Object(b.a)(t.map((function(e){return e.hours})))),wageChunks:t}}},{key:"getActiveOffer",value:function(e){return new ee(this.data).findByAssignment(e)}},{key:"find",value:function(e){var t=this.rawFind(e);if(!t)return t;var n=Object(v.a)({},t),a=this.getWageChunkInfo(t).hours;Object.assign(n,{hours:a});var r=this.getActiveOffer(t);return r&&Object.assign(n,{active_offer_status:r.status}),n}},{key:"upsert",value:function(e){var t=this.find(Object(m.a)(Object(f.a)(n.prototype),"upsert",this).call(this,e)),a=new Z(this.data).findAssociatedSession(t.position_id);if(a&&this.data.assignments_by_session[a].push(t.id),null==e.hours||+t.hours===+e.hours)return t;var r=new Y(this.data).findAllByAssignment(t);if(0===r.length){var i,s=function(e,t){e=new Date(e),t=new Date(t);var n=new Date(e.getFullYear(),11,31),a=new Date(e.getFullYear(),12,1);return e<=n&&t>n?[{start_date:e.toISOString(),end_date:n.toISOString()},{start_date:a.toISOString(),end_date:t.toISOString()}]:[{start_date:e.toISOString(),end_date:t.toISOString()}]}(t.start_date,t.end_date),c=Object(o.a)(s);try{for(c.s();!(i=c.n()).done;){var u=i.value;new Y(this.data).upsertByAssignment({hours:0,start_date:u.start_date,end_date:u.end_date},t)}}catch(_){c.e(_)}finally{c.f()}}r=new Y(this.data).findAllByAssignment(t);var l,d=(+e.hours-+(this.find(t).hours||0))/r.length,p=Object(o.a)(r);try{for(p.s();!(l=p.n()).done;){var h=l.value;new Y(this.data).upsert(Object(v.a)(Object(v.a)({},h),{},{hours:(h.hours||0)+d}))}}catch(_){p.e(_)}finally{p.f()}return this.find(t)}},{key:"findAllBySessionAndInstructor",value:function(e,t){e=new U(this.data).find(e),t=new M(this.data).find(t);var n=new Z(this.data).getForInstructor(t),a=this.findAllBySession(e),r=n.map((function(e){return e.id}));return a.filter((function(e){return r.includes(e.position_id)}))}}]),n}(C),ee=function(e){Object(h.a)(n,e);var t=Object(_.a)(n);function n(e){return Object(s.a)(this,n),t.call(this,e,e.offers)}return Object(c.a)(n,[{key:"findByAssignment",value:function(e){var t=O([this._ensureAssignment(e).id],this.data.offers,"assignment_id"),n=t[t.length-1];return n&&("accepted"===n.status||"rejected"===n.status||"pending"===n.status||"provisional"===n.status)?n:null}},{key:"_ensureAssignment",value:function(e){var t=new X(this.data).rawFind(e);if(!t)throw new Error("Could not find assignment matching ".concat(JSON.stringify(e)));return t}},{key:"getAssignment",value:function(e){return new X(this.data).find({id:e.assignment_id})}},{key:"find",value:function(e){var t=this.rawFind(e),n=this.getAssignment(t),a=new X(this.data).getWageChunkInfo(n),r=a.hours,i=a.wageChunks,o=new X(this.data).getPosition(n),s=new X(this.data).getApplicant(n),c=new Z(this.data).getInstructors(o),u=new Z(this.data).getContractTemplate(o),l=function(e){var t=e.map((function(e){return e.start_date})),n=e.map((function(e){return e.end_date}));return t.sort(),n.sort(),{start_date:t[0],end_date:n[n.length-1]}}(i),d=l.start_date,p=l.end_date;return Object(v.a)(Object(v.a)({accepted_date:null,rejected_date:null,withdrawn_date:null,signature:"",nag_count:0},t),{},{contract_template:u.template_file,contract_override_pdf:n.contract_override_pdf,first_name:s.first_name,last_name:s.last_name,email:s.email,position_code:o.position_code,position_title:o.position_title,position_start_date:d,position_end_date:p,first_time_ta:null,instructor_contact_desc:T(c),pay_period_desc:k(i),hours:r,ta_coordinator_name:"Dr. Coordinator",ta_coordinator_email:"coordinator@utoronto.ca"})}},{key:"withdrawByAssignment",value:function(e){var t=this.findByAssignment(this._ensureAssignment(e));return this.find(this.upsert(Object(v.a)(Object(v.a)({},t),{},{status:"withdrawn",withdrawn_date:(new Date).toISOString()})))}},{key:"rejectByAssignment",value:function(e){var t=this.findByAssignment(this._ensureAssignment(e));return this.find(this.upsert(Object(v.a)(Object(v.a)({},t),{},{status:"rejected",rejected_date:(new Date).toISOString()})))}},{key:"acceptByAssignment",value:function(e){var t=this.findByAssignment(this._ensureAssignment(e));return this.find(this.upsert(Object(v.a)(Object(v.a)({},t),{},{status:"accepted",accepted_date:(new Date).toISOString()})))}},{key:"emailByAssignment",value:function(e){var t=this.findByAssignment(this._ensureAssignment(e));return this.find(this.upsert(Object(v.a)(Object(v.a)({},t),{},{status:"pending",emailed_date:(new Date).toISOString()})))}},{key:"nagByAssignment",value:function(e){var t=this.findByAssignment(this._ensureAssignment(e));if(!t.emailed_date)throw new Error("The active offer for assignment with id=".concat(e.id," has not been emailed yet, so a nag email cannot be sent"));return this.find(this.upsert(Object(v.a)(Object(v.a)({},t),{},{nag_count:(t.nag_count||0)+1})))}},{key:"createByAssignment",value:function(e){var t=this._ensureAssignment(e);if(this.findByAssignment(t))throw new Error("An offer already exists for assignment=".concat(JSON.stringify(e)));return this.upsert(this.find(this.create({assignment_id:t.id,status:"provisional"})))}}]),n}(C),te={get:{"/sessions/:session_id/assignments":Object(F.b)({func:function(e,t){if("admin"===t.role)return new X(e).findAllBySession(t.session_id);if("instructor"===t.role){var n=new M(e).getFromActiveUser();return n?new X(e).findAllBySessionAndInstructor(t.session_id,n):[]}x(t,"")},summary:"Get assignments associated with a session",returns:F.d.arrayOf(F.a.assignment)}),"/assignments/:assignment_id":Object(F.b)({func:function(e,t){return new X(e).find(t.assignment_id)},summary:"Get an assignment",returns:F.a.assignment}),"/assignments/:assignment_id/active_offer":Object(F.b)({func:function(e,t){return new X(e).getActiveOffer(t.assignment_id)},summary:"Get the active offer associated with an assignment",returns:F.a.offer}),"/assignments/:assignment_id/wage_chunks":Object(F.b)({func:function(e,t){return new X(e).getWageChunkInfo(t.assignment_id).wageChunks},summary:"Get the wage_chunks associated with an assignment",returns:F.d.arrayOf(F.a.wageChunk)})},post:{"/assignments":Object(F.b)({func:function(e,t,n){return x(t,"admin"),new X(e).upsert(n)},posts:F.a.assignment,summary:"Upsert an assignment",returns:F.a.assignment}),"/assignments/:assignment_id/wage_chunks":Object(F.b)({func:function(e,t,n){return x(t,"admin"),new Y(e).setAllByAssignment(n,t.assignment_id)},summary:"Sets the wage chunks of an assignment to the specified list. The contents of the list are upserted. Omitted wage chunks are deleted.",posts:F.d.arrayOf(F.a.wageChunk),returns:F.d.arrayOf(F.a.wageChunk)}),"/assignments/:assignment_id/active_offer/withdraw":Object(F.b)({func:function(e,t){return x(t,"admin"),new ee(e).withdrawByAssignment(t.assignment_id)},summary:"Withdraws the active offer for the specified assignment",returns:F.a.offer}),"/assignments/:assignment_id/active_offer/reject":Object(F.b)({func:function(e,t){return x(t,"admin"),new ee(e).rejectByAssignment(t.assignment_id)},summary:"Rejects the active offer for the specified assignment",returns:F.a.offer}),"/assignments/:assignment_id/active_offer/accept":Object(F.b)({func:function(e,t){return x(t,"admin"),new ee(e).acceptByAssignment(t.assignment_id)},summary:"Accepts the active offer for the specified assignment",returns:F.a.offer}),"/assignments/:assignment_id/active_offer/create":Object(F.b)({func:function(e,t){return x(t,"admin"),new ee(e).createByAssignment(t.assignment_id)},summary:"Creates an offer for the specified assignment, provided there are no active offers for this assignment.",returns:F.a.offer}),"/assignments/:assignment_id/active_offer/email":Object(F.b)({func:function(e,t){return x(t,"admin"),new ee(e).emailByAssignment(t.assignment_id)},summary:"Emails the active offer for the specified assignment",returns:F.a.offer}),"/assignments/:assignment_id/active_offer/nag":Object(F.b)({func:function(e,t){return x(t,"admin"),new ee(e).nagByAssignment(t.assignment_id)},summary:"Sends a nag email for the active offer for the specified assignment which has already been emailed once",returns:F.a.offer})}},ne={},ae=function(){function e(t){Object(s.a)(this,e),this.data=t}return Object(c.a)(e,[{key:"getAllData",value:function(){return this.data}},{key:"makeSnapshot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"snapshot";return ne[e]=JSON.stringify(this.getAllData()),this.getAllData()}},{key:"clearData",value:function(){var e=this;return this.makeSnapshot("beforeclear"),Object.keys(this.data).forEach((function(t){var n;"available_contract_templates"!==t&&"contract_templates_by_filename"!==t&&(e.data[t]="object"===typeof(n=e.data[t])?n instanceof Array?[]:{}:"string"===typeof n?"":n.constructor())})),this.getAllData()}},{key:"restoreSnapshot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"snapshot",t=JSON.parse(ne[e]||"{}");return this.clearData(),Object.assign(this.data,t),this.getAllData()}}]),e}(),re={get:{"/debug/active_user":Object(F.b)({func:function(e){return new L(e).getActiveUser()},summary:"Gets the active user; in debug mode this is specified by posting to `active_user`.",returns:F.a.user}),"/debug/users":Object(F.b)({func:function(e){return new L(e).findAll()},summary:"Get a list of all users",returns:F.d.arrayOf(F.a.user)})},post:{"/debug/active_user":Object(F.b)({func:function(e,t,n){var a=new L(e),r=a.find(n);if(!r)throw new Error("Could not find user matching ".concat(JSON.stringify(n)));return a.setActiveUser(r),a.getActiveUser()},summary:"Sets the active user; this will override whatever credentials are passed to the server.",returns:F.d.arrayOf(F.a.user),posts:F.a.user}),"/debug/users":Object(F.b)({func:function(e,t,n){return new L(e).upsert(n)},summary:"Adds a user; this is done without any permission checks, so it can be used to bootstrap permissions during debug.",returns:F.d.arrayOf(F.a.user),posts:F.a.user}),"/debug/clear_data":Object(F.b)({func:function(e){return new ae(e).clearData()},summary:"Deletes all data in the database"}),"/debug/snapshot":Object(F.b)({func:function(e){return new ae(e).makeSnapshot()},summary:"Makes a snapshot of the current state of the database"}),"/debug/restore_snapshot":Object(F.b)({func:function(e){return new ae(e).restoreSnapshot()},summary:"Restores the last snapshot of the database"})}};n.d(t,"MockAPI",(function(){return ie})),n.d(t,"mockAPI",(function(){return oe})),n.d(t,"mockData",(function(){return p}));var ie=function(){function e(t){var n=this;Object(s.a)(this,e),this.routePrefix="/api/v1",this.getRoutes=Object.assign({},R.get,q.get,W.get,G.get,te.get,$.get,z.get,J.get,re.get,B.get,{"/all_data":Object(F.b)({func:function(e){return e},exclude:!0})}),this.postRoutes=Object.assign({},R.post,q.post,W.post,G.post,te.post,$.post,z.post,J.post,re.post,B.post),this.apiGET=function(e){var t,a=Object(o.a)(n._getRoutesParsers);try{for(a.s();!(t=a.n()).done;){var r=t.value,i=r.match(e);if(i)try{return n.authenticateActiveUserBasedOnRole(i.role),{status:"success",message:"",payload:n.getRoutes[r.spec](n.data,i)}}catch(s){return{status:"error",message:s.toString()}}}}catch(c){a.e(c)}finally{a.f()}return{status:"error",message:"could not find route matching ".concat(e)}},this.apiPOST=function(e,t){var a,r=Object(o.a)(n._postRoutesParsers);try{for(r.s();!(a=r.n()).done;){var i=a.value,s=i.match(e);if(s)try{return n.authenticateActiveUserBasedOnRole(s.role),{status:"success",message:"",payload:n.postRoutes[i.spec](n.data,s,t)}}catch(c){return{status:"error",message:c.toString()}}}}catch(u){r.e(u)}finally{r.f()}return{status:"error",message:"could not find route matching ".concat(e)}},this.active=!1,this.data=t,this._getRoutesParsers=Object.keys(this.getRoutes).map((function(e){var t=new l.a("(/:role)"+e);return t.spec=e,t})),this._postRoutesParsers=Object.keys(this.postRoutes).map((function(e){var t=new l.a("(/:role)"+e);return t.spec=e,t}))}return Object(c.a)(e,[{key:"authenticateActiveUserBasedOnRole",value:function(e){if(null!=e){var t=new L(this.data).getActiveUser();if(null!=t&&!t.roles.includes(e))throw new Error("Not authenticated for accessing routes with prefix /".concat(e))}}},{key:"replaceGlobalFetch",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;this.active||(this.active=!0,this._origFetch=fetch,window.fetch=function(){var n=Object(i.a)(r.a.mark((function n(a){var i,o,s,c,u,l=arguments;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=l.length>1&&void 0!==l[1]?l[1]:{},o=new URL(a,"http://dummy.com"),a=(a=o.pathname).startsWith(e.routePrefix)?a.replace(e.routePrefix,""):a,"GET"===i.method?s=e.apiGET(a):("string"===typeof(c=i.body)&&(c=JSON.parse(c)),s=e.apiPOST(a,c)),console.log("MockAPI ".concat(i.method," Request."),a,i,"Reponding with",s),u=new Response(new Blob([JSON.stringify(s)],{type:"application/json"}),{status:200,statusText:"OK"}),n.abrupt("return",new Promise((function(e){window.setTimeout((function(){return e(u)}),t)})));case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}},{key:"restoreGlobalFetch",value:function(){this.active=!1,window.fetch=this._origFetch||fetch}}]),e}(),oe=new ie(p)},367:function(e,t){},411:function(e,t,n){e.exports=n(913)},420:function(e,t,n){},431:function(e,t){},5:function(e,t,n){"use strict";n.d(t,"d",(function(){return v})),n.d(t,"c",(function(){return S})),n.d(t,"b",(function(){return j})),n.d(t,"a",(function(){return g}));var a=n(3),r=n(22),i=n(12),o=n(7),s=n(23),c=n(15),u=n(17),l=n(1),d=n.n(l),p=n(130),m=n.n(p),f=n(168),h=function(){function e(t,n){Object(c.a)(this,e),this.name=t,this.args=n}return Object(u.a)(e,[{key:"toString",value:function(){return null==this.args?""+this.name:this.name+"("+this.args.join(", ")+")"}}]),e}();function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return e.concat([new h(t,n)])}var v=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a={get:function(t,a,r){if("callChain"===a)return n;if("toJSON"===a)return function(){return n};var i=Reflect.get(t,a,r);return i instanceof Object?e(i,_(n,a)):i},apply:function(t,a,r){var i=n.pop()||{name:"<root>"},o=Reflect.apply(t,a,r);return o instanceof Object?e(o,_(n,i.name,r)):o},ownKeys:function(e){return[].concat(Object(s.a)(Reflect.ownKeys(e)),["callChain","toJSON"])}};return new Proxy(t,a)}(d.a),g=Object(f.a)(v),b={string:"string",number:"number",bool:"boolean",object:"object",array:"array",any:{}};function y(e){var t={};if(e.callChain){var n=Object(o.a)(e.callChain,2),a=n[0],r=[];if(n[1]&&(t.required=!0),a.args)switch(a.name){case"shape":t.type="object",t.properties={};for(var i=0,s=Object.entries(a.args[0]);i<s.length;i++){var c=Object(o.a)(s[i],2),u=c[0],l=y(c[1]);l.required&&(r.push(u),delete l.required),t.properties[u]=l}r.length>0&&(t.required=r);break;case"arrayOf":t.type="array",t.items=y(a.args[0]);break;case"oneOf":t.type="string",t.enum=a.args[0];break;case"oneOfType":t.oneOf=a.args[0].map(y)}else b[a.name]&&(t.type=b[a.name])}else console.warn("Attempting to compute swagger values for non-wrapped object",e);return t}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"object"};return{type:"object",properties:{status:{type:"string",enum:["success","error"]},message:{type:"string"},payload:e},required:["status"]}}function E(e){for(var t=m()(e),n=Object.keys(t.match(t.spec)),a={},r=0,i=n;r<i.length;r++){var o=i[r];a[o]="{"+o+"}"}return{url:decodeURI(t.reverse(a)),templateVars:n}}function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={responses:{default:{}}};if(!e)return n;var a=["admin"].concat(Object(s.a)(e.roles||[]));return n.summary="(prefixes: ".concat(a.map((function(e){return"/"+e})).join(", "),") ")+e.summary,t.length>0&&(n.parameters=t.map((function(e){return{name:e,in:"path",description:e,required:!0}}))),e.returns&&(n.responses.default={content:{"application/json":{schema:w(y(e.returns))}}}),e.posts&&(n.requestBody={content:{"application/json":{schema:y(e.posts)}}}),n}function S(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getRoutes,n=void 0===t?{}:t,a=e.postRoutes,r=void 0===a?{}:a,s={},c=0,u=Object.entries(n);c<u.length;c++){var l=Object(o.a)(u[c],2),d=l[0],p=l[1],m=E(d),f=m.url,h=m.templateVars;p.docs&&p.docs.exclude||(s[f]=Object.assign(s[f]||{},{get:O(p.docs,h)}))}for(var _=0,v=Object.entries(r);_<v.length;_++){var g=Object(o.a)(v[_],2),b=g[0],y=g[1],w=E(b),S=w.url,j=w.templateVars;y.docs&&y.docs.exclude||(s[S]=Object.assign(s[S]||{},{post:O(y.docs,j)}))}for(var C=Array.from(new Set(Object.keys(s).map((function(e){return e.split("/")[1]})).filter((function(e){return e})))),A=function(){var e=Object(o.a)(k[T],2),t=e[0],n=e[1],a=C.filter((function(e){return t.includes(e)}));n.get&&a.length>0&&(n.get.tags=a),n.post&&a.length>0&&(n.post.tags=a)},T=0,k=Object.entries(s);T<k.length;T++)A();var x,N={},D=Object(i.a)(Object.keys(s).sort());try{for(D.s();!(x=D.n()).done;){var I=x.value;N[I]=s[I]}}catch(P){D.e(P)}finally{D.f()}return N}function j(e){var t=e.func,n=e.exclude,i=void 0!==n&&n,o=Object(r.a)(e,["func","exclude"]),s=function(){return t.apply(void 0,arguments)};return s.docs=Object(a.a)({exclude:i},o),s}},832:function(e,t){},834:function(e,t){},843:function(e,t,n){},844:function(e,t,n){},846:function(e,t){},847:function(e,t){},908:function(e,t,n){},910:function(e,t,n){},913:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(24),o=n.n(i),s=n(10),c=n(93),u=n(391),l=n(3),d=n(75),p=(n(420),n(929)),m=n(930),f=n(919),h=n(394),_=n(2),v=n.n(_),g=n(9),b=n(1),y=n.n(b),w=n(25),E=n(65),O=n.n(E),S={position:"tr",autoDismiss:10,title:"Error"},j=function(e){return Object(E.error)(Object(l.a)(Object(l.a)({},S),{},{title:"Error fetching data",message:e}))},C=function(e){return Object(E.error)(Object(l.a)(Object(l.a)({},S),{},{title:"Error updating/inserting data",message:e}))},A=function(e){return Object(E.error)(Object(l.a)(Object(l.a)({},S),{},{title:"Error deleting data",message:e}))},T=function(e){return Object(E.error)(Object(l.a)(Object(l.a)({},S),{},{title:"API Error",message:e}))},k=n(7),x=n(12),N=n(392),D=n.n(N),I=function(e,t){return{type:"API_INTERACTION_START",payload:{id:e,message:t}}},P=function(e){return{type:"API_INTERACTION_END",payload:{id:e}}};function F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id";if(!Array.isArray(e))return e;var n,a={},r=Object(x.a)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;a[i[t]]=i}}catch(o){r.e(o)}finally{r.f()}return a}function U(e){return function(t){return{type:e,payload:t}}}function R(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a={},r={},i=Object(x.a)(n);try{for(i.s();!(t=i.n()).done;){var o=t.value;Object.hasOwnProperty.call(e,o)&&(r[o]=e[o])}}catch(c){i.e(c)}finally{i.f()}for(var s in e)Object.hasOwnProperty.call(r,s)||(a[s]=e[s]);return[a,r]}function H(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(a){if(null==a[e])return a;var r=R(a,[e]),i=Object(k.a)(r,2),o=i[0],s=i[1];return o[t]=n?s[e].map((function(e){return e.id})):s[e].id,o}}function q(e){var t=e.dispatcher,n=e.propTypes,a=e.name,r=e.description,i=e.onErrorDispatch;return function(){for(var e=arguments.length,o=new Array(e),s=0;s<e;s++)o[s]=arguments[s];return function(){var e=Object(g.a)(v.a.mark((function e(s){var c,u,l,d;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=function(e,t){y.a.checkPropTypes(e,t||{},"api action argument",a,(function(){c=!0}))},c=!1,Array.isArray(n))if(n.length!==o.length)c=!0;else for(l=0;l<n.length;l++)u(n[l],o[l]);else n&&u(n,o[0]);if(!c){e.next=6;break}return s(T("Invalid arguments to ".concat(a,' while attempting action "').concat(r,'"'))),e.abrupt("return");case 6:return d=D()(),s(I(d,r)),e.prev=8,e.next=11,s(t.apply(void 0,o));case 11:return e.abrupt("return",e.sent);case 14:if(e.prev=14,e.t0=e.catch(8),console.warn("API Error",e.t0),!i){e.next=21;break}s(i instanceof Function?i(e.t0):T('Error encountered during "'.concat(r,'"'))),e.next=22;break;case 21:throw e.t0;case 22:return e.prev=22,s(P(d)),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[8,14,22,25]])})));return function(t){return e.apply(this,arguments)}}()}}var L=n(15),B=n(129),M=n(19),G=n(20),Z=n(408),W={credentials:"same-origin",headers:{"Content-Type":"application/json"}},Y=function(e){Object(M.a)(n,e);var t=Object(G.a)(n);function n(e){var a;Object(L.a)(this,n);var r=e.message;return a=t.call(this,r),Error.captureStackTrace&&Error.captureStackTrace(Object(B.a)(a),J),a.response=e,a.status=e.status,a}return n}(Object(Z.a)(Error)),J=function(e){Object(M.a)(n,e);var t=Object(G.a)(n);function n(e,a){var r;Object(L.a)(this,n);var i="Got status ".concat(e.status," ").concat(e.statusText," when fetching ").concat("/api/v1"+a);return r=t.call(this,{message:i}),Error.captureStackTrace&&Error.captureStackTrace(Object(B.a)(r),n),r.response=e,r.status=e.status,r}return n}(Y);function K(e){return e.startsWith("/")?e:"/"+e}function z(e,t){return V.apply(this,arguments)}function V(){return(V=Object(g.a)(v.a.mark((function e(t,n){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.status){e.next=7;break}return e.next=3,t.json();case 3:if("success"===(a=e.sent).status){e.next=6;break}throw new Y(Object(l.a)({message:"Server response did not have `status === 'success`"},a));case 6:return e.abrupt("return",a.payload);case 7:throw new J(t,n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e){return $.apply(this,arguments)}function $(){return($=Object(g.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=K(t),e.next=3,fetch("/api/v1"+t,Object(l.a)(Object(l.a)({},W),{},{method:"GET"}));case 3:return n=e.sent,e.next=6,z(n,t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e){return ee.apply(this,arguments)}function ee(){return(ee=Object(g.a)(v.a.mark((function e(t){var n,a,r=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},t=K(t),e.next=4,fetch("/api/v1"+t,Object(l.a)(Object(l.a)({},W),{},{method:"POST",body:JSON.stringify(n)}));case 4:return a=e.sent,e.next=7,z(a,t);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var te=n(13),ne=n(45),ae=n(105);function re(e,t){var n=!1,a=e.map((function(e){return e.id===t.id?(n=1,t):e}));return n||a.push(t),a}function ie(e,t,n,a){var r;return r={},Object(te.a)(r,e,(function(e,t){return Object(l.a)(Object(l.a)({},e),{},{_modelData:t.payload})})),Object(te.a)(r,t,(function(e,t){return Object(l.a)(Object(l.a)({},e),{},{_modelData:re(e._modelData,t.payload)})})),Object(te.a)(r,n,(function(e,t){return Object(l.a)(Object(l.a)({},e),{},{_modelData:re(e._modelData,t.payload)})})),Object(te.a)(r,a,(function(e,t){var n=t.payload;return Object(l.a)(Object(l.a)({},e),{},{_modelData:e._modelData.filter((function(e){return e.id!==n.id}))})})),r}function oe(e,t){var n=[];var a={id:Math.random(),path:n,pushToPath:function(e){n.unshift(e)}};e._storePath=a;var r=Object(ae.createReducer)(e,t);return r._storePath=a,r._localStoreSelector=function(e){return function(t){return function(e,t){if(e._storePath&&e._storePath.id===t.id)return e;try{var n,a=e,r=Object(x.a)(t.path);try{for(r.s();!(n=r.n()).done;){var i=n.value;a=a[i]}}catch(o){r.e(o)}finally{r.f()}return a}catch(s){console.error("Searching",e,"for local state with path",t.join("."),"but encountered an error")}return e}(t,e)}}(a),r}function se(e){var t=[];for(var n=0,a=Object.entries(e);n<a.length;n++){var r=Object(k.a)(a[n],2),i=r[0],o=r[1];o._storePath&&(o._storePath.pushToPath(i),t.push(o._storePath.pushToPath))}var s=Object(ne.combineReducers)(e);return s._storePath={pushToPath:function(e){var n,a=Object(x.a)(t);try{for(a.s();!(n=a.n()).done;){(0,n.value)(e)}}catch(r){a.e(r)}finally{a.f()}}},s}var ce,ue=ie("FETCH_SESSIONS_SUCCESS","FETCH_ONE_SESSION_SUCCESS","UPSERT_ONE_SESSION_SUCCESS","DELETE_ONE_SESSION_SUCCESS"),le=oe({_modelData:[],activeSession:null},Object(l.a)(Object(l.a)({},ue),{},Object(te.a)({},"SET_ACTIVE_SESSION",(function(e,t){return Object(l.a)(Object(l.a)({},e),{},{activeSession:t.payload})})))),de=oe({users:[],active_user:{},active_role:"admin"},(ce={},Object(te.a)(ce,"FETCH_ACTIVE_USER_SUCCESS",(function(e,t){return Object(l.a)(Object(l.a)({},e),{},{active_user:t.payload})})),Object(te.a)(ce,"FETCH_USERS_SUCCESS",(function(e,t){return Object(l.a)(Object(l.a)({},e),{},{users:t.payload})})),Object(te.a)(ce,"SET_ACTIVE_USER_ROLE_SUCCESS",(function(e,t){return Object(l.a)(Object(l.a)({},e),{},{active_role:t.payload})})),ce)),pe=ie("FETCH_APPLICANTS_SUCCESS","FETCH_ONE_APPLICANT_SUCCESS","UPSERT_ONE_APPLICANT_SUCCESS","DELETE_ONE_APPLICANT_SUCCESS");function me(e,t){var n,a=[],r=Object(x.a)(e);try{var i=function(){var e=n.value;t.some((function(t){return t.id===e.id}))||a.push(e)};for(r.s();!(n=r.n()).done;)i()}catch(o){r.e(o)}finally{r.f()}return a.length>0?e.concat(a):e}var fe=oe({_modelData:[]},Object(l.a)(Object(l.a)({},pe),{},Object(te.a)({},"ADD_APPLICANT_TO_SESSION_SUCCESS",(function(e,t){return Object(l.a)(Object(l.a)({},e),{},{_modelData:me(e._modelData,t.payload)})})))),he=U("FETCH_APPLICANTS_SUCCESS"),_e=U("FETCH_ONE_APPLICANT_SUCCESS"),ve=U("UPSERT_ONE_APPLICANT_SUCCESS"),ge=U("DELETE_ONE_APPLICANT_SUCCESS"),be=q({name:"fetchApplicants",description:"Fetch applicants",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(){return function(){var e=Object(g.a)(v.a.mark((function e(t,n){var a,r,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=wn(n()),r=n().model.sessions.activeSession.id,e.next=4,Q("/".concat(a,"/sessions/").concat(r,"/applicants"));case 4:return i=e.sent,t(he(i)),e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}}),ye=(q({name:"fetchApplicant",description:"Fetch applicant",propTypes:{id:y.a.any.isRequired},onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=wn(a()),t.next=3,Q("/".concat(r,"/applicants/").concat(e.id));case 3:return i=t.sent,n(_e(i)),t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),q({name:"upsertApplicant",description:"Add/insert applicant",propTypes:{},onErrorDispatch:function(e){return C(e.toString())},dispatcher:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(){var n=Object(g.a)(v.a.mark((function n(a,r){var i,o,s;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=wn(r()),!t){n.next=8;break}return s=Nn(r()),n.next=5,X("/".concat(i,"/sessions/").concat(s.id,"/applicants"),e);case 5:o=n.sent,n.next=11;break;case 8:return n.next=10,X("/".concat(i,"/applicants"),e);case 10:o=n.sent;case 11:return a(ve(o)),n.abrupt("return",o);case 13:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}})),we=(q({name:"deleteApplicant",description:"Delete applicant",propTypes:{id:y.a.any.isRequired},onErrorDispatch:function(e){return A(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i,o;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=wn(a()),i=a().model.sessions.activeSession.id,t.next=4,X("/".concat(r,"/sessions/").concat(i,"/applicants/delete"),e);case 4:o=t.sent,n(ge(o));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),q({name:"exportApplicants",description:"Export applicants",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"spreadsheet";return function(){var n=Object(g.a)(v.a.mark((function n(a,r){var i;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e instanceof Function){n.next=2;break}throw new Error('"formatter" must be a function when using the export action.');case 2:return n.next=4,a(be());case 4:return i=Se(r()),n.abrupt("return",e(i,t));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}})),Ee=q({name:"upsertApplicants",description:"Upsert applicants",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e.length){t.next=2;break}return t.abrupt("return");case 2:return a=e.map((function(e){return n(ye(e))})),t.next=5,Promise.all(a);case 5:return t.next=7,n(be());case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),Oe=fe._localStoreSelector,Se=Object(w.a)(Oe,(function(e){return e._modelData})),je=n(22),Ce=oe({_modelData:[]},ie("FETCH_APPLICATIONS_SUCCESS","FETCH_ONE_APPLICATION_SUCCESS","UPSERT_ONE_APPLICATION_SUCCESS","DELETE_ONE_APPLICATION_SUCCESS")),Ae=ie("FETCH_POSITIONS_SUCCESS","FETCH_ONE_POSITION_SUCCESS","UPSERT_ONE_POSITION_SUCCESS","DELETE_ONE_POSITION_SUCCESS"),Te=oe({_modelData:[]},Object(l.a)(Object(l.a)({},Ae),{},Object(te.a)({},"ADD_INSTRUCTOR_TO_POSITION_SUCCESS",(function(e,t){var n=t.payload.position.id,a=t.payload.instructors;return Object(l.a)(Object(l.a)({},e),{},{_modelData:e._modelData.map((function(e){return e.id!==n?e:Object(l.a)(Object(l.a)({},e),{},{instructors:a})}))})})))),ke=oe({_modelData:[]},ie("FETCH_INSTRUCTORS_SUCCESS","FETCH_ONE_INSTRUCTOR_SUCCESS","UPSERT_ONE_INSTRUCTOR_SUCCESS","DELETE_ONE_INSTRUCTOR_SUCCESS")),xe=U("FETCH_INSTRUCTORS_SUCCESS"),Ne=U("FETCH_ONE_INSTRUCTOR_SUCCESS"),De=U("UPSERT_ONE_INSTRUCTOR_SUCCESS"),Ie=U("DELETE_ONE_INSTRUCTOR_SUCCESS"),Pe=q({name:"fetchInstructors",description:"Fetch instructors",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(){return function(){var e=Object(g.a)(v.a.mark((function e(t,n){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=wn(n()),e.next=3,Q("/".concat(a,"/instructors"));case 3:return r=e.sent,t(xe(r)),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}}),Fe=(q({name:"fetchInstructor",description:"Fetch instructor",propTypes:{id:y.a.any.isRequired},onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=wn(a()),t.next=3,Q("/".concat(r,"/instructors/").concat(e.id));case 3:return i=t.sent,n(Ne(i)),t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),q({name:"upsertInstructor",description:"Add/insert instructor",propTypes:{},onErrorDispatch:function(e){return C(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=wn(a()),t.next=3,X("/".concat(r,"/instructors"),e);case 3:return i=t.sent,n(De(i)),t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}})),Ue=q({name:"deleteInstructor",description:"Delete instructor",propTypes:{id:y.a.any.isRequired},onErrorDispatch:function(e){return A(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=wn(a()),t.next=3,X("/".concat(r,"/instructors/delete"),e);case 3:i=t.sent,n(Ie(i));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),Re=q({name:"exportInstructors",description:"Export instructors",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"spreadsheet";return function(){var n=Object(g.a)(v.a.mark((function n(a,r){var i;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e instanceof Function){n.next=2;break}throw new Error('"formatter" must be a function when using the export action.');case 2:return n.next=4,a(Pe());case 4:return i=Le(r()),n.abrupt("return",e(i,t));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}}),He=q({name:"upsertInstructors",description:"Upsert instructors",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e.length){t.next=2;break}return t.abrupt("return");case 2:return a=e.map((function(e){return n(Fe(e))})),t.next=5,Promise.all(a);case 5:return t.next=7,n(Pe());case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),qe=ke._localStoreSelector,Le=Object(w.a)(qe,(function(e){return e._modelData})),Be=ie("FETCH_CONTRACT_TEMPLATES_SUCCESS","FETCH_ONE_CONTRACT_TEMPLATE_SUCCESS","UPSERT_ONE_CONTRACT_TEMPLATE_SUCCESS","DELETE_ONE_CONTRACT_TEMPLATE_SUCCESS"),Me=oe({_modelData:[],all:[]},Object(l.a)(Object(l.a)({},Be),{},Object(te.a)({},"FETCH_ALL_CONTRACT_TEMPLATES_SUCCESS",(function(e,t){return Object(l.a)(Object(l.a)({},e),{},{all:t.payload})})))),Ge=U("FETCH_CONTRACT_TEMPLATES_SUCCESS"),Ze=U("FETCH_ALL_CONTRACT_TEMPLATES_SUCCESS"),We=U("UPSERT_ONE_CONTRACT_TEMPLATE_SUCCESS"),Ye=U("DELETE_ONE_CONTRACT_TEMPLATE_SUCCESS"),Je=q({name:"fetchContractTemplates",description:"Fetch contract_templates",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(){return function(){var e=Object(g.a)(v.a.mark((function e(t,n){var a,r,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=wn(n()),r=n().model.sessions.activeSession.id,e.next=4,Q("/".concat(a,"/sessions/").concat(r,"/contract_templates"));case 4:return i=e.sent,t(Ge(i)),e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}}),Ke=q({name:"upsertContractTemplate",description:"Add/insert contract_template",propTypes:{},onErrorDispatch:function(e){return C(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i,o;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=wn(a()),i=a().model.sessions.activeSession.id,t.next=4,X("/".concat(r,"/sessions/").concat(i,"/contract_templates"),e);case 4:return o=t.sent,n(We(o)),t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),ze=(q({name:"deleteContractTemplate",description:"Delete contract_template from a session",propTypes:{id:y.a.any.isRequired},onErrorDispatch:function(e){return A(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i,o;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=wn(a()),i=a().model.sessions.activeSession.id,t.next=4,X("/".concat(r,"/sessions/").concat(i,"/contract_templates/delete"),e);case 4:return o=t.sent,n(Ye(o)),t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),q({name:"fetchAllContractTemplates",description:"Fetch all available contract_templates",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(){return function(){var e=Object(g.a)(v.a.mark((function e(t,n){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=wn(n()),e.next=3,Q("/".concat(a,"/available_contract_templates"));case 3:return r=e.sent,t(Ze(r)),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}})),Ve=q({name:"previewContractTemplate",description:"Preview the html content of a contract template. No redux state is set by this call, but the contents of the template is returned.",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=wn(a()),t.next=3,Q("/".concat(r,"/contract_templates/").concat(e,"/view"));case 3:return i=t.sent,t.abrupt("return",i);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),Qe=q({name:"downloadContractTemplate",description:"Download the content of a contract template. No redux state is set by this call, but a `File` object with the contents of the template is returned.",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i,o;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=wn(a()),t.next=3,Q("/".concat(r,"/contract_templates/").concat(e,"/download"));case 3:return i=t.sent,o=new Uint8Array(atob(i.content).split("").map((function(e){return e.charCodeAt(0)}))),t.abrupt("return",new File([o],i.file_name,{type:i.mime_type}));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),$e=Me._localStoreSelector,Xe=Object(w.a)($e,(function(e){return e._modelData})),et=Object(w.a)($e,(function(e){return e.all})),tt=U("FETCH_POSITIONS_SUCCESS"),nt=U("FETCH_ONE_POSITION_SUCCESS"),at=U("UPSERT_ONE_POSITION_SUCCESS"),rt=U("DELETE_ONE_POSITION_SUCCESS"),it=q({name:"fetchPositions",description:"Fetch positions",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(){return function(){var e=Object(g.a)(v.a.mark((function e(t,n){var a,r,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n().model.sessions.activeSession.id,r=wn(n()),e.next=4,Q("/".concat(r,"/sessions/").concat(a,"/positions"));case 4:i=e.sent,t(tt(i));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}}),ot=(q({name:"fetchPosition",description:"Fetch position",propTypes:{id:y.a.any.isRequired},onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i,o;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().model.sessions.activeSession.id,i=wn(a()),t.next=4,Q("/".concat(i,"/sessions/").concat(r,"/positions/").concat(e.id));case 4:o=t.sent,n(nt(o));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),H("instructors","instructor_ids",!0)),st=H("contract_template","contract_template_id"),ct=H("instructor","instructor_id"),ut=H("applicant","applicant_id");function lt(e){var t=R(e,["instructor_preferences"]),n=Object(k.a)(t,2),a=n[0],r=n[1];return r.instructor_preferences&&(a.instructor_preferences=r.instructor_preferences.map((function(e){return ut(ct(e))}))),st(ot(a))}var dt=q({name:"upsertPosition",description:"Add/insert position",propTypes:{},onErrorDispatch:function(e){return C(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i,o;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().model.sessions.activeSession.id,i=wn(a()),t.next=4,X("/".concat(i,"/sessions/").concat(r,"/positions"),lt(e));case 4:o=t.sent,n(at(o));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),pt=(q({name:"deletePosition",description:"Delete position",propTypes:{id:y.a.any.isRequired},onErrorDispatch:function(e){return A(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i,o;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().model.sessions.activeSession.id,i=wn(a()),t.next=4,X("/".concat(i,"/sessions/").concat(r,"/positions/delete"),lt(e));case 4:o=t.sent,n(rt(o));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),q({name:"exportPositions",description:"Export positions",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"spreadsheet";return function(){var n=Object(g.a)(v.a.mark((function n(a,r){var i;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e instanceof Function){n.next=2;break}throw new Error('"formatter" must be a function when using the export action.');case 2:return n.next=4,a(it());case 4:return i=_t(r()),n.abrupt("return",e(i,t));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}})),mt=q({name:"upsertPositions",description:"Upsert a list of positions",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e.length){t.next=2;break}return t.abrupt("return");case 2:return a=e.map((function(e){return n(dt(e))})),t.next=5,Promise.all(a);case 5:return t.next=7,n(it());case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),ft=Te._localStoreSelector,ht=Object(w.a)(ft,(function(e){return e._modelData})),_t=Object(w.a)([ht,Le,Xe,Se],(function(e,t,n,a){var r=F(t),i=F(n),o=F(a);return e.map((function(e){var t=e.instructor_ids,n=e.contract_template_id,a=e.instructor_preferences,s=Object(je.a)(e,["instructor_ids","contract_template_id","instructor_preferences"]);return Object(l.a)(Object(l.a)({},s),{},{instructors:t.map((function(e){return r[e]})).filter((function(e){return e})),contract_template:i[n],instructor_preferences:(a||[]).map((function(e){var t=e.applicant_id,n=e.instructor_id,a=Object(je.a)(e,["applicant_id","instructor_id"]);return Object(l.a)({instructor:r[n],applicant:o[t]},a)}))})}))})),vt=U("FETCH_APPLICATIONS_SUCCESS"),gt=U("FETCH_ONE_APPLICATION_SUCCESS"),bt=U("UPSERT_ONE_APPLICATION_SUCCESS"),yt=U("DELETE_ONE_APPLICATION_SUCCESS"),wt=H("applicant","applicant_id"),Et=H("position","position_id");function Ot(e){var t=R(e,["position_preferences"]),n=Object(k.a)(t,2),a=n[0],r=n[1];return r.position_preferences&&(a.position_preferences=r.position_preferences.map((function(e){return Et(e)}))),wt(a)}var St,jt=q({name:"fetchApplications",description:"Fetch applications",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(){return function(){var e=Object(g.a)(v.a.mark((function e(t,n){var a,r,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=wn(n()),r=n().model.sessions.activeSession.id,e.next=4,Q("/".concat(a,"/sessions/").concat(r,"/applications"));case 4:return i=e.sent,t(vt(i)),e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}}),Ct=(q({name:"fetchApplication",description:"Fetch application",propTypes:{id:y.a.any.isRequired},onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i,o;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=wn(a()),i=a().model.sessions.activeSession.id,t.next=4,Q("/".concat(r,"/sessions/").concat(i,"/applications/").concat(e.id));case 4:return o=t.sent,n(gt(o)),t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),q({name:"upsertApplication",description:"Add/insert application",propTypes:{},onErrorDispatch:function(e){return C(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i,o;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=wn(a()),i=a().model.sessions.activeSession.id,t.next=4,X("/".concat(r,"/sessions/").concat(i,"/applications"),Ot(e));case 4:return o=t.sent,n(bt(o)),t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),q({name:"deleteApplication",description:"Delete application",propTypes:{id:y.a.any.isRequired},onErrorDispatch:function(e){return A(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i,o;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=wn(a()),i=a().model.sessions.activeSession.id,t.next=4,X("/".concat(r,"/sessions/").concat(i,"/applications/delete"),Ot(e));case 4:o=t.sent,n(yt(o));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),Ce._localStoreSelector),At=Object(w.a)(Ct,(function(e){return e._modelData})),Tt=(Object(w.a)([At,Se,_t],(function(e,t,n){if(0===e.length)return[];var a=F(t),r=F(n);return e.map((function(e){var t=e.position_preferences,n=e.applicant_id,i=Object(je.a)(e,["position_preferences","applicant_id"]);return Object(l.a)(Object(l.a)({},i),{},{applicant:a[n]||{},position_preferences:(t||[]).map((function(e){var t=e.position_id,n=Object(je.a)(e,["position_id"]);return Object(l.a)({position:r[t]},n)}))})}))})),ie("FETCH_ASSIGNMENTS_SUCCESS","FETCH_ONE_ASSIGNMENT_SUCCESS","UPSERT_ONE_ASSIGNMENT_SUCCESS","DELETE_ONE_ASSIGNMENT_SUCCESS"));function kt(e,t){var n=(t.payload[0]||{}).assignment_id;return n?Object(l.a)(Object(l.a)({},e),{},{_wageChunksByAssignmentId:Object(l.a)(Object(l.a)({},e._wageChunksByAssignmentId),{},Object(te.a)({},n,t.payload))}):e}var xt=oe({_modelData:[],_wageChunksByAssignmentId:{}},Object(l.a)(Object(l.a)({},Tt),{},(St={},Object(te.a)(St,"FETCH_WAGE_CHUNKS_FOR_ASSIGNMENT_SUCCESS",kt),Object(te.a)(St,"UPSERT_WAGE_CHUNKS_FOR_ASSIGNMENT_SUCCESS",kt),St))),Nt=U("FETCH_WAGE_CHUNKS_FOR_ASSIGNMENT_SUCCESS"),Dt=U("UPSERT_WAGE_CHUNKS_FOR_ASSIGNMENT_SUCCESS"),It=U("UPSERT_ONE_WAGE_CHUNK_SUCCESS"),Pt=U("DELETE_ONE_WAGE_CHUNK_SUCCESS"),Ft=q({name:"fetchWageChunksForAssignment",description:"Fetch wage chunks associated with an assignment",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i,o;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=wn(a()),i=e.id,t.next=4,Q("/".concat(r,"/assignments/").concat(i,"/wage_chunks"));case 4:o=t.sent,n(Nt(o));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),Ut=q({name:"upsertWageChunksForAssignment",description:"Fetch wage chunks associated with an assignment",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e,t){return function(){var n=Object(g.a)(v.a.mark((function n(a,r){var i,o,s;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=wn(r()),o=e.id,n.next=4,X("/".concat(i,"/assignments/").concat(o,"/wage_chunks"),t);case 4:return s=n.sent,a(Dt(s)),n.next=8,a(Zt(e));case 8:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}}),Rt=(q({name:"upsertWageChunk",description:"Add/insert wage chunk",propTypes:{},onErrorDispatch:function(e){return C(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=wn(a()),t.next=3,X("/".concat(r,"/wage_chunks"),e);case 3:i=t.sent,n(It(i));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),q({name:"deleteWageChunk",description:"Delete a wage chunk",propTypes:{id:y.a.any.isRequired},onErrorDispatch:function(e){return A(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=wn(a()),t.next=3,X("/".concat(r,"/wage_chunks/delete"),e);case 3:i=t.sent,n(Pt(i));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),xt._localStoreSelector),Ht=Object(w.a)(Rt,(function(e){return function(t){var n=t.id;return e._wageChunksByAssignmentId[n]?e._wageChunksByAssignmentId[n]:[]}})),qt=U("FETCH_ASSIGNMENTS_SUCCESS"),Lt=U("FETCH_ONE_ASSIGNMENT_SUCCESS"),Bt=U("UPSERT_ONE_ASSIGNMENT_SUCCESS"),Mt=U("DELETE_ONE_ASSIGNMENT_SUCCESS"),Gt=q({name:"fetchAssignments",description:"Fetch assignments",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(){return function(){var e=Object(g.a)(v.a.mark((function e(t,n){var a,r,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=wn(n()),r=n().model.sessions.activeSession.id,e.next=4,Q("/".concat(a,"/sessions/").concat(r,"/assignments"));case 4:return i=e.sent,t(qt(i)),e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}}),Zt=q({name:"fetchAssignment",description:"Fetch assignment",propTypes:{id:y.a.any.isRequired},onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=wn(a()),t.next=3,Q("/".concat(r,"/assignments/").concat(e.id));case 3:return i=t.sent,n(Lt(i)),t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),Wt=H("applicant","applicant_id"),Yt=H("position","position_id");function Jt(e){return Yt(Wt(e))}var Kt=q({name:"upsertAssignment",description:"Add/insert assignment",propTypes:{},onErrorDispatch:function(e){return C(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=wn(a()),t.next=3,X("/".concat(r,"/assignments"),Jt(e));case 3:if(i=t.sent,n(Bt(i)),!e.wage_chunks){t.next=11;break}return t.next=8,n(Ut(e,e.wage_chunks));case 8:return t.next=10,n(Zt(i));case 10:i=t.sent;case 11:return n(Bt(i)),t.abrupt("return",i);case 13:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),zt=(q({name:"deleteAssignment",description:"Delete assignment",propTypes:{id:y.a.any.isRequired},onErrorDispatch:function(e){return A(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=wn(a()),t.next=3,X("/".concat(r,"/assignments/delete"),Jt(e));case 3:i=t.sent,n(Mt(i));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),q({name:"exportAssignments",description:"Export assignments",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"spreadsheet";return function(){var n=Object(g.a)(v.a.mark((function n(a,r){var i,o,s,c,u;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e instanceof Function){n.next=2;break}throw new Error('"formatter" must be a function when using the export action.');case 2:return n.next=4,a(Gt());case 4:return i=Xt(r()),o=i.map((function(e){return a(Ft(e))})),n.next=8,Promise.all(o);case 8:s=Object(x.a)(i);try{for(s.s();!(c=s.n()).done;)(u=c.value).wage_chunks=Ht(r())(u)}catch(l){s.e(l)}finally{s.f()}return n.abrupt("return",e(i,t));case 11:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}})),Vt=q({name:"upsertAssignments",description:"Upsert a list of assignments",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e.length){t.next=2;break}return t.abrupt("return");case 2:return a=e.map((function(e){return n(Kt(e))})),t.next=5,Promise.all(a);case 5:return t.next=7,n(Gt());case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),Qt=xt._localStoreSelector,$t=Object(w.a)(Qt,(function(e){return e._modelData})),Xt=Object(w.a)([$t,Se,_t],(function(e,t,n){return 0===e.length?[]:(t=F(t),n=F(n),e.map((function(e){var a=e.position_id,r=e.applicant_id,i=Object(je.a)(e,["position_id","applicant_id"]);return Object(l.a)(Object(l.a)({},i),{},{position:n[a]||{},applicant:t[r]||{}})})))})),en=q({name:"setGlobals",description:"Sets global variables",onErrorDispatch:function(e){return T(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(l.a)(Object(l.a)({},an(a())),e),t.next=3,n(tn(r));case 3:n({type:"SET_GLOBALS",payload:r});case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),tn=q({name:"setGlobalsInUrl",description:"Stores global variables in the URL",onErrorDispatch:function(e){return T(e.toString())},dispatcher:function(e){return Object(g.a)(v.a.mark((function t(){var n,a,r,i,o,s,c;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=new URLSearchParams,a=0,r=Object.entries(e);a<r.length;a++)i=Object(k.a)(r[a],2),o=i[0],s=i[1],n.append(o,JSON.stringify(s));window.history.pushState&&(""+n).length>0&&((c=new URL(window.location)).search="?"+n,""+(c=""+c)!==""+window.location&&window.history.pushState({path:c},"",c));case 3:case"end":return t.stop()}}),t)})))}}),nn=q({name:"setMockAPIState",description:"Activates or deactivates the mockAPI",onErrorDispatch:function(e){return T(e.toString())},dispatcher:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipInit:!1};return function(){var n=Object(g.a)(v.a.mark((function n(a){return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a(en({mockAPI:e}));case 2:if(t.skipInit){n.next=5;break}return n.next=5,a(cn("toggleMockAPI"));case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}}),an=function(e){var t=e.ui.globals,n=(t.activeSession,Object(je.a)(t,["activeSession"])),a=Nn(e);return null!=a&&null!=a.id?Object(l.a)(Object(l.a)({},n),{},{activeSession:a.id}):n},rn=n(170);function on(e){if(null!=e){var t=n(255).mockAPI;!0===e?t.replaceGlobalFetch():t.restoreGlobalFetch()}}function sn(e){for(var t={},n=0,a=Object.entries(e);n<a.length;n++){var r=Object(k.a)(a[n],2),i=r[0],o=r[1];null!=o&&(t[i]=o)}return t}function cn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{startAfterStage:!1},n=!!t.startAfterStage;return function(){var t=Object(g.a)(v.a.mark((function t(a,r){var i,o,s,c,u,l,d,p;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=function(t){var a=["pageLoad","toggleMockAPI","setActiveUser","setActiveUserRole","fetchSessions","setActiveSession","updateGlobals","fetchSessionDependentData"],o=a.indexOf(e)+n<=a.indexOf(t);if(o&&"setActiveSession"===t){var s=r(),c=xn(s),u=Nn(s)||{id:i.activeSession};return!!c.find((function(e){return e.id===u.id}))}if(o&&"fetchSessionDependentData"===t){var l=r(),d=Nn(l);return!(!d||null==d.id)}return o},i={mockAPI:null,activeSession:null},!o("pageLoad")){t.next=7;break}if(!window.location){t.next=7;break}return Object.assign(i,Object(rn.a)(window.location.search)),t.next=7,a(en(sn(i)));case 7:if(o("toggleMockAPI")&&on(an(r()).mockAPI),!o("setActiveUser")){t.next=11;break}return t.next=11,a(mn());case 11:if(!o("setActiveUserRole")){t.next=15;break}return s=wn(r()),t.next=15,a(hn(s,{skipInit:!0}));case 15:if(!o("fetchSessions")){t.next=18;break}return t.next=18,a(Cn());case 18:if(!o("setActiveSession")){t.next=25;break}return c=r(),u=xn(c),l=Nn(c),d=u.find((function(e){return e.id===i.activeSession}))||l,t.next=25,a(Tn(d,{skipInit:!0}));case 25:if(!o("updateGlobals")){t.next=28;break}return t.next=28,a(en(sn(i)));case 28:if(!o("fetchSessionDependentData")){t.next=32;break}return p=[be,jt,Gt,Je,Pe,it],t.next=32,Promise.all(p.map((function(e){return a(e())})));case 32:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}var un=U("FETCH_ACTIVE_USER_SUCCESS"),ln=U("FETCH_USERS_SUCCESS"),dn=U("UPSERT_USERS_SUCCESS"),pn=U("SET_ACTIVE_USER_ROLE_SUCCESS"),mn=q({name:"fetchActiveUser",description:"Fetch the active user",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(){return function(){var e=Object(g.a)(v.a.mark((function e(t,n){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=wn(n()),e.next=3,Q("/".concat(a,"/active_user"));case 3:return r=e.sent,t(un(r)),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}}),fn=(q({name:"upsertUsers",description:"Upserts a user (setting their role(s))",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X("/admin/users",e);case 2:return a=t.sent,n(dn(a)),t.next=6,n(fn(e));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),q({name:"fetchUsers",description:"Fetch all users",propTypes:{},onErrorDispatch:function(e){return C(e.toString())},dispatcher:function(){return function(){var e=Object(g.a)(v.a.mark((function e(t,n){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=wn(n()),e.next=3,Q("/".concat(a,"/users"));case 3:return r=e.sent,t(ln(r)),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}})),hn=q({name:"setActiveUserRole",description:"Sets the role of the active user",onErrorDispatch:function(e){return A(e.toString())},dispatcher:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){var n=Object(g.a)(v.a.mark((function n(a){return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a(pn(e));case 2:if(t.skipInit){n.next=5;break}return n.next=5,a(cn("setActiveUserRole",{startAfterStage:!0}));case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}}),_n=q({name:"debugOnlyFetchUsers",description:"Fetch all users; this is available only in debug mode and bypasses any user permissions",propTypes:{},onErrorDispatch:function(e){return C(e.toString())},dispatcher:function(){return function(){var e=Object(g.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q("/debug/users");case 2:n=e.sent,t(ln(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),vn=q({name:"debugOnlySetActiveUser",description:"Sets the active user (i.e. fakes the 'logged on' user); available only in debug mode",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){var n=Object(g.a)(v.a.mark((function n(a){var r;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,X("/debug/active_user",e);case 2:return r=n.sent,n.next=5,a(un(r));case 5:return n.next=7,a(pn(r.roles[0]));case 7:if(t.skipInit){n.next=10;break}return n.next=10,a(cn("setActiveUser"));case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}}),gn=de._localStoreSelector,bn=function(e){return gn(e).users},yn=function(e){return gn(e).active_user},wn=function(e){return gn(e).active_role},En=U("FETCH_SESSIONS_SUCCESS"),On=U("FETCH_ONE_SESSION_SUCCESS"),Sn=U("UPSERT_ONE_SESSION_SUCCESS"),jn=(U("DELETE_ONE_SESSION_SUCCESS"),U("SET_ACTIVE_SESSION")),Cn=q({name:"fetchSessions",description:"Fetch sessions",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(){return function(){var e=Object(g.a)(v.a.mark((function e(t,n){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=wn(n()),e.next=3,Q("/".concat(a,"/sessions"));case 3:return r=e.sent,e.next=6,t(En(r));case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}}),An=(q({name:"fetchSession",description:"Fetch session",propTypes:{id:y.a.any.isRequired},onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=wn(a()),t.next=3,Q("/".concat(r,"/sessions/").concat(e.id));case 3:return i=t.sent,n(On(i)),t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),q({name:"upsertSession",description:"Add/insert session",propTypes:{},onErrorDispatch:function(e){return C(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=wn(a()),t.next=3,X("/".concat(r,"/sessions"),e);case 3:return i=t.sent,n(Sn(i)),t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}})),Tn=q({name:"setActiveSession",description:"Set the active session",onErrorDispatch:!0,dispatcher:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){var n=Object(g.a)(v.a.mark((function n(a,r){var i,o,s;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.skipInit,o=r(),(s=Nn(o))!==e){n.next=5;break}return n.abrupt("return");case 5:if(null!=e){n.next=9;break}return n.next=8,a(jn(null));case 8:return n.abrupt("return");case 9:if((s||{id:null}).id!==e.id){n.next=11;break}return n.abrupt("return");case 11:return n.next=13,a(jn(e));case 13:if(i){n.next=16;break}return n.next=16,a(cn("setActiveSession",{startAfterStage:!0}));case 16:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}}),kn=le._localStoreSelector,xn=Object(w.a)(kn,(function(e){return e._modelData})),Nn=Object(w.a)(kn,(function(e){return e.activeSession})),Dn=U("FETCH_ONE_OFFER_SUCCESS"),In=U("SET_OFFER_ACCEPTED_SUCCESS"),Pn=U("SET_OFFER_REJECTED_SUCCESS"),Fn=U("OFFER_CREATE_SUCCESS"),Un=U("OFFER_EMAIL_SUCCESS"),Rn=U("OFFER_NAG_SUCCESS"),Hn=U("OFFER_WITHDRAW_SUCCESS"),qn=(q({name:"fetchActiveOfferForAssignment",description:"Fetch an offer associated with an assignment",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=wn(a()),t.next=3,Q("/".concat(r,"/assignments/").concat(e.id,"/active_offer"));case 3:return i=t.sent,n(Dn(i)),t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),q({name:"setOfferForAssignmentAccepted",description:"Set an offer as accepted",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=wn(a()),t.next=3,X("/".concat(r,"/assignments/").concat(e.id,"/active_offer/accept"));case 3:return i=t.sent,n(In(i)),t.next=7,n(Zt(e));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}})),Ln=q({name:"setOfferForAssignmentRejected",description:"Set an offer as rejected",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=wn(a()),t.next=3,X("/".concat(r,"/assignments/").concat(e.id,"/active_offer/reject"));case 3:return i=t.sent,n(Pn(i)),t.next=7,n(Zt(e));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),Bn=q({name:"offerForAssignmentWithdraw",description:"Withdraw an offer",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=wn(a()),t.next=3,X("/".concat(r,"/assignments/").concat(e.id,"/active_offer/withdraw"));case 3:return i=t.sent,n(Hn(i)),t.next=7,n(Zt(e));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),Mn=q({name:"offerForAssignmentCreate",description:"Create an offer",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=wn(a()),t.next=3,X("/".concat(r,"/assignments/").concat(e.id,"/active_offer/create"));case 3:return i=t.sent,n(Fn(i)),t.next=7,n(Zt(e));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),Gn=q({name:"offerForAssignmentEmail",description:"Email an offer",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=wn(a()),t.next=3,X("/".concat(r,"/assignments/").concat(e.id,"/active_offer/email"));case 3:return i=t.sent,n(Un(i)),t.next=7,n(Zt(e));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),Zn=q({name:"offerForAssignmentNag",description:"Send a nag email for an offer",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=wn(a()),t.next=3,X("/".concat(r,"/assignments/").concat(e.id,"/active_offer/nag"));case 3:return i=t.sent,n(Rn(i)),t.next=7,n(Zt(e));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),Wn=function(e){var t=e.globals,n=e.setMockAPIState,a=t.mockAPI;return r.a.createElement("span",{title:"The Mock API simulates the TAPP API but uses browser-based storage. This allows you to test TAPP functionality without a working server."},"Mock API"," ",r.a.createElement(f.a,null,r.a.createElement(h.a,{variant:a?"primary":"secondary",onClick:function(){return n(!0)}},"On"),r.a.createElement(h.a,{variant:a?"secondary":"primary",onClick:function(){return n(!1)}},"Off")))};Wn=Object(s.connect)((function(e){return{globals:an(e)}}),{setGlobals:en})(Wn);var Yn=n(395),Jn=n.n(Yn),Kn=(n(841),n(5)),zn=n(255),Vn=n(183),Qn=function(){};function $n(e){return r.a.createElement(p.a.Link,{as:c.b,activeClassName:"bg-warning text-dark",to:e.to},e.children)}var Xn={openapi:"3.0.0",info:{description:"TAPP is a program for TA management--for making TA assignments and distributing TA contracts.",title:"TAPP"},servers:[{url:"/api/v1/admin"},{url:"/api/v1/instructor"},{url:"/api/v1/ta"},{url:"/api/v1"}],paths:Object(l.a)({},Object(Kn.c)(zn.mockAPI))},ea=Object(s.connect)((function(e){return{activeUser:yn(e),users:bn(e)}}),{fetchUsers:_n,setActiveUser:vn})((function(e){var t=e.users,n=void 0===t?[]:t,a=e.activeUser,i=void 0===a?{}:a,o=e.setActiveUser,s=void 0===o?Qn:o,c=e.fetchUsers,u=void 0===c?Qn:c,l=r.a.useState(!1),d=Object(k.a)(l,2),p=d[0],m=d[1];return r.a.useEffect((function(){p&&u()}),[p,u]),r.a.createElement("span",{title:"Set which user you are currently logged in as. This is only available when the server is running in debug mode.",className:"logged-in-as-container"},r.a.createElement("label",null,"Logged in as"),r.a.createElement(Vn.a,{onSelect:function(e){s(n[e])},onToggle:function(e){return m(e)},show:p,alignRight:!0},r.a.createElement(Vn.a.Toggle,{split:!0,variant:"dark"},i.utorid," "),r.a.createElement(Vn.a.Menu,{flip:!0},(n||[]).map((function(e,t){return r.a.createElement(Vn.a.Item,{key:t,eventKey:t,active:i.utorid===e.utorid},e.utorid," (",(e.roles||[]).join(", "),")")})))))})),ta=Object(s.connect)(null,{setMockAPIState:nn})(Wn);var na=n(17),aa=Object(s.connect)((function(e){return{notifications:e.ui.notifications}}))(O.a),ra=function(e){return e.ui.offerTable},ia=n(927),oa=n(398);function sa(e,t){function n(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return function(r){var i=r.target.value||"",o=Object(l.a)(Object(l.a)({},e),{},Object(te.a)({},n,a(i)));t(o)}}return function(t,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=function(e){return e},c=function(e){return e||""};switch(i){case"number":s=Number;break;case"date":s=function(e){return new Date(e).toISOString()},c=function(e){try{return new Date(e).toISOString().slice(0,10)}catch(t){return""}}}return r.a.createElement(r.a.Fragment,null,r.a.createElement(ia.a.Label,null,t),r.a.createElement(ia.a.Control,Object.assign({type:i,value:c(e[a]),onChange:n(a,s)},o)))}}function ca(e){var t=e.children;return r.a.createElement(ia.a.Row,{style:{alignItems:"baseline"}},r.a.Children.map(t,(function(e,t){return r.a.createElement(ia.a.Group,{as:oa.a,key:t},e)})))}function ua(e){var t=sa(e.session,e.setSession);return r.a.createElement(ia.a,null,r.a.createElement(ca,null,t("Session Name (e.g. 2019 Fall)","name"),t("Start Date","start_date","date"),t("End Date","end_date","date")),r.a.createElement(ca,null,t("Rate 1 (pre-January rate)","rate1","number",{step:"0.01",min:0}),t("Rate 2 (post-January rate)","rate2","number",{step:"0.01",min:0})))}var la=n(36);function da(e){var t=e.accessor,n=e.Cell;function a(e){var n,a=e,r=Object(x.a)(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(null==a)return;a=a[i]}}catch(o){r.e(o)}finally{r.f()}return a}return t=(t||"").split("."),function(e){var t=e.original,i=a(t.obj),o=a(t.changes);return null!=o?r.a.createElement("div",{className:"diff-changed-cell bg-primary text-white"},o):n?n({value:i,original:t.obj}):i}}function pa(e){return e.map((function(e){var t=Object(l.a)(Object(l.a)({},e),{},{Cell:da(e)});return delete t.accessor,t}))}var ma=[{Header:"Last Name",accessor:"last_name"},{Header:"First Name",accessor:"first_name"},{Header:"UTORid",accessor:"utorid"},{Header:"Student Number",accessor:"student_number"},{Header:"Email",accessor:"email"},{Header:"Phone",accessor:"phone"}];function fa(e){var t=e.modifiedApplicants;return r.a.createElement(ha,{applicants:t,columns:pa(ma)})}function ha(e){var t=e.applicants,n=e.columns,a=void 0===n?ma:n;return r.a.createElement(la.a,{data:t,columns:a,showPagination:!1,minRows:1})}var _a={first_name:"",last_name:"",email:"",utorid:"",phone:"",student_number:""};function va(e){var t=e.applicant,n=e.setApplicant,a=Object(l.a)(Object(l.a)({},_a),t);function i(e){return function(t){var r=t.target.value||"",i=Object(l.a)(Object(l.a)({},a),{},Object(te.a)({},e,r));n(i)}}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text";return r.a.createElement(r.a.Fragment,null,r.a.createElement(ia.a.Label,null,e),r.a.createElement(ia.a.Control,{type:n,value:a[t]||"",onChange:i(t)}))}return r.a.createElement(ia.a,null,r.a.createElement(ia.a.Row,null,r.a.createElement(ca,null,o("First Name","first_name"),o("Last Name","last_name")),r.a.createElement(ca,null,o("Email","email"),o("UTORid","utorid")),r.a.createElement(ca,null,o("Student Number","student_number"),o("Phone","phone"))))}var ga=[{Header:"Template Name",accessor:"template_name"},{Header:"Template File",accessor:"template_file"}];function ba(e){var t=e.contractTemplates,n=e.columns,a=void 0===n?ga:n;return r.a.createElement(la.a,{data:t,columns:a,showPagination:!1,minRows:1})}var ya=[{Header:"Last Name",accessor:"last_name"},{Header:"First Name",accessor:"first_name"},{Header:"Email",accessor:"email"},{Header:"UTORid",accessor:"utorid"}];function wa(e){var t=e.instructors,n=e.columns,a=void 0===n?ya:n;return r.a.createElement(r.a.Fragment,null,r.a.createElement(la.a,{data:t,columns:a,showPagination:!1,minRows:1}))}function Ea(e){var t=e.modifiedInstructors;return r.a.createElement(wa,{instructors:t,columns:pa(ya)})}var Oa={utorid:"",last_name:"",first_name:""};function Sa(e){var t=e.instructor,n=e.setInstructor,a=Object(l.a)(Object(l.a)({},Oa),t);function i(e){return function(t){var r=t.target.value||"",i=Object(l.a)(Object(l.a)({},a),{},Object(te.a)({},e,r));n(i)}}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text";return r.a.createElement(r.a.Fragment,null,r.a.createElement(ia.a.Label,null,e),r.a.createElement(ia.a.Control,{type:n,value:a[t]||"",onChange:i(t)}))}return r.a.createElement(ia.a,null,r.a.createElement(ia.a.Row,null,r.a.createElement(ca,null,o("First Name","first_name"),o("Last Name","last_name")),r.a.createElement(ca,null,o("Email","email"),o("UTORid","utorid"))))}var ja=n(14),Ca=n(920),Aa=n(926);n(843);function Ta(e){var t=e.title,n=e.value,a=e.show,i=e.onHide,o=e.onChange,s=r.a.useState(n),c=Object(k.a)(s,2),u=c[0],l=c[1],d=r.a.useState(!1),p=Object(k.a)(d,2),m=p[0],f=p[1];function _(){l(n),i()}var b=m?r.a.createElement(Ca.a,{animation:"border",size:"sm",className:"mr-1"}):null,y=u==n?null:r.a.createElement("span",null,"Change from"," ",r.a.createElement("span",{className:"field-dialog-formatted-name"},n)," to"," ",r.a.createElement("span",{className:"field-dialog-formatted-name"},u));return r.a.createElement(Aa.a,{show:a,onHide:_},r.a.createElement(Aa.a.Header,{closeButton:!0},r.a.createElement(Aa.a.Title,null,t)),r.a.createElement(Aa.a.Body,null,r.a.createElement("input",{type:"text",value:u,onChange:function(e){return l(e.currentTarget.value)}})," ",y),r.a.createElement(Aa.a.Footer,null,r.a.createElement(h.a,{onClick:_,variant:"outline-secondary"},"Cancel"),r.a.createElement(h.a,{onClick:function(){function e(){return(e=Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u==n){e.next=4;break}return f(!0),e.next=4,o(u,n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return e.apply(this,arguments)})().finally((function(){f(!1)}))}},b,"Save")))}function ka(e){var t=e.title,n=e.hidden,a=e.onClick;return n?null:r.a.createElement("div",{className:"show-on-hover edit-glyph",onClick:a,title:t},r.a.createElement(ja.d,null))}function xa(e){var t=e.children,n=e.title,a=e.value,i=e.onChange,o=e.editable,s=void 0===o||o,c=r.a.useState(!1),u=Object(k.a)(c,2),l=u[0],d=u[1];return r.a.createElement("div",{className:"show-on-hover-wrapper"},t,r.a.createElement(ka,{title:n,hidden:!s,onClick:function(){return d(!0)}}),r.a.createElement(Ta,{title:n,value:a,onChange:i,show:l,onHide:function(){return d(!1)}}))}function Na(e){var t=e.show,n=e.onHide,a=e.onDelete,i=e.instructor;return i?r.a.createElement(Aa.a,{show:t,onHide:n},r.a.createElement(Aa.a.Header,{closeButton:!0},r.a.createElement(Aa.a.Title,null,"Delete Instructor")),r.a.createElement(Aa.a.Body,null,"Are you sure you want to delete instructor"," ","".concat(i.last_name,", ").concat(i.first_name),"? This action cannot be undone."),r.a.createElement(Aa.a.Footer,null,r.a.createElement(h.a,{onClick:n,variant:"light"},"Cancel"),r.a.createElement(h.a,{onClick:a,title:"Delete Instructor"},"Delete"))):null}function Da(e){var t="Edit ".concat(e.column.Header),n=e.upsertInstructor,a=e.field;return r.a.createElement(xa,{title:t,value:e.value||"",onChange:function(t){var r=e.original.id;n(Object(te.a)({id:r},a,t))}},e.value)}var Ia=Object(s.connect)((function(e){return{instructors:Le(e),positions:_t(e)}}),{upsertInstructor:Fe,deleteInstructor:Ue})((function(e){var t=e.upsertInstructor,n=e.deleteInstructor,a=e.inDeleteMode,i=e.positions,o=Object(je.a)(e,["upsertInstructor","deleteInstructor","inDeleteMode","positions"]),s=r.a.useState(!1),c=Object(k.a)(s,2),u=c[0],l=c[1],d=r.a.useState(null),p=Object(k.a)(d,2),m=p[0],f=p[1];function h(e){return function(n){return r.a.createElement(Da,Object.assign({field:e,upsertInstructor:t},n))}}var _,v={},g=Object(x.a)(i||[]);try{for(g.s();!(_=g.n()).done;){var b,y=_.value,w=Object(x.a)(y.instructors||[]);try{for(w.s();!(b=w.n()).done;){var E=b.value;v[E.id]=!0}}catch(S){w.e(S)}finally{w.f()}}}catch(S){g.e(S)}finally{g.f()}var O=[{Header:r.a.createElement(ja.j,{className:"delete-instructor-column-header-icon"}),Cell:function(e){var t=e.original;return v[t.id]?r.a.createElement("div",{className:"delete-button-container"},r.a.createElement(ja.f,{className:"delete-instructor-button disabled",title:"This instructor is assigned to a position and so cannot be deleted. Unassign the instructor from all positions to delete."})):r.a.createElement("div",{className:"delete-button-container"},r.a.createElement(ja.i,{className:"delete-instructor-button",title:"Delete ".concat(t.last_name,", ").concat(t.first_name),onClick:function(){f(t),l(!0)}}))},show:a,maxWidth:32,resizable:!1},{Header:"Last Name",accessor:"last_name",Cell:h("last_name")},{Header:"First Name",accessor:"first_name",Cell:h("first_name")},{Header:"Email",accessor:"email",Cell:h("email")},{Header:"UTORid",accessor:"utorid",Cell:h("utorid")}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(wa,Object.assign({columns:O},o)),r.a.createElement(Na,{show:u,onHide:function(){l(!1),f(null)},onDelete:function(){n(m),l(!1)},instructor:m}))})),Pa=n(921);function Fa(e){return null==e?"":(""+e).trim()}function Ua(e){if(!e)return e;var t=new Date(e).toJSON().slice(0,10),n=new Date("".concat(t,"T00:00:00.000"));return"".concat(n.toLocaleDateString("en-CA",{month:"short",year:"numeric",day:"numeric"}))}var Ra={first_name:"",last_name:"",email:"",utorid:""};var Ha=Object(s.connect)((function(e){return{instructors:Le(e)}}),{upsertInstructor:Fe})((function(e){var t=e.show,n=e.onHide,a=void 0===n?function(){}:n,i=e.instructors,o=e.upsertInstructor,s=r.a.useState(Ra),c=Object(k.a)(s,2),u=c[0],l=c[1];r.a.useEffect((function(){t||l(Ra)}),[t]);var d=function(e,t){var n={delayShow:"",immediateShow:""};Fa(e.utorid)&&Fa(e.first_name)&&Fa(e.last_name)||(n.delayShow="A first name, last name, and utorid is required");var a=t.find((function(t){return Fa(t.utorid)===Fa(e.utorid)}));return a&&(n.immediateShow=r.a.createElement("p",null,"Another instructor exists with utorid=",e.utorid,":"," ",r.a.createElement("b",null,a.first_name," ",a.last_name))),n}(u,i);return r.a.createElement(Aa.a,{show:t,onHide:a},r.a.createElement(Aa.a.Header,{closeButton:!0},r.a.createElement(Aa.a.Title,null,"Add Instructor")),r.a.createElement(Aa.a.Body,null,r.a.createElement(Sa,{instructor:u,setInstructor:l}),d.immediateShow?r.a.createElement(Pa.a,{variant:"danger"},d.immediateShow):null),r.a.createElement(Aa.a.Footer,null,r.a.createElement(h.a,{onClick:a,variant:"light"},"Cancel"),r.a.createElement(h.a,{onClick:function(){o(u),a()},title:d.delayShow||"Create Instructor",disabled:!!d.delayShow||!!d.immediateShow},"Create Instructor")))})),qa=n(58),La=n.n(qa),Ba=n(6),Ma=n.n(Ba);n(844);function Ga(e){if(!e)return e;if("function"===typeof e){var t=e;e=r.a.createElement(t,null)}return r.a.createElement("span",{className:"mr-2"},e)}function Za(e){var t=e.children;return r.a.createElement("div",{className:"page-actions"},r.a.createElement(Vn.a,null,t))}function Wa(e){var t=e.children;return r.a.createElement(Vn.a.Header,null,t)}function Ya(e){var t=e.icon,n=void 0===t?null:t,a=e.children,i=e.active,o=Object(je.a)(e,["icon","children","active"]),s=Ga(n);return r.a.createElement(Vn.a.Item,Object.assign({as:"button",className:Ma()({active:i})},o),s,a)}function Ja(e){var t=e.icon,n=void 0===t?null:t,a=e.children,i=e.menu,o=void 0===i?null:i,s=e.active,c=Object(je.a)(e,["icon","children","menu","active"]),u=r.a.useState(!1),l=Object(k.a)(u,2),d=l[0],p=l[1],m=r.a.useState(0),f=Object(k.a)(m,2),h=f[0],_=f[1],v=r.a.useRef(null);r.a.useEffect((function(){null!=v&&null!=v.current&&_(v.current.clientHeight)}),[a]);var g=Ga(n);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Ma()("action-accordion",{dropright:!d})},r.a.createElement("button",Object.assign({className:Ma()("dropdown-item",{active:s})},c),g,a),r.a.createElement("button",{className:"dropdown-item dropdown-toggle",onClick:function(){return p(!d)}})),r.a.createElement("div",{className:Ma()("action-accordion-item-container",{closed:!d}),style:{height:h}},r.a.createElement("div",{ref:v},o)))}function Ka(e){var t=e.onClick;function n(e){t&&t(e)}return r.a.createElement(Ja,{onClick:function(){return n("spreadsheet")},icon:ja.c,menu:r.a.createElement(r.a.Fragment,null,r.a.createElement(Ya,{onClick:function(){return n("spreadsheet")}},"As Spreadsheet"),r.a.createElement(Ya,{onClick:function(){return n("csv")}},"As CSV"),r.a.createElement(Ya,{onClick:function(){return n("json")}},"As JSON"))},"Export")}var za=n(77),Va=n.n(za),Qa=n(922),$a=n(923),Xa="Select a spreadsheet, CSV, or JSON file.";function er(e){var t=e.dialogOpen,n=e.onCancel,a=e.onClose,i=e.onConfirm,o=e.dialogContent,s=e.onFileChange,c=e.setInProgress,u=r.a.useState(Xa),l=Object(k.a)(u,2),d=l[0],p=l[1],m=r.a.useState(null),f=Object(k.a)(m,2),_=f[0],b=f[1],y=r.a.useState(null),w=Object(k.a)(y,2),E=w[0],O=w[1],S=r.a.useState(!1),j=Object(k.a)(S,2),C=j[0],A=j[1];function T(e){A(e),"function"===typeof c&&c(e)}n instanceof Function||(n=function(){return console.warn("No onCancel function set for dialog")}),r.a.useEffect((function(){E&&s instanceof Function&&s(E)}),[E,s]),r.a.useEffect((function(){if(_){var e=new Uint8Array(_);try{var t=(new TextDecoder).decode(e);return void O({data:JSON.parse(t),fileType:"json"})}catch(r){}try{var n=Va.a.read(e,{type:"array"}),a=n.SheetNames[0];return void O({data:Va.a.utils.sheet_to_json(n.Sheets[a]),fileType:"spreadsheet"})}catch(r){}console.warn("Could not determine file type for",d,_)}}),[_,d]);var x=C?r.a.createElement(Ca.a,{animation:"border",size:"sm",className:"mr-1"}):null;return r.a.createElement(Aa.a,{show:t,onHide:a,size:"lg",dialogClassName:"wide-modal"},r.a.createElement(Aa.a.Header,{closeButton:!0},r.a.createElement(Aa.a.Title,null,"Import From File")),r.a.createElement(Aa.a.Body,null,r.a.createElement(Qa.a,null,r.a.createElement($a.a,{className:"mb-3"},r.a.createElement(oa.a,null,r.a.createElement(ia.a,null,r.a.createElement(ia.a.File,{label:d,onChange:function(e){var t=e.target.files[0];p(t.name);var n=new FileReader;n.onload=function(e){return b(e.target.result)},n.readAsArrayBuffer(t)},custom:!0})))),r.a.createElement($a.a,null,r.a.createElement(oa.a,null,o)))),r.a.createElement(Aa.a.Footer,null,r.a.createElement(h.a,{variant:"secondary",onClick:n},"Cancel"),r.a.createElement(h.a,{variant:"primary",onClick:function(){i instanceof Function&&(T(!0),Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i(E));case 1:case"end":return e.stop()}}),e)})))().then((function(){T(!1)})).catch(console.error).finally((function(){T(!1),b(null),O(null),p(Xa)})))}},x,"Confirm")))}function tr(e){var t=e.onFileChange,n=e.dialogContent,i=e.onConfirm,o=e.setInProgress,s=Object(a.useState)(!1),c=Object(k.a)(s,2),u=c[0],l=c[1];function d(){l(!1)}function p(){return(p=Object(g.a)(v.a.mark((function e(){var t=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.apply(void 0,t);case 2:l(!1);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{onClick:function(){return l(!0)}},"Import"),r.a.createElement(er,{dialogOpen:u,onCancel:function(){t(null),d()},onClose:d,onFileChange:t,dialogContent:n,onConfirm:function(){return p.apply(this,arguments)},setInProgress:o}))}function nr(e){var t=e.onFileChange,n=e.dialogContent,i=e.onConfirm,o=e.setInProgress,s=Object(a.useState)(!1),c=Object(k.a)(s,2),u=c[0],l=c[1];function d(){l(!1)}function p(){return(p=Object(g.a)(v.a.mark((function e(){var t=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.apply(void 0,t);case 2:l(!1);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ya,{icon:ja.k,onClick:function(){return l(!0)}},"Import"),r.a.createElement(er,{dialogOpen:u,onCancel:function(){t(null),d()},onClose:d,onFileChange:t,dialogContent:n,onConfirm:function(){return p.apply(this,arguments)},setInProgress:o}))}var ar=n(257),rr=n.n(ar),ir=n(400);function or(e,t){var n,a=t.requiredKeys,r=Object(x.a)(e);try{for(r.s();!(n=r.n()).done;){var i,o=n.value,s=Object(x.a)(a);try{for(s.s();!(i=s.n()).done;){var c=i.value;if(null==o[c])throw new Error('Item "'.concat(JSON.stringify(o),'" missing required property "').concat(c,'"'))}}catch(u){s.e(u)}finally{s.f()}}}catch(u){r.e(u)}finally{r.f()}}function sr(e,t){for(var n in t)t[n]===e&&delete t[n];return t}function cr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e in t)return t[e];var n=rr()(Object.keys(t)),a=n.get(e,null,.7);if(a){var r=a[0][1];return t[r]}return null}var ur=function(){function e(t){Object(L.a)(this,e),this.keys=t.keys,this.keyMap=Object(l.a)({},t.keyMap);var n,a=Object(x.a)(this.keys);try{for(a.s();!(n=a.n()).done;){var r=n.value;this.keyMap[r]=r}}catch(i){a.e(i)}finally{a.f()}this.unmatchedKeys=Object(l.a)({},this.keyMap),this.empiricalKeyMap={},this.unknownKeys={}}return Object(na.a)(e,[{key:"formatRow",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n={},a=0,r=Object.entries(e);a<r.length;a++){var i=Object(k.a)(r[a],2),o=i[0],s=i[1];if(o in this.empiricalKeyMap)n[this.empiricalKeyMap[o]]=s;else if(!(o in this.unknownKeys)){var c=cr(o,this.unmatchedKeys);null!=c?(t&&console.log("Assuming association between spreadsheet column",'"'.concat(o,'"'),"and the key",'"'.concat(c,'"')),this.empiricalKeyMap[o]=c,sr(c,this.unmatchedKeys),n[c]=s):(t&&console.log("Could not find a key corresponding to spreadsheet column",'"'.concat(o,'"')),this.unknownKeys[o]=!0)}}return n}}]),e}();function lr(e){if("number"===typeof e){var t=Math.round(86400*(e-25569)*1e3);e=new Date(t).toJSON().replace("Z","")}var n=ir.parseDate(e);try{return n.toJSON().replace(/T.*/,"T00:00:00.000Z")}catch(a){throw new Error('Cannot parse "'.concat(e,'" as date'))}}function dr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[],requiredKeys:[],dateColumns:[]},n=t.keys,a=t.baseName,r=[];if("json"===e.fileType){(e=e.data)[a]&&(e=e[a]);var i,o=Object(x.a)(e);try{for(o.s();!(i=o.n()).done;){var s,c=i.value,u={},d=Object(x.a)(n);try{for(d.s();!(s=d.n()).done;){var p=s.value;u[p]=c[p]}}catch(v){d.e(v)}finally{d.f()}r.push(u)}}catch(v){o.e(v)}finally{o.f()}}if("spreadsheet"===e.fileType){e=e.data;var m,f=new ur(t),h=Object(x.a)(e);try{for(h.s();!(m=h.n()).done;){var _=m.value;r.push(f.formatRow(_))}}catch(v){h.e(v)}finally{h.f()}}return t.dateColumns&&t.dateColumns.length>0&&(r=r.map((function(e){var n,a=Object(l.a)({},e),r=Object(x.a)(t.dateColumns);try{for(r.s();!(n=r.n()).done;){var i=n.value;null!=a[i]&&(a[i]=lr(a[i]))}}catch(v){r.e(v)}finally{r.f()}return a}))),or(r,t),r}function pr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a="".concat(n).concat(n?"_":"","export_").concat((new Date).toLocaleDateString("en-CA",{year:"numeric",month:"numeric",day:"numeric"}));if("spreadsheet"===t||"csv"===t){var r=Va.a.utils.book_new(),i=Va.a.utils.aoa_to_sheet(e.toSpreadsheet());Va.a.utils.book_append_sheet(r,i,"Instructors");var o="csv"===t?"csv":"xlsx",s=new File([Va.a.write(r,{type:"array",bookType:o})],"".concat(a,".").concat(o),{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});return s}if("json"===t){var c=new File([JSON.stringify(e.toJson(),null,4)],"".concat(a,".json"),{type:"application/json"});return c}throw new Error('Cannot process data to format "'.concat(t,'"; try "spreadsheet" or "json".'))}var mr={session:function(e){return{name:e.name,start_date:e.start_date,end_date:e.end_date,rate1:e.rate1,rate2:e.rate2}},contractTemplate:function(e){return{template_name:e.template_name,template_file:e.template_file}},instructor:function(e){return{first_name:e.first_name,last_name:e.last_name,utorid:e.utorid,email:e.email}},position:function(e){return{position_code:e.position_code,position_title:e.position_title,hours_per_assignment:e.hours_per_assignment,start_date:e.start_date,end_date:e.end_date,duties:e.duties,qualifications:e.qualifications,ad_hours_per_assignment:e.ad_hours_per_assignment,ad_num_assignments:e.ad_num_assignments,ad_open_date:e.ad_open_date,ad_close_date:e.ad_close_date,desired_num_assignments:e.desired_num_assignments,current_enrollment:e.current_enrollment,current_waitlisted:e.current_waitlisted,instructors:e.instructors.map((function(e){return e.utorid})),contract_template:e.contract_template.template_name}},wageChunk:function(e){return{start_date:e.start_date,end_date:e.end_date,rate:e.rate,hours:e.hours}},assignment:function(e,t){var n={utorid:e.applicant.utorid,position_code:e.position.position_code};e.contract_override_pdf&&(n.contract_override_pdf=e.contract_override_pdf);var a=e.position;return(e.start_date&&e.start_date!==a.start_date||e.end_date&&e.end_date!==a.end_date)&&(n.start_date=e.start_date||a.start_date,n.end_date=e.end_date||a.end_date),Array.isArray(e.wage_chunks)&&0!==e.wage_chunks.length?t&&function(e,t,n){if(!n||!Array.isArray(e))return!0;if(1===e.length){var a=e[0];if(a.start_date===t.start_date&&a.end_date===t.end_date&&(a.rate===n.rate1||a.rate===n.rate2))return!0}if(2===e.length){var r=Object(k.a)(e,2),i=r[0],o=r[1];if(!i.end_date||!i.end_date||!o.start_date||!o.end_date)return!1;if(i.end_date>o.start_date){var s=i;i=o,o=s}if(i.start_date!==t.start_date||o.end_date!==t.end_date)return!1;if("12-31"===(i.end_date||"").slice(5,10)&&"01-01"===(o.start_date||"").slice(5,10)&&i.rate===n.rate1&&o.rate===n.rate2)return!0}return!1}(e.wage_chunks,a,t)?n.hours=e.hours:n.wage_chunks=e.wage_chunks.map((function(e){return mr.wageChunk(e)})):n.hours=e.hours,n},applicant:function(e){return{first_name:e.first_name,last_name:e.last_name,utorid:e.utorid,email:e.email,student_number:e.student_number,phone:e.phone}}},fr=function(e,t){var n=(t||{}).id;return null!=n?Object(l.a)({id:n},e):e},hr=function(e,t){var n=(t||{}).id;return null!=n?Object(l.a)({id:n},e):e},_r=function(e,t){var n=t||{},a=n.id,r=n.instructors,i=n.contractTemplates;if(!Array.isArray(r))throw new Error("You must pass an array of instructors to reconstruct a position");if(!Array.isArray(i))throw new Error("You must pass an array of contract templates to reconstruct a position");var o={position_code:e.position_code,position_title:e.position_title,hours_per_assignment:e.hours_per_assignment,start_date:e.start_date,end_date:e.end_date,duties:e.duties,qualifications:e.qualifications,ad_hours_per_assignment:e.ad_hours_per_assignment,ad_num_assignments:e.ad_num_assignments,ad_open_date:e.ad_open_date,ad_close_date:e.ad_close_date,desired_num_assignments:e.desired_num_assignments,current_enrollment:e.current_enrollment,current_waitlisted:e.current_waitlisted};null!=a&&(o.id=a);var s=i.find((function(t){return t.template_name===e.contract_template}));if(null==s)throw new Error("Couldn't find contract template with name \"".concat(e.contract_template,'"'));o.contract_template=s;var c=e.instructors.map((function(e){var t=r.find((function(t){return t.utorid===e}));if(null==t)throw new Error('Could not find instructor with utorid "'.concat(e,'"'));return t}));return o.instructors=c,o},vr=function(e,t){var n=t||{},a=n.id,r=n.positions,i=n.applicants,o=n.session;if(!Array.isArray(r))throw new Error("You must pass an array of positions to reconstruct an assignment");if(!Array.isArray(i))throw new Error("You must pass an array of applicants to reconstruct an assignment");if(!o)throw new Error("You must pass a session to reconstruct an assignment");var s={contract_override_pdf:e.contract_override_pdf};null!=a&&(s.id=a),null!=e.hours&&(s.hours=e.hours);var c=r.find((function(t){return t.position_code===e.position_code}));if(null==c)throw new Error('Cannot find position with position code "'.concat(e.position_code,'"'));s.position=c;var u=i.find((function(t){return t.utorid===e.utorid}));if(null==u)throw new Error("Couldn't find applicant with UTORid \"".concat(e.utorid,'"'));if(s.applicant=u,Array.isArray(e.wage_chunks)){var l,d=0,p=Object(x.a)(e.wage_chunks);try{for(p.s();!(l=p.n()).done;){d+=l.value.hours}}catch(m){p.e(m)}finally{p.f()}s.hours=d,s.wage_chunks=e.wage_chunks}return s.start_date=e.start_date||c.start_date,s.end_date=e.end_date||c.end_date,s},gr=n(23),br={instructorsListFromField:function(e,t){var n=t.instructors;return Array.isArray(e)?e.map((function(e){var t=n.find((function(t){return t.utorid===e}));if(!t)throw new Error("Cannot find instructor with UTORid ".concat(e));return t})):(e=e.split(";").map((function(e){return e.trim()}))).map((function(e){return function(e,t){var n=t.find((function(t){return t.utorid===e}));if(n)return n;var a,r={},i=Object(x.a)(t);try{for(i.s();!(a=i.n()).done;){var o=a.value;r["".concat(o.last_name,", ").concat(o.first_name)]=o,r["".concat(o.first_name," ").concat(o.last_name)]=o}}catch(c){i.e(c)}finally{i.f()}if(n=rr()(Object.keys(r)).get(e,null,.7)){var s=n;return Array.isArray(n)&&(s=n[0][1]),r[s]}throw new Error('Could not find a match for "'.concat(e,'"'))}(e,n)}))},instructor:function(e,t){var n={status:"new",changes:{},obj:null},a=t.instructors.find((function(t){return t.utorid===e.utorid}));if(a){n.status="duplicate";var r=mr.instructor(a);for(var i in r){var o=i,s=r[o],c=e[o];wr(s,c)||(n.status="modified",n.changes[o]='"'.concat(s,'" \u2192 "').concat(c,'"'))}n.obj=fr(e,{id:a.id})}else n.obj=fr(e,{});return n},instructors:function(e,t){return e.map((function(e){return br.instructor(e,t)}))},position:function(e,t){var n=t.instructors,a=t.contractTemplates,r={status:"new",changes:{},obj:null},i=t.positions.find((function(t){return t.position_code===e.position_code}));if(i){r.status="duplicate";var o=mr.position(i);for(var s in o){var c=s,u=o[c],l=e[c];if(!wr(u,l)&&(r.status="modified",r.changes[c]='"'.concat(u,'" \u2192 "').concat(l,'"'),"start_date"!==c&&"end_date"!==c||(r.changes[c]='"'.concat((""+u).slice(0,10),'" \u2192 "').concat((""+l).slice(0,10),'"')),"instructors"===c)){var d=br.instructorsListFromField(u,{instructors:n}),p=br.instructorsListFromField(l,{instructors:n});r.changes[c]="".concat(d.map((function(e){return"".concat(e.last_name,", ").concat(e.first_name)})).join("; ")," \u2192 ").concat(p.map((function(e){return"".concat(e.last_name,", ").concat(e.first_name)})).join("; "))}}r.obj=_r(e,{id:i.id,instructors:n,contractTemplates:a})}else r.obj=_r(e,{instructors:n,contractTemplates:a});return r},positions:function(e,t){return e.map((function(e){return br.position(e,t)}))},assignments:function(e,t){return e.map((function(e){return br.assignment(e,t)}))},assignment:function(e,t){var n=t.assignments,a=t.positions,r=t.applicants,i=t.session,o={status:"new",changes:{},obj:null},s=yr(e),c=n.find((function(e){return yr(e)===s}));if(c){o.status="duplicate";var u=mr.assignment(c,i);for(var l in u){var d=l,p=u[d],m=e[d];if(!wr(p,m)){if(o.status="modified",o.changes[d]='"'.concat(p,'" \u2192 "').concat(m,'"'),"start_date"!==d&&"end_date"!==d||(o.changes[d]='"'.concat((""+p).slice(0,10),'" \u2192 "').concat((""+m).slice(0,10),'"')),"hours"===d&&null==m&&Array.isArray(e.wage_chunks)){var f,h=0,_=Object(x.a)(e.wage_chunks);try{for(_.s();!(f=_.n()).done;){h+=f.value.hours}}catch(v){_.e(v)}finally{_.f()}o.changes[d]=p===h?"".concat(h," (wage chunk change)"):"".concat(p," \u2192 ").concat(h," (wage chunk change)")}"wage_chunks"===d&&(o.changes[d]='"'.concat(JSON.stringify(p),'" \u2192 "').concat(JSON.stringify(m),'"'))}}o.obj=vr(e,{id:c.id,session:i,positions:a,applicants:r})}else o.obj=vr(e,{session:i,positions:a,applicants:r});return o},applicants:function(e,t){return e.map((function(e){return br.applicant(e,t)}))},applicant:function(e,t){var n={status:"new",changes:{},obj:null},a=t.applicants.find((function(t){return t.utorid===e.utorid}));if(a){n.status="duplicate";var r=mr.applicant(a);for(var i in r){var o=i,s=r[o],c=e[o];wr(s,c)||(n.status="modified",n.changes[o]='"'.concat(s,'" \u2192 "').concat(c,'"'))}n.obj=hr(e,{id:a.id})}else n.obj=hr(e,{});return n}};function yr(e){var t,n;return!function(e){return!!e.position_code}(e)?(t=e.position.position_code,n=e.applicant.utorid):(t=e.position_code,n=e.utorid),"".concat(t,"/").concat(n)}function wr(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if("number"===typeof e)return isNaN(e)&&isNaN(t)||e===t;if(!e&&!t)return!0;if(!e&&t||e&&!t)return!1;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;e=Object(gr.a)(e).sort(),t=Object(gr.a)(t).sort();for(var n=0;n<e.length;n++)if(!wr(e[n],t[n]))return!1;return!0}if("object"===typeof e){var a=Object.keys(e).sort();return!!wr(a,Object.keys(t).sort())&&a.every((function(n){return wr(e[n],t[n])}))}return!1}function Er(e){return e.filter((function(e){return"new"===e.status||"modified"===e.status})).map((function(e){return e.obj}))}function Or(){var e=Object(s.useDispatch)(),t=r.a.useState(null),n=Object(k.a)(t,2),a=n[0],i=n[1];return r.a.useEffect((function(){function t(){return(t=Object(g.a)(v.a.mark((function t(){var n,r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=function(e,t){return pr({toSpreadsheet:function(){return[["Last Name","First Name","UTORid","email"]].concat(e.map((function(e){return[e.last_name,e.first_name,e.utorid,e.email]})))},toJson:function(){return{instructors:e.map((function(e){return mr.instructor(e)}))}}},t,"instructors")},i(null),t.next=4,e(Re(n,a));case 4:r=t.sent,La.a.saveAs(r);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}a&&function(){return t.apply(this,arguments)}().catch(console.error)}),[a,e]),r.a.createElement(Ka,{onClick:function(e){i(e)}})}var Sr={keys:["first_name","last_name","utorid","email"],keyMap:{"First Name":"first_name","Given Name":"first_name",First:"first_name","Last Name":"last_name",Surname:"last_name","Family Name":"last_name",Last:"last_name"},requiredKeys:["utorid"],primaryKey:"utorid",dateColumns:[],baseName:"instructors"};function jr(){var e=Object(s.useDispatch)(),t=Object(s.useSelector)(Le),n=r.a.useState(null),a=Object(k.a)(n,2),i=a[0],o=a[1],c=r.a.useState(null),u=Object(k.a)(c,2),l=u[0],d=u[1],p=r.a.useState(null),m=Object(k.a)(p,2),f=m[0],h=m[1],_=r.a.useState(!1),b=Object(k.a)(_,2),y=b[0],w=b[1];function E(){return(E=Object(g.a)(v.a.mark((function t(){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Er(l),t.next=3,e(He(n));case 3:o(null);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}r.a.useEffect((function(){i||l&&d(null)}),[l,d,i]),r.a.useEffect((function(){if(i&&!y)try{h(null);var e=dr(i,Sr),n=br.instructors(e,{instructors:t});d(n)}catch(a){console.warn(a),h(a)}}),[i,t,y]);var O=r.a.createElement("p",null,"No data loaded...");if(f)O=r.a.createElement(Pa.a,{variant:"danger"},""+f);else if(l){var S=l.filter((function(e){return"new"===e.status})).map((function(e){return e.obj})),j=l.filter((function(e){return"modified"===e.status}));O=0===S.length&&0===j.length?r.a.createElement(Pa.a,{variant:"warning"},"No difference between imported instructors and those already on the system."):r.a.createElement(r.a.Fragment,null,S.length>0&&r.a.createElement(Pa.a,{variant:"primary"},r.a.createElement("span",{className:"mb-1"},"The following instructors will be"," ",r.a.createElement("strong",null,"added")),r.a.createElement(wa,{instructors:S})),j.length>0&&r.a.createElement(Pa.a,{variant:"info"},r.a.createElement("span",{className:"mb-1"},"The following instructors will be"," ",r.a.createElement("strong",null,"modified")),r.a.createElement(Ea,{modifiedInstructors:j})))}return r.a.createElement(nr,{onConfirm:function(){return E.apply(this,arguments)},onFileChange:o,dialogContent:O,setInProgress:w})}function Cr(e){var t=e.children,n=e.className,a=Object(je.a)(e,["children","className"]);return r.a.createElement("div",Object.assign({className:Ma()("page-content",n)},a),t)}function Ar(){var e=r.a.useState(!1),t=Object(k.a)(e,2),n=t[0],a=t[1],i=r.a.useState(!1),o=Object(k.a)(i,2),s=o[0],c=o[1];return r.a.createElement("div",{className:"page-body"},r.a.createElement(Za,null,r.a.createElement(Wa,null,"Available Actions"),r.a.createElement(Ya,{icon:r.a.createElement(ja.g,null),onClick:function(){a(!0)}},"Add Instructor"),r.a.createElement(Ya,{icon:r.a.createElement(ja.j,null),onClick:function(){return c(!s)},active:s},"Delete Instructor"),r.a.createElement(Wa,null,"Import/Export"),r.a.createElement(jr,null),r.a.createElement(Or,null)),r.a.createElement(Cr,null,r.a.createElement(Ha,{show:n,onHide:function(){a(!1)}}),r.a.createElement(Ia,{inDeleteMode:s})))}var Tr=n(924),kr=[{Header:"Position Code",accessor:"position_code"},{Header:"Position Title",accessor:"position_title"},{Header:"Hours",accessor:"hours_per_assignment",maxWidth:64},{Header:"Start",accessor:"start_date",Cell:function(e){return Ua(e.value)}},{Header:"End",accessor:"end_date",Cell:function(e){return Ua(e.value)}},{Header:"Instructors",accessor:"instructors",Cell:function(e){return r.a.createElement(r.a.Fragment,null,e.value.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="".concat(e.first_name," ").concat(e.last_name);return r.a.createElement(Tr.a,{variant:"secondary",className:"mr-1",key:t},t)})))}},{Header:"Enrolled",accessor:"current_enrollment",maxWidth:80},{Header:"Waitlisted",accessor:"current_waitlisted",maxWidth:90},{Header:"Contract Template",accessor:"contract_template.template_name"}];function xr(e){var t=e.modifiedPositions;return r.a.createElement(Nr,{positions:t,columns:pa(kr)})}function Nr(e){var t=e.positions,n=e.columns,a=void 0===n?kr:n;return r.a.createElement(la.a,{data:t,columns:a,showPagination:!1,minRows:1})}var Dr=[{Header:"Last Name",accessor:"applicant.last_name"},{Header:"First Name",accessor:"applicant.first_name"},{Header:"Position Code",accessor:"position.position_code"},{Header:"Hours",accessor:"hours"},{Header:"Start",accessor:"start_date",Cell:function(e){return Ua(e.value)||""}},{Header:"End",accessor:"end_date",Cell:function(e){return Ua(e.value)||""}}];function Ir(e){var t=e.modifiedAssignments;return r.a.createElement(Pr,{assignments:t,columns:pa(Dr)})}function Pr(e){var t=e.assignments,n=e.columns,a=void 0===n?Dr:n;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Assignments"),r.a.createElement(la.a,{data:t,columns:a,showPagination:!1,minRows:1}))}var Fr=n(925);var Ur=n(401),Rr=n.n(Ur),Hr=(n(849),Rr()(la.a)),qr=[{Header:"Last Name",accessor:"applicant.last_name"},{Header:"First Name",accessor:"applicant.first_name"},{Header:"Email",accessor:"applicant.email",width:250},{Header:"Student Number",accessor:"applicant.student_number",width:100},{Header:"Position",accessor:"position.position_code",width:130},{Header:"Hours",accessor:"hours",width:100},{Header:"Contract",accessor:"position.contract_template.template_name",width:100},{Header:"First Time?",accessor:"applicant.first_time_ta",Cell:function(e){return r.a.createElement("div",{style:{backgroundColor:"red"}},(""+e.value).toUpperCase())},width:100},{Header:"Status",accessor:"status",width:100},{Header:"Nag Count",accessor:"nag_count",width:100}];function Lr(e){var t=e.data,n=e.selected,a=e.setSelected,i=e.columns,o=void 0===i?qr:i,s=new Set(n),c=function(e){a(Object(gr.a)(e))},u=r.a.useState(""),l=Object(k.a)(u,2),d=l[0],p=l[1],m=r.a.useState(null),f=Object(k.a)(m,2),h=f[0],_=f[1],v=r.a.useState(!1),g=Object(k.a)(v,2),b=g[0],y=g[1];var w=d?t.filter((function(e){return function(e){return Object.values(e).map((function(e){return"string"===typeof e?e:Object.values(e).join(" ")})).join(" ").toLowerCase()}(e).includes(d.toLowerCase())})):t,E=r.a.useRef(null);function O(){if(!E)return console.warn("Trying to get data displayed in a ReactTable, but no ref has been created"),[];try{return E.getWrappedInstance().getResolvedState().sortedData.map((function(e){return e._original}))}catch(e){return[]}}r.a.useEffect((function(){var e=!1,t=O();t.length>0&&t.every((function(e){return s.has(e.id)}))&&(e=!0),y(e)}),[s,d]);var S=r.a.createElement(Hr,{ref:function(e){return E=e},data:w,columns:o,toggleSelection:function e(t,n,a){if(n){if(n&&null==h)return e(t,!1,a);var r=O().map((function(e){return e.id})),i=r.indexOf(h);if(-1===i)return e(t,!1,a);var o=r.indexOf(a.id),u=[Math.min(i,o),Math.max(i,o)],l=u[0],d=u[1];c(new Set([].concat(Object(gr.a)(s),Object(gr.a)(r.filter((function(e,t){return t<=d&&t>=l}))))))}else{var p=!s.has(a.id),m=new Set(s);!0===p?(m.add(a.id),c(m),_(a.id)):(m.delete(a.id),c(m),_(null))}},selectAll:b,toggleAll:function(){var e=O().map((function(e){return e.id}));if(b){var t,n=new Set(s),a=Object(x.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;n.delete(r)}}catch(i){a.e(i)}finally{a.f()}c(n)}else c(new Set([].concat(Object(gr.a)(s),Object(gr.a)(e))))},isSelected:function(e){return s.has(e)},selectType:"checkbox",keyField:"id",minRows:1,showPagination:!1});return null==n&&(S=r.a.createElement(la.a,{columns:o,data:w})),r.a.createElement("div",null,"Filter:"," ",r.a.createElement("input",{type:"text",onChange:function(e){return p(e.target.value)}}),S)}function Br(e){var t="Edit ".concat(e.column.Header),n=e.upsertApplicant,a=e.field;return r.a.createElement(xa,{title:t,value:e.value||"",onChange:function(t){var r=e.original.applicant.id;n(Object(te.a)({id:r},a,t))}},e.value)}function Mr(e){var t="Edit ".concat(e.column.Header),n=e.upsertAssignment,a=e.field,i=e.original.active_offer_status;return r.a.createElement(xa,{title:t,value:e.value||"",onChange:function(t){var r=e.original.id;n(Object(te.a)({id:r},a,t))},editable:!i},e.value)}var Gr=Object(s.connect)((function(e){return{data:Xt(e),selected:ra(e).selectedAssignmentIds}}),{upsertApplicant:ye,upsertAssignment:Kt,setSelected:function(e){return{type:"SET_SELECTED_ROWS",payload:e}}})((function(e){var t=e.upsertApplicant,n=e.upsertAssignment,a=Object(je.a)(e,["upsertApplicant","upsertAssignment"]);function i(e){return function(n){return r.a.createElement(Br,Object.assign({field:e,upsertApplicant:t},n))}}var o,s=[{Header:"Last Name",accessor:"applicant.last_name",Cell:i("last_name")},{Header:"First Name",accessor:"applicant.first_name",Cell:i("first_name")},{Header:"Email",accessor:"applicant.email",Cell:i("email")},{Header:"Position",accessor:"position.position_code"},{Header:"Hours",accessor:"hours",Cell:(o="hours",function(e){return r.a.createElement(Mr,Object.assign({field:o,upsertAssignment:n},e))})},{Header:"Status",id:"status",accessor:function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.charAt(0).toUpperCase()+e.slice(1)}(e.active_offer_status||"")}}];return r.a.createElement(Lr,Object.assign({columns:s},a))})),Zr=n(74),Wr=(n(252),n(253),{position_code:"",position_title:"",hours_per_assignment:0,contract_template:{},duties:"Some combination of marking, invigilating, tutorials, office hours, and the help centre.",instructors:[]});function Yr(e){var t=e.position,n=e.setPosition,a=e.instructors,i=void 0===a?[]:a,o=e.contractTemplates,s=void 0===o?[]:o,c=e.defaultContractTemplate,u=void 0===c?{}:c,d=Object(l.a)(Object(l.a)({},Wr),t);var p=sa(d,n);return r.a.createElement(ia.a,null,r.a.createElement(ca,null,p("Course Code (e.g. MAT135H1F)","position_code"),p("Course Title","position_title")),r.a.createElement(ca,null,p("Start Date","start_date","date"),p("End Date","end_date","date"),p("Hours per Assignment","hours_per_assignment","number")),r.a.createElement(ia.a.Group,null,r.a.createElement(ia.a.Label,null,"Instructors"),r.a.createElement(Zr.Typeahead,{id:"instructors-input",ignoreDiacritics:!0,multiple:!0,placeholder:"Instructors...",labelKey:function(e){return"".concat(e.first_name," ").concat(e.last_name)},selected:d.instructors,options:i,onChange:function(e){n(Object(l.a)(Object(l.a)({},d),{},{instructors:e}))}})),r.a.createElement(ia.a.Group,null,r.a.createElement(ia.a.Label,null,"Contract Template (which offer template will be used)"),r.a.createElement(Zr.Typeahead,{id:"instructors-input",ignoreDiacritics:!0,multiple:!0,placeholder:"Contract template...",labelKey:function(e){return"".concat(e.template_name)},selected:[d.contract_template],options:s,onChange:function(e){var t=e[e.length-1]||u;n(Object(l.a)(Object(l.a)({},d),{},{contract_template:t}))}})),r.a.createElement("h3",null,"Ad-related Info"),r.a.createElement(ca,null,p("Duties","duties")),r.a.createElement(ca,null,p("Qualifications","qualifications")),r.a.createElement("h3",null,"Admin Info"),r.a.createElement(ca,null,p("Current Enrollment","current_enrollment","number"),p("Waitlisted","current_waitlisted","number"),p("Desired Number of Assignments","desired_num_assignments","number")))}var Jr={note:"",position:{id:null},position_id:null,applicant:{id:null},applicant_id:null};function Kr(e){var t=e.assignment,n=e.setAssignment,a=e.applicants,i=e.positions,o=Object(l.a)(Object(l.a)({},Jr),t);var s=sa(o,n);return r.a.createElement(ia.a,null,r.a.createElement(ca,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(ia.a.Label,null,"Position"),r.a.createElement(Zr.Typeahead,{id:"position-input",ignoreDiacritics:!0,placeholder:"Position...",multiple:!0,labelKey:function(e){return"".concat(e.position_code," (").concat(e.position_title,")")},selected:null==o.position.id?[]:[o.position],options:i,onChange:function(e){var t=e[e.length-1]||{id:null};n(Object(l.a)(Object(l.a)({},o),{},{position:t,position_id:t.id,hours:t.hours_per_assignment,start_date:t.start_date,end_date:t.end_date}))}})),r.a.createElement(r.a.Fragment,null,r.a.createElement(ia.a.Label,null,"Applicant"),r.a.createElement(Zr.Typeahead,{id:"applicant-input",ignoreDiacritics:!0,placeholder:"Applicant...",multiple:!0,labelKey:function(e){return"".concat(e.first_name," ").concat(e.last_name)},selected:null==o.applicant.id?[]:[o.applicant],options:a,onChange:function(e){var t=e[e.length-1]||{id:null};n(Object(l.a)(Object(l.a)({},o),{},{applicant:t,applicant_id:t.id}))}}))),r.a.createElement(ca,null,s("Hours","hours","number")),r.a.createElement("h4",null,"Optional Settings"),r.a.createElement(ca,null,s("Start Date","start_date","date"),s("End Date","end_date","date")))}var zr={template_name:"",template_file:""};function Vr(e){var t=e.contractTemplate,n=e.setContractTemplate,a=e.availableTemplates,i=void 0===a?[]:a,o=Object(l.a)(Object(l.a)({},zr),t);var s=sa(o,n);return r.a.createElement(ia.a,null,r.a.createElement(ca,null,s('Template Name (e.g. "OTO" "Invigilate")',"template_name")),r.a.createElement(ca,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(ia.a.Label,{title:"This file is stored on the server; you can edit it there."},"Template File"),r.a.createElement(Zr.Typeahead,{id:"file-name-input",ignoreDiacritics:!0,placeholder:"File name...",multiple:!0,labelKey:function(e){return"".concat(e)},selected:o.template_file?[o.template_file]:[],options:i.map((function(e){return e.template_file})),onChange:function(e){var t=e[e.length-1]||"";n(Object(l.a)(Object(l.a)({},o),{},{template_file:t}))}}))))}var Qr=Object(s.connect)((function(e){return{applicants:Se(e)}}))(ha),$r=Object(s.connect)((function(e){return{contractTemplates:Xe(e)}}))(ba),Xr=Object(s.connect)((function(e){return{positions:_t(e)}}))(Nr),ei=Object(s.connect)((function(e){return{assignments:Xt(e)}}))(Pr),ti=Object(s.connect)((function(e){return{data:ra(e).selectedAssignmentIds}}))((function(e){var t=e.data;return r.a.createElement(Fr.a,{id:"dropdown-basic-button",title:"Email"},r.a.createElement(Vn.a.Item,{onClick:function(){return function(){throw console.log("data read from redux: "+t),new Error("Email function not implemented!")}()}},"Email Blank"),r.a.createElement(Vn.a.Item,{onClick:function(){return function(){throw new Error("Email contract not implemented!")}()}},"Email Contract"),r.a.createElement(Vn.a.Item,{onClick:function(){return function(){throw new Error("Nag offer function not implemented!")}()}},"Nag Offers"))})),ni=Object(s.connect)((function(e){return{instructors:Le(e)}}))(Yr),ai=Object(s.connect)((function(e){return{positions:_t(e),applicants:Se(e)}}))(Kr);function ri(e){var t=e.children,n=e.title;return r.a.createElement("div",{style:{margin:5}},r.a.createElement("h5",null,"The"," ",r.a.createElement("span",{style:{color:"green",fontFamily:"mono"}},n)," ","Component"),r.a.createElement("div",{style:{border:"1px solid black",padding:5}},t))}var ii=function(){var e=r.a.useState({position_id:0,applicant_id:0}),t=Object(k.a)(e,2),n=t[0],a=t[1],i=r.a.useState({position_code:""}),o=Object(k.a)(i,2),s=o[0],c=o[1],u=r.a.useState({last_name:"Baggins",first_name:"Bilbo",utorid:"bilbob"}),l=Object(k.a)(u,2),d=l[0],p=l[1],m=r.a.useState({name:""}),f=Object(k.a)(m,2),h=f[0],_=f[1],v=r.a.useState({}),g=Object(k.a)(v,2),b=g[0],y=g[1];return r.a.createElement("div",null,r.a.createElement(ri,{title:"ContractTemplateEditor"},r.a.createElement(Vr,{contractTemplate:b,setContractTemplate:y,availableTemplates:[{template_file:"/math/OTO.html"},{template_file:"/cs/invigilate.html"}]})),r.a.createElement(ri,{title:"AssignmentEditor"},r.a.createElement(ai,{assignment:n,setAssignment:a})),r.a.createElement(ri,{title:"SessionEditor"},r.a.createElement(ua,{session:h,setSession:_})),r.a.createElement(ri,{title:"InstructorEditor"},r.a.createElement(Sa,{instructor:d,setInstructor:p})),r.a.createElement(ri,{title:"PositionEditor"},r.a.createElement(ni,{position:s,setPosition:c})),r.a.createElement(ri,{title:"EditableField"},r.a.createElement(xa,{title:"Edit this super awesome content",value:45,onChange:console.log},"Edit me!")),r.a.createElement(ri,{title:"ApplicantsList"},r.a.createElement(Qr,null)),r.a.createElement(ri,{title:"PostitionTemplatesList"},r.a.createElement($r,null)),r.a.createElement(ri,{title:"InstuctorsList"},r.a.createElement(Ia,null)),r.a.createElement(ri,{title:"PositionsList"},r.a.createElement(Xr,null)),r.a.createElement(ri,{title:"AssignmentsList"},r.a.createElement(ei,null)),r.a.createElement(ri,{title:"ImportButton"},r.a.createElement(tr,null)),r.a.createElement(ri,{title:"EmailButton"},r.a.createElement(ti,null)),r.a.createElement(ri,{title:"OfferTable"},r.a.createElement(Gr,null)))};var oi=Object(s.connect)((function(e,t){return{positions:_t(e),listRenderer:t.listRenderer}}))((function(e){var t=e.data,n=e.listRenderer,i=e.filterFunc,o=Object(je.a)(e,["data","listRenderer","filterFunc"]),s=n,c=Object(a.useState)(""),u=Object(k.a)(c,2),l=u[0],d=u[1],p=i(t,l);return r.a.createElement("div",null,r.a.createElement("input",{type:"text",value:l,onChange:function(e){return d(e.target.value)}}),r.a.createElement(s,Object.assign({data:p},o)))}));var si=function(){return r.a.createElement("div",null,r.a.createElement(oi,{listRenderer:Nr,filterFunc:function(e,t){return e}}))};var ci={name:"",start_date:"",end_date:"",rate1:"",rate2:""};var ui=Object(s.connect)((function(e){return{sessions:xn(e)}}),{upsertSession:An})((function(e){var t=e.show,n=e.onHide,a=void 0===n?function(){}:n,i=e.sessions,o=e.upsertSession,s=r.a.useState(ci),c=Object(k.a)(s,2),u=c[0],l=c[1];r.a.useEffect((function(){t||l(ci)}),[t]);var d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={delayShow:"",immediateShow:""};Fa(e.name)&&Fa(e.start_date)&&Fa(e.end_date)||(n.delayShow="A first name, start date, and end date is required");var a=t.find((function(t){return Fa(t.name)===Fa(e.name)}));return a&&(n.immediateShow=r.a.createElement("p",null,"Another session exists with name=",e.name)),n}(u,i);return r.a.createElement(Aa.a,{show:t,onHide:a},r.a.createElement(Aa.a.Header,{closeButton:!0},r.a.createElement(Aa.a.Title,null,"Add Session")),r.a.createElement(Aa.a.Body,null,r.a.createElement(ua,{session:u,setSession:l}),d.immediateShow?r.a.createElement(Pa.a,{variant:"danger"},d.immediateShow):null),r.a.createElement(Aa.a.Footer,null,r.a.createElement(h.a,{onClick:a,variant:"light"},"Cancel"),r.a.createElement(h.a,{onClick:function(){o(u),a()},title:d.delayShow||"Create Session",disabled:!!d.delayShow||!!d.immediateShow},"Create Session")))})),li=[{Header:"Name",accessor:"name"},{Header:"Start",accessor:"start_date",Cell:function(e){return Ua(e.value)}},{Header:"End",accessor:"end_date",Cell:function(e){return Ua(e.value)}},{Header:"Rate (Pre-January)",accessor:"rate1"},{Header:"Rate (Post-January)",accessor:"rate2"}];var di=Object(s.connect)((function(e){return{sessions:xn(e)}}))((function(e){var t=e.sessions,n=e.columns,a=void 0===n?li:n;return r.a.createElement(la.a,{data:t,columns:a,showPagination:!1,minRows:1})}));function pi(){var e=r.a.useState(!1),t=Object(k.a)(e,2),n=t[0],a=t[1];return r.a.createElement("div",{className:"page-body"},r.a.createElement(Za,null,r.a.createElement(Wa,null,"Available Actions"),r.a.createElement(Ya,{icon:r.a.createElement(ja.g,null),onClick:function(){a(!0)}},"Add Session")),r.a.createElement(Cr,null,r.a.createElement(ui,{show:n,onHide:function(){a(!1)}}),r.a.createElement(di,null)))}var mi={position_code:"",position_title:"",hours_per_assignment:0,contract_template_id:null,duties:"Some combination of marking, invigilating, tutorials, office hours, and the help centre.",instructors:[]};var fi=Object(s.connect)((function(e){return{positions:_t(e),instructors:Le(e),contractTemplates:Xe(e)}}),{upsertPosition:dt})((function(e){var t=e.show,n=e.onHide,a=void 0===n?function(){}:n,i=e.positions,o=e.upsertPosition,s=e.instructors,c=e.contractTemplates,u=r.a.useState(mi),l=Object(k.a)(u,2),d=l[0],p=l[1];r.a.useEffect((function(){t||p(mi)}),[t]),r.a.useEffect((function(){var e=c.find((function(e){return"standard"===e.template_name.toLowerCase()}))||c.find((function(e){return"default"===e.template_name.toLowerCase()}))||c.find((function(e){return e.template_name.toLowerCase().includes("standard")}))||c.find((function(e){return e.template_name.toLowerCase().includes("default")}))||c[0];e&&(mi.contract_template=e,mi.contract_template_id=e.id)}),[c]);var m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={delayShow:"",immediateShow:""};Fa(e.position_code)&&Fa(e.start_date)&&Fa(e.end_date)||(n.delayShow="A position code, start date, and end date is required");var a=t.find((function(t){return Fa(t.position_code)===Fa(e.position_code)}));return a&&(n.immediateShow=r.a.createElement("p",null,"Another position exists with name=",e.position_code)),n}(d,i);return r.a.createElement(Aa.a,{show:t,onHide:a},r.a.createElement(Aa.a.Header,{closeButton:!0},r.a.createElement(Aa.a.Title,null,"Add Position")),r.a.createElement(Aa.a.Body,null,r.a.createElement(Yr,{position:d,setPosition:p,instructors:s,contractTemplates:c,defaultContractTemplate:mi.contract_template}),m.immediateShow?r.a.createElement(Pa.a,{variant:"danger"},m.immediateShow):null),r.a.createElement(Aa.a.Footer,null,r.a.createElement(h.a,{onClick:a,variant:"light"},"Cancel"),r.a.createElement(h.a,{onClick:function(){o(d),a()},title:m.delayShow||"Create Position",disabled:!!m.delayShow||!!m.immediateShow},"Create Position")))})),hi=Object(s.connect)((function(e){return{positions:_t(e)}}))(Nr);function _i(){var e=Object(s.useDispatch)(),t=r.a.useState(null),n=Object(k.a)(t,2),a=n[0],i=n[1];return r.a.useEffect((function(){function t(){return(t=Object(g.a)(v.a.mark((function t(){var n,r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=function(e,t){return pr({toSpreadsheet:function(){return[["Position Code","Position Title","Start Date","End Date","Hours Per Assignment","Number of Assignments","Contract Template","Instructors","Duties","Qualifications","Current Enrollment","Current Waitlisted"]].concat(e.map((function(e){return[e.position_code,e.position_title,e.start_date&&new Date(e.start_date).toJSON().slice(0,10),e.end_date&&new Date(e.end_date).toJSON().slice(0,10),e.hours_per_assignment,e.desired_num_assignments,e.contract_template.template_name,e.instructors.map((function(e){return"".concat(e.last_name,", ").concat(e.first_name)})).join("; "),e.duties||"",e.qualifications||"",e.current_enrollment,e.current_waitlisted]})))},toJson:function(){return{positions:e.map((function(e){return mr.position(e)}))}}},t,"positions")},i(null),t.next=4,e(pt(n,a));case 4:r=t.sent,La.a.saveAs(r);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}a&&function(){return t.apply(this,arguments)}().catch(console.error)}),[a,e]),r.a.createElement(Ka,{onClick:function(e){i(e)}})}var vi={keys:["position_code","position_title","start_date","end_date","hours_per_assignment","desired_num_assignments","contract_template","instructors","duties","qualifications","current_enrollment","current_waitlisted","ad_open_date","ad_close_date","ad_hours_per_assignment","ad_num_assignments"],keyMap:{"Position Code":"position_code","Course Code":"position_code","Course Name":"position_code","Position Title":"position_title","Start Date":"start_date",Start:"start_date","End Date":"end_date",End:"end_date","Hours Per Assignment":"hours_per_assignment","Number of Assignments":"desired_num_assignments","Contract Template":"contract_template","Current Enrollment":"current_enrollment","Current Waitlisted":"current_waitlisted"},dateColumns:["start_date","end_date"],requiredKeys:["position_code","contract_template"],primaryKey:"position_code",baseName:"positions"};function gi(){var e=Object(s.useDispatch)(),t=Object(s.useSelector)(_t),n=Object(s.useSelector)(Le),a=Object(s.useSelector)(Xe),i=r.a.useState(null),o=Object(k.a)(i,2),c=o[0],u=o[1],l=r.a.useState(null),d=Object(k.a)(l,2),p=d[0],m=d[1],f=r.a.useState(null),h=Object(k.a)(f,2),_=h[0],b=h[1],y=r.a.useState(!1),w=Object(k.a)(y,2),E=w[0],O=w[1];function S(){return(S=Object(g.a)(v.a.mark((function t(){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Er(p),t.next=3,e(mt(n));case 3:u(null);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}r.a.useEffect((function(){c||p&&m(null)}),[p,m,c]),r.a.useEffect((function(){if(c&&!E)try{b(null);var e,r=dr(c,vi),i=Object(x.a)(r);try{for(i.s();!(e=i.n()).done;){var o=e.value;o.instructors=br.instructorsListFromField(o.instructors||[],{instructors:n}).map((function(e){return e.utorid}))}}catch(u){i.e(u)}finally{i.f()}var s=br.positions(r,{positions:t,instructors:n,contractTemplates:a});m(s)}catch(l){console.warn(l),b(l)}}),[c,t,a,n,E]);var j=r.a.createElement("p",null,"No data loaded...");if(_)j=r.a.createElement(Pa.a,{variant:"danger"},""+_);else if(p){var C=p.filter((function(e){return"new"===e.status})).map((function(e){return e.obj})),A=p.filter((function(e){return"modified"===e.status}));j=0===C.length&&0===A.length?r.a.createElement(Pa.a,{variant:"warning"},"No difference between imported positions and those already on the system."):r.a.createElement(r.a.Fragment,null,C.length>0&&r.a.createElement(Pa.a,{variant:"primary"},r.a.createElement("span",{className:"mb-1"},"The following positions will be"," ",r.a.createElement("strong",null,"added")),r.a.createElement(Nr,{positions:C})),A.length>0&&r.a.createElement(Pa.a,{variant:"info"},r.a.createElement("span",{className:"mb-1"},"The following positions will be"," ",r.a.createElement("strong",null,"modified")),r.a.createElement(xr,{modifiedPositions:A})))}return r.a.createElement(nr,{onConfirm:function(){return S.apply(this,arguments)},onFileChange:u,dialogContent:j,setInProgress:O})}function bi(){var e=r.a.useState(!1),t=Object(k.a)(e,2),n=t[0],a=t[1];return r.a.createElement("div",{className:"page-body"},r.a.createElement(Za,null,r.a.createElement(Wa,null,"Available Actions"),r.a.createElement(Ya,{icon:r.a.createElement(ja.g,null),onClick:function(){a(!0)}},"Add Position"),r.a.createElement(Wa,null,"Import/Export"),r.a.createElement(gi,null),r.a.createElement(_i,null)),r.a.createElement(Cr,null,r.a.createElement(fi,{show:n,onHide:function(){a(!1)}}),r.a.createElement(hi,null)))}var yi={position:{id:null},applicant:{id:null},position_id:-1,applicant_id:-1};var wi=Object(s.connect)((function(e){return{positions:_t(e),applicants:Se(e),assignments:Xt(e)}}),{upsertAssignment:Kt})((function(e){var t=e.show,n=e.onHide,a=e.positions,i=e.applicants,o=e.assignments,s=e.upsertAssignment,c=r.a.useState(yi),u=Object(k.a)(c,2),l=u[0],d=u[1];r.a.useEffect((function(){t||d(yi)}),[t]);var p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={delayShow:"",immediateShow:""};Fa(e.position_id)&&Fa(e.applicant_id)||(n.delayShow="A position and applicant is required");var a=t.find((function(t){return Fa((t.position||{}).id)===Fa((e.position||{}).id)&&Fa((t.applicant||{}).id)===Fa((e.applicant||{}).id)}));return a&&(n.immediateShow=r.a.createElement("p",null,"Another assignment exists with"," ",r.a.createElement("b",null,"applicant=",e.applicant.first_name," ",e.applicant.last_name)," ","and ",r.a.createElement("b",null,"position=",e.position.position_code))),n}(l,o);return r.a.createElement(Aa.a,{show:t,onHide:n},r.a.createElement(Aa.a.Header,{closeButton:!0},r.a.createElement(Aa.a.Title,null,"Add Assignment")),r.a.createElement(Aa.a.Body,null,r.a.createElement(Kr,{positions:a,applicants:i,assignment:l,setAssignment:d}),p.immediateShow?r.a.createElement(Pa.a,{variant:"danger"},p.immediateShow):null),r.a.createElement(Aa.a.Footer,null,r.a.createElement(h.a,{onClick:n,variant:"light"},"Cancel"),r.a.createElement(h.a,{onClick:function(){s(l),n()},title:p.delayShow||"Create Position",disabled:!!p.delayShow||!!p.immediateShow},"Create Assignment")))}));var Ei=Object(s.connect)((function(e){return{wageChunksByAssignment:Ht(e)}}),{fetchWageChunksForAssignment:Ft,upsertWageChunksForAssignment:Ut})((function(e){var t=e.assignment,n=e.wageChunksByAssignment,a=e.fetchWageChunksForAssignment,i=e.upsertWageChunksForAssignment,o=r.a.useState([]),s=Object(k.a)(o,2),c=s[0],u=s[1];function d(e){return function(n){var a=c.map((function(t,a){return e!==a?t:Object(l.a)(Object(l.a)({},t),{},{hours:+n})}));i(t,a)}}return r.a.useEffect((function(){a(t)}),[t]),r.a.useEffect((function(){u(n(t))}),[t,n,a]),r.a.createElement("div",null,r.a.createElement("h5",null,t.applicant.first_name," ",t.applicant.last_name),r.a.createElement("div",null,t.position.position_code," ",t.position.position_name),r.a.createElement("div",null,t.hours," hours"),"Wage Chunks:",r.a.createElement("ul",null,c.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(xa,{title:"Hours",value:e.hours,onChange:d(t)},e.hours)," ","hours at a rate of $",e.rate," from ",e.start_date," ","to ",e.end_date)}))))}));var Oi=Object(s.connect)((function(e){var t=ra(e).selectedAssignmentIds;return{assignments:Xt(e).filter((function(e){return t.includes(e.id)}))}}))((function(e){var t=e.assignments,n=r.a.useState([]),a=Object(k.a)(n,2),i=a[0],o=a[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{onClick:function(){return o(t)}},"View Selected Assignment Details"),i.map((function(e,t){return r.a.createElement(Ei,{assignment:e,key:t})})))}));var Si=Object(s.connect)((function(e){var t=ra(e).selectedAssignmentIds;return{assignments:Xt(e).filter((function(e){return t.includes(e.id)}))}}),{offerForAssignmentCreate:Mn,offerForAssignmentEmail:Gn,offerForAssignmentNag:Zn,offerForAssignmentWithdraw:Bn,setOfferForAssignmentAccepted:qn,setOfferForAssignmentRejected:Ln})((function(e){var t=e.assignments,n=e.offerForAssignmentCreate,a=e.offerForAssignmentEmail,i=e.offerForAssignmentNag,o=e.offerForAssignmentWithdraw,s=e.setOfferForAssignmentAccepted,c=e.setOfferForAssignmentRejected;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ya,{icon:r.a.createElement(ja.m,null),onClick:function(){var e,a=Object(x.a)(t);try{for(a.s();!(e=a.n()).done;){var r=e.value;n(r)}}catch(i){a.e(i)}finally{a.f()}}},"Create Offer"),r.a.createElement(Ya,{icon:r.a.createElement(ja.n,null),onClick:function(){var e,n=Object(x.a)(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;o(a)}}catch(r){n.e(r)}finally{n.f()}}},"Withdraw Offer"),r.a.createElement(Ya,{icon:r.a.createElement(ja.e,null),onClick:function(){var e,n=Object(x.a)(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;a(r)}}catch(i){n.e(i)}finally{n.f()}}},"Email Offer"),r.a.createElement(Ya,{icon:r.a.createElement(ja.l,null),onClick:function(){var e,n=Object(x.a)(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;i(a)}}catch(r){n.e(r)}finally{n.f()}}},"Nag Offer"),r.a.createElement(Ya,{icon:r.a.createElement(ja.b,null),onClick:function(){var e,n=Object(x.a)(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;s(a)}}catch(r){n.e(r)}finally{n.f()}}},"Set as Accepted"),r.a.createElement(Ya,{icon:r.a.createElement(ja.a,null),onClick:function(){var e,n=Object(x.a)(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;c(a)}}catch(r){n.e(r)}finally{n.f()}}},"Set as Rejected"))}));function ji(){var e=Object(s.useDispatch)(),t=Object(s.useSelector)(Nn),n=r.a.useState(null),a=Object(k.a)(n,2),i=a[0],o=a[1];return r.a.useEffect((function(){function n(){return(n=Object(g.a)(v.a.mark((function n(){var a,r;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=function(e,n){var a=e.map((function(e){return{first_name:e.applicant.first_name,last_name:e.applicant.first_name,utorid:e.applicant.utorid,position_code:e.position.position_code,start_date:e.start_date,end_date:e.end_date,contract_template:e.contract_override_pdf?null:e.position.contract_template.template_name,contract_override_pdf:e.contract_override_pdf,hours:e.hours,active_offer_status:e.active_offer_status,wage_chunks:e.wage_chunks.map((function(e){return{hours:e.hours,rate:e.rate,start_date:e.start_date,end_date:e.end_date}}))}}));return pr({toSpreadsheet:function(){return[["Last Name","First Name","UTORid","Position Code","Start Date","End Date","Hours","Contract Template","Contract Override PDF","Offer Status"]].concat(a.map((function(e){return[e.first_name,e.last_name,e.utorid,e.position_code,e.start_date&&new Date(e.start_date).toJSON().slice(0,10),e.end_date&&new Date(e.end_date).toJSON().slice(0,10),e.hours,e.contract_template,e.contract_override_pdf,e.active_offer_status]})))},toJson:function(){return{assignments:e.map((function(e){return mr.assignment(e,t)}))}}},n,"assignments")},o(null),n.next=4,e(zt(a,i));case 4:r=n.sent,La.a.saveAs(r);case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}i&&function(){return n.apply(this,arguments)}().catch(console.error)}),[i,e,t]),r.a.createElement(Ka,{onClick:function(e){o(e)}})}var Ci={keys:["utorid","position_code","start_date","end_date","contract_template","contract_override_pdf","hours","wage_chunks"],keyMap:{"Position Code":"position_code","Course Name":"position_code","Start Date":"start_date",Start:"start_date","End Date":"end_date",End:"end_date",Hours:"hours","Contract Override PDF":"contract_override_pdf"},dateColumns:["start_date","end_date"],requiredKeys:["position_code","utorid"],primaryKey:["utorid","position_code"],baseName:"assignments"};function Ai(){var e=Object(s.useDispatch)(),t=Object(s.useSelector)(Xt),n=Object(s.useSelector)(Se),a=Object(s.useSelector)(_t),i=Object(s.useSelector)(Nn),o=r.a.useState(null),c=Object(k.a)(o,2),u=c[0],l=c[1],d=r.a.useState(null),p=Object(k.a)(d,2),m=p[0],f=p[1],h=r.a.useState(null),_=Object(k.a)(h,2),b=_[0],y=_[1],w=r.a.useState(!1),E=Object(k.a)(w,2),O=E[0],S=E[1];function j(){return(j=Object(g.a)(v.a.mark((function t(){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Er(m),t.next=3,e(Vt(n));case 3:l(null);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}r.a.useEffect((function(){u||m&&f(null)}),[m,f,u]),r.a.useEffect((function(){if(u&&!O)try{y(null);var e,r=dr(u,Ci),o=Object(x.a)(r);try{for(o.s();!(e=o.n()).done;){var s=e.value;s.hours&&(s.hours=+s.hours)}}catch(l){o.e(l)}finally{o.f()}var c=br.assignments(r,{assignments:t,positions:a,applicants:n,session:i});f(c)}catch(d){console.warn(d),y(d)}}),[u,t,a,n,i,O]);var C=r.a.createElement("p",null,"No data loaded...");if(b)C=r.a.createElement(Pa.a,{variant:"danger"},""+b);else if(m){var A=m.filter((function(e){return"new"===e.status})).map((function(e){return e.obj})),T=m.filter((function(e){return"modified"===e.status}));C=0===A.length&&0===T.length?r.a.createElement(Pa.a,{variant:"warning"},"No difference between imported assignments and those already on the system."):r.a.createElement(r.a.Fragment,null,A.length>0&&r.a.createElement(Pa.a,{variant:"primary"},r.a.createElement("span",{className:"mb-1"},"The following assignments will be"," ",r.a.createElement("strong",null,"added")),r.a.createElement(Pr,{assignments:A})),T.length>0&&r.a.createElement(Pa.a,{variant:"info"},r.a.createElement("span",{className:"mb-1"},"The following assignments will be"," ",r.a.createElement("strong",null,"modified")),r.a.createElement(Ir,{modifiedAssignments:T})))}return r.a.createElement(nr,{onConfirm:function(){return j.apply(this,arguments)},onFileChange:l,dialogContent:C,setInProgress:S})}function Ti(){var e=r.a.useState(!1),t=Object(k.a)(e,2),n=t[0],a=t[1];return r.a.createElement("div",{className:"page-body"},r.a.createElement(Za,null,r.a.createElement(Wa,null,"Available Actions"),r.a.createElement(Ya,{icon:r.a.createElement(ja.g,null),onClick:function(){a(!0)}},"Add Assignment"),r.a.createElement(Wa,null,"Import/Export"),r.a.createElement(Ai,null),r.a.createElement(ji,null),r.a.createElement(Wa,null,"Selected Assignment Actions"),r.a.createElement(Si,null)),r.a.createElement(Cr,null,r.a.createElement(Oi,null),r.a.createElement(Gr,null),r.a.createElement(wi,{show:n,onHide:function(){a(!1)}})))}var ki={template_name:"",template_file:""};var xi=Object(s.connect)((function(e){return{contractTemplates:Xe(e),availableTemplates:et(e)}}),{upsertContractTemplate:Ke,fetchAllContractTemplates:ze})((function(e){var t=e.show,n=e.onHide,a=void 0===n?function(){}:n,i=e.contractTemplates,o=e.availableTemplates,s=e.upsertContractTemplate,c=e.fetchAllContractTemplates,u=r.a.useState(ki),l=Object(k.a)(u,2),d=l[0],p=l[1];r.a.useEffect((function(){t?c():p(ki)}),[t,c]);var m=function(e,t){var n={delayShow:"",immediateShow:""};Fa(e.template_name)&&Fa(e.template_file)||(n.delayShow="A template name and template file is required");var a=t.find((function(t){return Fa(t.template_name)===Fa(e.template_name)}));return a&&(n.immediateShow=r.a.createElement("p",null,"Another contract template exists with name=",e.template_name,":"," ",r.a.createElement("b",null,a.template_name," ",a.template_file))),n}(d,i);return r.a.createElement(Aa.a,{show:t,onHide:a},r.a.createElement(Aa.a.Header,{closeButton:!0},r.a.createElement(Aa.a.Title,null,"Add Contract Template")),r.a.createElement(Aa.a.Body,null,r.a.createElement(Vr,{contractTemplate:d,setContractTemplate:p,availableTemplates:o}),m.immediateShow?r.a.createElement(Pa.a,{variant:"danger"},m.immediateShow):null),r.a.createElement(Aa.a.Footer,null,r.a.createElement(h.a,{onClick:a,variant:"light"},"Cancel"),r.a.createElement(h.a,{onClick:function(){s(d),a()},title:m.delayShow||"Create Contract Template",disabled:!!m.delayShow||!!m.immediateShow},"Create Contract Template")))})),Ni=n(179);function Di(e){var t=e.show,n=e.onClose,a=e.template_id,i=r.a.useState(!1),o=Object(k.a)(i,2),c=o[0],u=o[1],l=r.a.useState({id:null,content:null}),d=Object(k.a)(l,2),p=d[0],m=d[1],f=Object(s.useDispatch)();function _(){return(_=Object(g.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(Qe(a));case 2:t=e.sent,La.a.saveAs(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.useEffect((function(){null!=a&&a!==p.template_id?(u(!0),f(Ve(a)).then((function(e){m({id:a,content:e})})).finally((function(){return u(!1)}))):u(!1)}),[a,u,p.template_id,f]),r.a.createElement(Aa.a,{size:"xl",show:t,onHide:n,dialogClassName:"fullscreen-modal"},r.a.createElement(Ni.a,{closeButton:!0},r.a.createElement(Aa.a.Title,null,"Previewing Template")),r.a.createElement(Aa.a.Body,{className:"d-flex"},r.a.createElement("p",null,"The template you are previewing has its fields filled in with dummy values. These values will be replaced with correct values when the template is used to create a contract."),c&&r.a.createElement(Pa.a,{variant:"info"},r.a.createElement(Ca.a,{animation:"border",className:"mr-3"}),"Loading Template..."),null!=a&&!c&&r.a.createElement("iframe",{style:{boder:"1px solid black",width:"100%",flexGrow:1},srcDoc:c?null:p.content,title:"Contract template preview"})),r.a.createElement(Aa.a.Footer,null,r.a.createElement(h.a,{title:"Download a copy of this template. The downloaded copy will have no substitutions made and will be suitable for editing.",onClick:function(){return _.apply(this,arguments)},variant:"link"},r.a.createElement(ja.c,{className:"mr-2"}),"Download Template"),r.a.createElement(h.a,{variant:"secondary",onClick:n},"Close")))}function Ii(){var e=r.a.useState(!1),t=Object(k.a)(e,2),n=t[0],a=t[1],i=r.a.useState(null),o=Object(k.a)(i,2),c=o[0],u=o[1],l=Object(s.useSelector)(Xe),d=[{Header:"Template Name",accessor:"template_name"},{Header:"Template File",accessor:"template_file",Cell:function(e){var t=e.row._original,n=t.id,i=t.template_file;return r.a.createElement("div",null,r.a.createElement(h.a,{variant:"light",size:"sm",className:"mr-2 py-0",title:"Preview Template",onClick:function(){return function(e){u(e),a(!0)}(n)}},r.a.createElement(ja.h,null)),i)}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(ba,{contractTemplates:l,columns:d}),r.a.createElement(Di,{show:n,onClose:function(){return a(!1)},template_id:c}))}function Pi(){var e=r.a.useState(!1),t=Object(k.a)(e,2),n=t[0],a=t[1];return r.a.createElement("div",{className:"page-body"},r.a.createElement(Za,null,r.a.createElement(Wa,null,"Available Actions"),r.a.createElement(Ya,{icon:r.a.createElement(ja.g,null),onClick:function(){a(!0)}},"Add Contract Template")),r.a.createElement(Cr,null,r.a.createElement(Ii,null),r.a.createElement(xi,{show:n,onHide:function(){a(!1)}})))}n(908);function Fi(e){return r.a.createElement(p.a.Item,null,r.a.createElement(p.a.Link,Object.assign({as:c.b},e),e.children))}function Ui(e){var t=e.routes,n=void 0===t?[]:t,a=e.infoComponents,i=void 0===a?[]:a,o=(Object(d.g)("/:mainRoute/:subRoute?")||{params:{mainRoute:"tapp"}}).params.mainRoute;if(0===n.length)return r.a.createElement("div",null,"No Routes in Header");var s=n.map((function(e){return r.a.createElement(Fi,{eventKey:e.route,to:e.route,key:e.route,className:"primary"},e.name)})),c=n.filter((function(e){return e.route.substring(1)===o})).map((function(e){return(e.subroutes||[]).map((function(t){var n="".concat(e.route).concat(t.route);return r.a.createElement(Fi,{to:n,title:t.name,key:n,className:"secondary"},t.name)}))}));return r.a.createElement("div",{className:"header-container"},r.a.createElement("div",{className:"header-nav"},r.a.createElement(m.a,null,r.a.createElement(p.a,{activeKey:o,defaultActiveKey:"tapp",className:"primary-nav-links"},s)),r.a.createElement(p.a,{className:"secondary-nav-links"},c)),r.a.createElement("div",{className:"header-widgets"},i))}n(168);var Ri=n(397),Hi=r.a.forwardRef((function(e,t){var n=e.children,a=e.style,i=e.className,o=e.clearFilter,s=r.a.useState(""),c=Object(k.a)(s,2),u=c[0],l=c[1];r.a.useEffect((function(){o&&l("")}),[o]);var d=r.a.Children.toArray(n).filter((function(e){return!u.trim()||e.props.children.toLowerCase().includes(u.trim())})),p=0===n.length?"No Available Sessions":"No Matching Sessions";return r.a.createElement("div",{style:a,className:i,ref:t},r.a.createElement(Ri.a,{autoFocus:!0,className:"mx-3 my-2 w-auto",placeholder:"Type to filter...",title:"Filter sessions",onChange:function(e){l(e.currentTarget.value)},value:u,tabIndex:0}),r.a.createElement("ul",{className:"list-unstyled my-0"},d.length>0?d:r.a.createElement("li",{className:"dropdown-item text-muted"},p)))}));function qi(e){var t=e.items,n=e.activeItemId,a=e.clearFilter;return r.a.createElement(Vn.a.Menu,{as:Hi,clearFilter:a},t.map((function(e,t){return r.a.createElement(Vn.a.Item,{key:e.id,eventKey:t,active:n===e.id},e.name)})))}var Li=[{route:"/tapp",name:"Admin",description:"Admin View",subroutes:[{route:"/sessions",name:"Sessions",description:"Manage Sessions"},{route:"/contract_templates",name:"Contract Templates",description:"Manage Contract Templates"},{route:"/instructors",name:"Instructors",description:"Manage Instructors"},{route:"/positions",name:"Positions",description:"Manage Positions"},{route:"/assignments",name:"Assignments",description:"Manage Assignments"},{route:"/applicants",name:"Applicants",description:"Manage Applicants"}]},{route:"/matching",name:"Matching",description:"Matching",subroutes:[{route:"/statistics",name:"Statistics",description:"See statistics about accepted/rejected contracts"}]},{route:"/appointments_and_positions",name:"Appointments & Positions",description:"Appointments & Positions"}];function Bi(){return r.a.createElement(Ui,{routes:Li,infoComponents:[r.a.createElement(Gi,{key:0}),r.a.createElement(Wi,{key:1})]})}var Mi={setActiveSession:Tn},Gi=Object(s.connect)((function(e){return{sessions:xn(e),activeSession:Nn(e)}}),Mi)((function(e){var t=e.sessions,n=void 0===t?[]:t,a=e.activeSession,i=e.setActiveSession,o=r.a.useState(!1),s=Object(k.a)(o,2),c=s[0],u=s[1],l=a?a.id:null,d=l?r.a.createElement("span",{className:"text-primary mr-2"},a.name):r.a.createElement("span",{className:"text-secondary mr-2"},"Select a Session");return r.a.createElement(Tr.a,null,"Selected session:",r.a.createElement(Vn.a,{onSelect:function(e){i(n[e])},onToggle:function(e){return u(e)},show:c},r.a.createElement(Vn.a.Toggle,{split:!0,variant:"light"},d),r.a.createElement(qi,{items:n,activeItemId:l,clearFilter:!c})))})),Zi={setActiveUserRole:hn},Wi=Object(s.connect)((function(e){return{activeUser:yn(e),activeRole:wn(e)}}),Zi)((function(e){var t=r.a.useState(!1),n=Object(k.a)(t,2),a=n[0],i=n[1],o=e.activeUser,s=void 0===o?{utorid:"<noid>",roles:[]}:o,c=e.activeRole,u=e.setActiveUserRole,l=s.roles,d=c?r.a.createElement("span",{className:"text-primary mr-2"},c):r.a.createElement("span",{className:"text-secondary mr-2"},"Select a role"),p=function(e){return c===e};return r.a.createElement(Tr.a,null,"Login: ",s.utorid," as",r.a.createElement(Vn.a,{onSelect:function(e){u(l[e])},onToggle:function(e){return i(e)},show:a,alignRight:!0},r.a.createElement(Vn.a.Toggle,{split:!0,variant:"light"},d),r.a.createElement(Vn.a.Menu,{flip:!0},(l||[]).map((function(e,t){return r.a.createElement(Vn.a.Item,{key:t,eventKey:t,active:p(e)},e)})))))}));function Yi(){var e=Object(s.useSelector)(Nn),t=r.a.createElement(r.a.Fragment,null,"There is currently ",r.a.createElement("b",{className:"text-primary"},"no active session")," ","selected. Please select one below.");return e&&(t=r.a.createElement(r.a.Fragment,null,"The current active session is"," ",r.a.createElement("b",{className:"text-primary"},e.name),". You may select a different session below.")),r.a.createElement("div",{className:"page-body"},r.a.createElement(Cr,null,r.a.createElement("h2",null,"Welcome to TAPP!"),r.a.createElement("p",null,"TAPP is a TA administration program designed for creating and distributing TA contracts."),r.a.createElement("p",null,"In order to use most features of TAPP, you need to select a"," ",r.a.createElement("i",null,"session"),". ",t),r.a.createElement(Gi,null)))}function Ji(e){var t="Edit ".concat(e.column.Header),n=e.upsertApplicant,a=e.field;function i(){return(i=Object(g.a)(v.a.mark((function t(r){var i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.original.id,t.next=3,n(Object(te.a)({id:i},a,r));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return r.a.createElement(xa,{title:t,value:e.value||"",onChange:function(e){return i.apply(this,arguments)},editable:!0},e.value)}function Ki(e){var t=Object.assign({},e),n=Object(s.useSelector)(Se),a=Object(s.useDispatch)();function i(e){return a(ye(e))}function o(e){return function(t){return r.a.createElement(Ji,Object.assign({field:e,upsertApplicant:i},t))}}var c=[{Header:"Last Name",accessor:"last_name",Cell:o("last_name")},{Header:"First Name",accessor:"first_name",Cell:o("first_name")},{Header:"Email",accessor:"email",Cell:o("email")},{Header:"UTORid",accessor:"utorid",Cell:o("utorid")},{Header:"Student Number",accessor:"student_number",Cell:o("student_number")},{Header:"Phone",accessor:"phone",Cell:o("phone")}];return r.a.createElement(ha,Object.assign({applicants:n,columns:c},t))}var zi={first_name:"",last_name:"",email:"",utorid:"",phone:"",student_number:""};function Vi(e){var t=e.show,n=e.onHide,a=void 0===n?function(){}:n,i=r.a.useState(zi),o=Object(k.a)(i,2),c=o[0],u=o[1],l=r.a.useState(!1),d=Object(k.a)(l,2),p=d[0],m=d[1],f=Object(s.useSelector)(Se),_=Object(s.useDispatch)();function b(e){return _(ye(e))}function y(){return(y=Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,b(c);case 3:m(!1),a();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}r.a.useEffect((function(){t||u(zi)}),[t]);var w=p?r.a.createElement(Ca.a,{animation:"border",size:"sm",className:"mr-1"}):null,E=function(e,t){var n={delayShow:"",immediateShow:""};Fa(e.utorid||"")&&Fa(e.first_name||"")&&Fa(e.last_name||"")||(n.delayShow="A first name, last name, and utorid is required");var a=t.find((function(t){return Fa(t.utorid)===Fa(e.utorid||"")}));return a&&(n.immediateShow=r.a.createElement("p",null,"Another applicant exists with utorid=",e.utorid,":"," ",r.a.createElement("b",null,a.first_name," ",a.last_name))),n}(c,f);return r.a.createElement(Aa.a,{show:t,onHide:a},r.a.createElement(Aa.a.Header,{closeButton:!0},r.a.createElement(Aa.a.Title,null,"Add Applicant")),r.a.createElement(Aa.a.Body,null,r.a.createElement(va,{applicant:c,setApplicant:u}),E.immediateShow?r.a.createElement(Pa.a,{variant:"danger"},E.immediateShow):null),r.a.createElement(Aa.a.Footer,null,r.a.createElement(h.a,{onClick:a,variant:"light"},"Cancel"),r.a.createElement(h.a,{onClick:function(){return y.apply(this,arguments)},title:E.delayShow||"Create Instructor",disabled:!!E.delayShow||!!E.immediateShow},w,"Create Applicant")))}function Qi(){var e=Object(s.useDispatch)(),t=r.a.useState(null),n=Object(k.a)(t,2),a=n[0],i=n[1];return r.a.useEffect((function(){function t(){return(t=Object(g.a)(v.a.mark((function t(){var n,r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=function(e,t){return pr({toSpreadsheet:function(){return[["Last Name","First Name","UTORid","Student Number","email","Phone"]].concat(e.map((function(e){return[e.last_name,e.first_name,e.utorid,e.student_number,e.email,e.phone]})))},toJson:function(){return{applicants:e.map((function(e){return mr.applicant(e)}))}}},t,"applicants")},i(null),t.next=4,e(we(n,a));case 4:r=t.sent,La.a.saveAs(r);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}a&&function(){return t.apply(this,arguments)}().catch(console.error)}),[a,e]),r.a.createElement(Ka,{onClick:function(e){i(e)}})}var $i={keys:["first_name","last_name","utorid","email","student_number","phone"],keyMap:{"First Name":"first_name","Given Name":"first_name",First:"first_name","Last Name":"last_name",Surname:"last_name","Family Name":"last_name",Last:"last_name","Student Number":"student_number"},requiredKeys:["utorid"],primaryKey:"utorid",dateColumns:[],baseName:"applicants"};function Xi(){var e=Object(s.useDispatch)(),t=Object(s.useSelector)(Se),n=r.a.useState(null),a=Object(k.a)(n,2),i=a[0],o=a[1],c=r.a.useState(null),u=Object(k.a)(c,2),l=u[0],d=u[1],p=r.a.useState(null),m=Object(k.a)(p,2),f=m[0],h=m[1],_=r.a.useState(!1),b=Object(k.a)(_,2),y=b[0],w=b[1];function E(){return(E=Object(g.a)(v.a.mark((function t(){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l){t.next=2;break}throw new Error("Unable to compute an appropriate diff");case 2:return n=Er(l),t.next=5,e(Ee(n));case 5:o(null);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}r.a.useEffect((function(){i||l&&d(null)}),[l,d,i]),r.a.useEffect((function(){if(i&&!y)try{h(null);var e=dr(i,$i),n=br.applicants(e,{applicants:t});d(n)}catch(a){console.warn(a),h(a)}}),[i,t,y]);var O=r.a.createElement("p",null,"No data loaded...");if(f)O=r.a.createElement(Pa.a,{variant:"danger"},""+f);else if(l){var S=l.filter((function(e){return"new"===e.status})).map((function(e){return e.obj})),j=l.filter((function(e){return"modified"===e.status}));O=0===S.length&&0===j.length?r.a.createElement(Pa.a,{variant:"warning"},"No difference between imported applicants and those already on the system."):r.a.createElement(r.a.Fragment,null,S.length>0&&r.a.createElement(Pa.a,{variant:"primary"},r.a.createElement("span",{className:"mb-1"},"The following applicants will be"," ",r.a.createElement("strong",null,"added")),r.a.createElement(ha,{applicants:S})),j.length>0&&r.a.createElement(Pa.a,{variant:"info"},r.a.createElement("span",{className:"mb-1"},"The following instructors will be"," ",r.a.createElement("strong",null,"modified")),r.a.createElement(fa,{modifiedApplicants:j})))}return r.a.createElement(nr,{onConfirm:function(){return E.apply(this,arguments)},onFileChange:o,dialogContent:O,setInProgress:w})}function eo(){var e=r.a.useState(!1),t=Object(k.a)(e,2),n=t[0],a=t[1],i=r.a.useState(!1),o=Object(k.a)(i,2),s=o[0],c=o[1];return r.a.createElement("div",{className:"page-body"},r.a.createElement(Za,null,r.a.createElement(Wa,null,"Available Actions"),r.a.createElement(Ya,{icon:r.a.createElement(ja.g,null),onClick:function(){a(!0)}},"Add Applicant"),r.a.createElement(Ya,{icon:r.a.createElement(ja.j,null),onClick:function(){return c(!s)},active:s},"Delete Applicant"),r.a.createElement(Wa,null,"Import/Export"),r.a.createElement(Xi,null),r.a.createElement(Qi,null)),r.a.createElement(Cr,null,r.a.createElement(Vi,{show:n,onHide:function(){a(!1)}}),r.a.createElement(Ki,null)))}function to(){return r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/"},r.a.createElement(d.a,{to:"/tapp"})),r.a.createElement(d.b,{exact:!0,path:"/tapp"},r.a.createElement(Yi,null)),r.a.createElement(d.b,{exact:!0,path:"/tapp/sessions"},r.a.createElement(pi,null)),r.a.createElement(d.b,{exact:!0,path:"/tapp/contract_templates"},r.a.createElement(Pi,null)),r.a.createElement(d.b,{exact:!0,path:"/tapp/instructors"},r.a.createElement(Ar,null)),r.a.createElement(d.b,{exact:!0,path:"/tapp/positions"},r.a.createElement(bi,null)),r.a.createElement(d.b,{exact:!0,path:"/tapp/assignments"},r.a.createElement(Ti,null)),r.a.createElement(d.b,{exact:!0,path:"/tapp/applicants"},r.a.createElement(eo,null)),r.a.createElement(d.b,{exact:!0,path:"/dashboard"},r.a.createElement(ii,null)),r.a.createElement(d.b,{exact:!0,path:"/cp"},r.a.createElement(si,null)))}n(909),n(910);var no,ao=function(e){Object(M.a)(n,e);var t=Object(G.a)(n);function n(){return Object(L.a)(this,n),t.apply(this,arguments)}return Object(na.a)(n,[{key:"componentDidMount",value:function(){this.props.initFromStage("pageLoad")}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Bi,null),r.a.createElement("div",{className:"view-container"},r.a.createElement(to,null)),r.a.createElement(aa,null))}}]),n}(r.a.Component),ro=Object(s.connect)((function(e){return{globals:an(e)}}),{initFromStage:cn})(ao),io=n(402),oo=n(258),so=n(403),co=n.n(so),uo=n(928),lo=Object(ae.createReducer)({},Object(te.a)({},"SET_GLOBALS",(function(e,t){return Object(l.a)(Object(l.a)({},e),t.payload)}))),po=Object(ae.createReducer)({selectedAssignmentIds:[]},Object(te.a)({},"SET_SELECTED_ROWS",(function(e,t){return Object(l.a)(Object(l.a)({},e),{},{selectedAssignmentIds:t.payload})}))),mo=se({model:se({status:oe({ongoingInteraction:!1,ongoingInteractionsList:[]},(no={},Object(te.a)(no,"API_INTERACTION_START",(function(e,t){return Object(l.a)(Object(l.a)({},e),{},{ongoingInteraction:!0,ongoingInteractionsList:[].concat(Object(gr.a)(e.ongoingInteractionsList),[t.payload])})})),Object(te.a)(no,"API_INTERACTION_END",(function(e,t){var n=e.ongoingInteractionsList.filter((function(e){return e.id!==t.payload.id}));return Object(l.a)(Object(l.a)({},e),{},{ongoingInteraction:n.length>0,ongoingInteractionsList:n})})),no)),sessions:le,positions:Te,applicants:fe,applications:Ce,assignments:xt,instructors:ke,contractTemplates:Me,users:de}),ui:se({notifications:E.reducer,form:uo.a,offerTable:po,globals:lo})}),fo=n(406),ho=function(){var e={key:"root",storage:co.a,whitelist:["auth","application"]},t=Object(oo.a)(e,mo),n=Object(ne.createStore)(t,Object(io.composeWithDevTools)(Object(ne.applyMiddleware)(fo.a)));return{store:n,persistor:Object(oo.b)(n)}}(),_o=ho.store,vo=ho.persistor,go=function(e){return r.a.createElement(r.a.Fragment,null,e.children)};go=function(e){return r.a.createElement("div",{id:"dev-frame",className:"bg-info"},r.a.createElement("div",{id:"dev-frame-header"},r.a.createElement(m.a,{expand:!0,variant:"dark"},r.a.createElement(m.a.Brand,{href:"#/",title:"View TAPP in development mode in a framed window."},"Dev Mode"),r.a.createElement(p.a,{className:"mr-auto"},r.a.createElement($n,{to:"/dashboard"},"Dashboard")),r.a.createElement(p.a,{className:"mr-auto"},r.a.createElement($n,{to:"/api-docs"},"API Docs")),r.a.createElement(m.a.Collapse,{className:"justify-content-end"},r.a.createElement(ea,null),r.a.createElement(ta,null)))),r.a.createElement("div",{id:"dev-frame-body"},r.a.createElement("div",{id:"dev-frame-body-inner"},r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/api-docs"},r.a.createElement(Jn.a,{spec:Xn,docExpansion:"list"})),r.a.createElement(d.b,null,e.children)))),r.a.createElement("div",{id:"dev-frame-footer"}))};var bo;bo=ro,o.a.render(r.a.createElement(c.a,null,r.a.createElement(s.Provider,{store:_o},r.a.createElement(u.a,{persistor:vo},r.a.createElement(go,null,r.a.createElement("div",{id:"app-body"},r.a.createElement(bo,null)))))),document.getElementById("root"))}},[[411,1,2]]]);
//# sourceMappingURL=main.4eaa0e29.chunk.js.map